{"version":3,"sources":["assets/user_avatar_default.png","assets/stop.png","assets/hands.png","assets/hands_down.png","assets/message_word.png","assets/message_excel.png","assets/message_ppt.png","assets/message_pdf.png","assets/message_file.png","utils/url.ts","utils/bi.ts","components/Layout/index.tsx","containers/custom-browser-router.tsx","containers/theme-container.tsx","utils/helper.ts","utils/agora-rtm-client.ts","utils/agora-rtc-client.ts","utils/custom-storage.ts","stores/global.ts","utils/i18n.ts","stores/live.ts","utils/local-store.ts","utils/tool.ts","stores/room.ts","utils/webapi.ts","api/live.ts","stores/socket.ts","components/icon.tsx","components/custom-button.tsx","components/form-select.tsx","components/volume/speaker.tsx","components/volume/voice.tsx","utils/fetch.ts","api/rtm-restful.ts","api/whiteboard-api.ts","api/record-operator.ts","stores/whiteboard.ts","containers/root-container.tsx","hooks/use-chat-text.ts","components/VideoPlayer/index.tsx","components/setting-card.tsx","utils/types.ts","hooks/use-setting-control.tsx","components/Nav/navFc.tsx","components/Nav/index.tsx","components/native-shared-window.tsx","pages/classroom/index.tsx","components/progress/progress.tsx","components/whiteboard.tsx","components/whiteboard/control.tsx","hooks/use-streams.ts","components/whiteboard/tools.tsx","utils/upload-manager.ts","components/whiteboard/upload/upload-btn.tsx","components/whiteboard/resources-menu/index.tsx","components/whiteboard/scale-controller.tsx","components/whiteboard/upload/upload-notice.tsx","components/mediaboard.tsx","components/chat/message.tsx","components/chat/panel.tsx","components/student-list.tsx","components/live-data.tsx","components/VideoMarquee/index.tsx","components/roomboard.tsx","pages/classroom/small-class.tsx","pages/home.tsx","hooks/use-token-join.ts","pages/device-test.tsx","components/loading.tsx","components/Toast/index.tsx","components/dialog/index.tsx","pages/replay.tsx","utils/socket-io.ts","serviceWorker.js","index.tsx","pages/index.tsx"],"names":["module","exports","hostname","window","location","host","isOnline","match","ID","Layout","props","state","error","ele","document","createElement","src","addEventListener","dataLayer","gtag","args","push","arguments","Date","head","appendChild","inject","errorInfo","console","children","this","React","RouterContext","createContext","CustomBrowserRouter","routeProps","Provider","value","THEME","createMuiTheme","typography","overrides","MuiRadio","root","padding","MuiSvgIcon","width","height","MuiFormControl","margin","MuiInput","underline","borderBottom","ThemeProvider","theme","ossConfig","process","ossClient","OSS","getOSSUrl","mediaUrl","res","log","handleRegion","region","resolveMessage","peerId","cmd","type","text","RoomMessage","acceptCoVideo","rejectCoVideo","cancelCoVideo","applyCoVideo","muteVideo","muteAudio","unmuteAudio","unmuteVideo","warn","jsonParse","json","JSON","parse","err","resolveFileInfo","file","fileName","encodeURI","name","fileType","substring","length","lastIndexOf","level","APP_ID","logFilter","AgoraRTM","LOG_FILTER_DEBUG","AgoraRTMClient","_bus","_currentChannel","_currentChannelName","_channels","_client","_channelAttrsKey","_logged","_joined","EventEmitter","createInstance","enableLogUpload","removeAllListeners","Object","keys","channel","evtName","cb","on","off","uid","token","login","newState","reason","emit","logout","destroy","_channel","createChannel","join","message","memberId","count","attributes","leave","destroyChannel","deleteChannelAttributesByKey","key","attrs","channelAttributes","stringify","addOrUpdateChannelAttributes","enableNotificationToChannelMembers","deleteChannelAttributesByKeys","ids","getChannelMemberCount","accounts","results","map","it","queryPeersOnlineStatus","teacher","find","role","teacherCount","totalCount","filter","channelName","getChannelAttributes","teacherObj","_","student","body","sendMessage","enableHistoricalMessaging","sendMessageToPeer","result","hasPeerReceived","streamEvents","clientEvents","AgoraRTCClient","REACT_APP_AGORA_APP_TOKEN","streamID","_init","_published","_internalTimer","AgoraRTC","createClient","mode","codec","_localStream","_streamEvents","_clientEvents","appId","prepareInit","Promise","resolve","reject","init","enableRtt","initClient","subscribeClientEvents","setInterval","getTransportStats","stats","RTT","unsubscribeClientEvents","removeEventListener","newToken","renewToken","publish","setTimeout","unpublish","destroyLocalStream","stream","streamType","setRemoteVideoStreamType","enableDualStream","data","createStream","mirror","subscribeLocalStreamEvents","audioOutput","deviceId","setAudioOutput","then","catch","unsubscribeLocalStreamEvents","isPlaying","stop","close","speakerId","volume","setAudioVolume","subscribe","video","audio","clearInterval","getDevices","devices","_devices","forEach","item","kind","label","AgoraWebClient","deps","rtc","shareClient","localUid","bus","shared","joined","published","tmpStream","roomStore","client","createLocalStream","microphoneId","cameraId","dual","setRTCJoined","unpublishLocalStream","destroyClient","screen","screenAudio","removeLocalSharedStream","leaveChannel","GlobalStorage","storage","sessionStorage","getItem","val","setItem","removeItem","language","channelMessages","read","isEmpty","messages","chatMessages","message_type","reduce","collect","payload","content","concat","account","ms","globalStore","subject","defaultState","loading","toast","dialog","confirmText","cancelText","uploadNotice","title","notice","nativeWindowInfo","visible","items","active","newMessageCount","liveHouseName","liveId","createId","getLanguage","Subject","next","updateState","initialize","unsubscribe","rootState","commit","save","reload","len","BUILD_VERSION","REACT_APP_BUILD_VERSION","build_version","zhCN","en","t","options","lang","get","replace","liveStore","onlineIds","resumList","tokenInfo","rtcToken","rtcUid","rtmToken","whiteBoardToken","whiteBoardUuid","detail","identify","id","classroomId","senderId","houseName","status","startTime","endTime","discussionStatus","audienceList","creater","avatar","broadcast","handsUp","forbiddenWord","online","chat","boardId","sharedId","linkId","lockBoard","grantBoard","allForbidden","messageList","List","openState","userId","index","findIndex","k","Number","splice","isJoin","onlineNum","newList","setAllForbidden","sort","a","b","setAudienceListLeaveOrJoin","arr","obj","forbidden","me","generateType","prototype","toString","call","set","storeName","storeValue","storeItem","localStorage","e","LocalKey","prefix","userInfo","accessToken","element","weekArray","formatTime","timestamp","diffToday","format","currentDate","dayjs","date","newCurrentDate","newDate","currentYear","year","locale","getFileType","test","icon","require","removeClassCall","str","indexOf","canJoin","onlineStatus","channelCount","permitted","Infinity","_state","freeze","rtmLock","users","Map","applyUid","rtm","memberCount","Set","localStream","localSharedStream","remoteStreams","course","teacherId","courseState","muteChat","rid","roomName","mediaDevice","speakerVolume","camera","speaker","microphone","navigator","applyLock","windowId","rtmClient","rtcClient","user","add","delete","remoteStream","updateAttrsBy","sendPeerMessage","muteBoard","unmuteChat","unmuteBoard","pass","channelMemberCount","getChannelAttributeBy","queryOnlineStatusBy","argsJoin","updateMe","link_uid","whiteboard_uid","msg","action","updateHandOffState","updateHandUpState","setDiscussionStatus","paramObj","sender","isSystem","setMessageList","list","receiver","some","isSelf","mute","unmute","setAudienceList","every","attr","shared_uid","grant_board","assign","mute_chat","class_state","updateChannelAttrsByKey","forceUseRtm","undefined","lock_board","room","localStore","acc","newClassState","info","homePage","exit","clear","axios","Axios","create","baseURL","timeout","interceptors","request","use","config","store","url","queryIndex","query","sign","httpSign","method","headers","appVersion","platform","Authorization","trim","response","NProgress","done","hideErrorMessage","code","desc","params","Message","reg","genUrl","ps","parseParams","RegExp","path","Api","req","forms","post","put","patch","webapi","getLiveDetail","formData","getLiveAudiences","getLiveUid","getForbiddenStatus","liveRoomName","setForbiddenStatus","putDownHands","revokeHandsUp","singleToken","getAgoraToken","getDiscussionStatus","socketStore","liveClassState","recordVideoState","chattingView","messageView","messageId","chattingId","disable","className","onClick","iconClass","dataName","needHover","chName","position","ch","getPositionAndPopover","trigger","placement","data-name","Button","variant","color","memo","Label","onChange","InputLabel","Select","MenuItem","useStyles","makeStyles","display","marginTop","sliderClass","minWidth","marginLeft","ContinuousSlider","classes","useState","setValue","useEffect","Slider","event","newValue","aria-labelledby","sliderRailClass","sliderMarkClass","CustomSlider","Array","VoiceSlider","AgoraFetch","input","fetch","Error","PREFIX","REACT_APP_AGORA_RTM_SERVICE_ENDPOINT","RTMRestful","customerId","appSecret","source","destination","offset","limit","plainCredentials","btoa","basicAuthorization","start_time","end_time","order","responseA","jsonA","respB","jsonB","fetchChannelMessageCount","fetchChannelMessages","sdkToken","WhiteboardAPI","uuid","roomToken","callback","replayRoom","beginTimestamp","duration","mediaURL","retrying","RecordOperator","rtcBaseConfig","recordingConfig","storageConfig","agoraAppId","customerCertificate","recordId","resourceId","cname","clientRequest","recordingErr","sid","release","pathName","exec","$1","plugins","createPlugins","videoPlugin","audioPlugin","setPluginContext","identity","whiteboard","scenes","currentScenePath","currentHeight","currentWidth","dirs","activeDir","zoomRadio","scale","recording","WhiteWebSdk","deviceType","DeviceType","Surface","loggerOptions","disableReportLog","reportLevelMask","printLevelMask","operator","roomState","sceneState","scenePath","ppt","currentPage","totalPage","_dirPath","dirPath","update","sceneFile","rootPath","_dirs","currentDirIndex","userPayload","joinRoom","disableBezier","onPhaseChanged","phase","RoomPhase","Connected","updateLoading","onRoomStateChanged","zoomScale","updateScale","updateRoomState","onDisconnectWithError","onKickedWithReason","onKeyDown","onKeyUp","onHandToolActive","onPPTLoadProgress","progress","updateWhiteboardUid","disconnect","audioProfile","transcodingConfig","bitrate","fps","vendor","bucket","accessKey","secretKey","acquire","start","now","roomUUID","lockBoardStatus","Boolean","showToast","useObserver","setState","whiteboardStore","RootContext","useStore","context","useContext","useGlobalState","globalState","useRoomState","RootProvider","whiteboardState","liveState","socketState","ref","useHistory","useRef","current","channelAttrs","teacherJson","students","resolveChannelAttrs","updateRoomAttrs","setOnlineIds","updateCourseLinkUid","removeNotice","updateMemberCount","exitAll","href","handOffMessage","ts","updateChannelMessage","handSingOffMessage","handUpMessage","msgObj","useLocation","pathname","useChatText","useMemo","lock","others","closeRoom","sendChannelMessage","handoff","getTime","handup","studenthandoff","topic","topicMessage","objList","paramObj1","handleChange","evt","target","slice","preview","domId","handleClick","local","handleClose","loadVideo","loadAudio","lockPlay","isHandsUp","setIsHandsUp","play","fit","addResumList","onHandsClick","param","toggleVoice","env","alert","handsUpImg","handsDownImg","ClassState","formControl","maxWidth","setDevices","cameraList","microphoneList","speakerList","setCamera","setMicrophone","setSpeaker","setSpeakerVolume","setVolume","mounted","webClient","setStream","createPreviewStream","finally","interval","getAudioLevel","PreviewPlayer","useCallback","MicrophoneVolume","mediaInfo","updateDevice","useSettingControl","FormControl","handleFinish","networkQualityIcon","excellent","good","poor","bad","down","unknown","RecordButton","isLive","recordStart","NavFc","delay","network","cpu","time","showSetting","classState","onCardConfirm","recordEnd","classEnd","classStart","recordState","logoutLive","showPopConfirm","saveAudio","inputOnChange","closeLogout","logoutVisible","isOpenState","show","setShow","stateType","style","justifyContent","alignItems","moment","onOk","onCancel","okText","placeholder","maxLength","AgoraStream","NavContainer","startClassTimer","timer","setTimer","setRecordState","card","setCard","rtt","updateRtt","quality","updateQuality","cpuUsage","recordDataRef","recordStateRef","setPopConfirmState","setLogoutVisible","setOpenState","liveDetail","setLiveState","setFileName","currentTime","minute","createTipsTimer","description","notification","open","teacherCloseLive","Math","max","downlinkNetworkQuality","uplinkNetworkQuality","NetworkQualityEvaluation","STARTED","calcDuration","CLOSED","Live","changeFileName","quit","removeDialog","WindowItem","ownerName","image","backgroundImage","WindowList","selectWindow","confirm","cancel","onDoubleClick","NativeSharedWindowContainer","setWindowId","setNativeWindowInfo","RoomPage","removeUploadNotice","setMessageCount","publishLock","rtcJoined","streamSpec","publishLocalStream","_stream","getId","addLocalStream","addRemoteStream","removeRemoteStream","addPeerUser","removePeerUser","joinChannel","eventName","removeLocalStream","Progress","CircularProgress","Whiteboard","setText","studentShow","setStudentShow","flag","setFlag","typeValue","nowTime","bindHtmlElement","getElementById","$whiteboard","moveCamera","centerX","centerY","refreshViewSize","alt","ControlItem","Control","sharing","isHost","marginRight","useStream","remoteTeacherStream","myAttr","studentStreams","sharedStream","currentHost","userAttr","peerUid","peerUserAttr","onPlayerClick","targetUser","targetUid","ToolItem","Tools","handleToolClick","currentTool","PPTType","PPTProgressPhase","UploadManager","ossUploadCallback","getFile","generateObjectUrl","addFile","rawFile","onProgress","multipartUpload","p","Uploading","pptConverter","folder","pptURL","PptKind","Static","convert","onProgressUpdated","Converting","documentFile","uuidv4","pptType","static","MD5","putScenes","setScenePath","dynamic","imageInnerSize","windowSize","innerWidth","innerHeight","widthHeightProportion","imageFiles","x","y","newAcceptedFilePromises","fetchWhiteImageFileWith","all","newAcceptedFiles","uploadImageFilesArray","Image","reader","FileReader","readAsDataURL","onload","getImageSize","imageFile","coordinateX","coordinateY","tasks","convertToPointInWorld","insertImage","task","handleUploadTask","setMemberState","currentApplianceName","fileUrl","completeImageUpload","UploadBtn","onFailure","onSuccess","uploadStatic","currentTarget","files","uploadManager","convertFile","uploadImage","uploadFileArray","clientWidth","clientHeight","uploadImageFiles","uploadAudioVideo","isHttps","split","toLowerCase","insertPlugin","originX","originY","pluginVideoUrl","pluginAudioUrl","htmlFor","accept","ResourcesMenu","onClose","ScaleController","tempRuleIndex","syncRuleIndexTimer","clearTimeout","syncDuration","readRuleIndexByScale","delaySyncRuleIndex","zoomChange","deltaIndex","dividingRule","targetScale","ceil","moveRuleIndex","onClickBoardLock","i","prePoint","point","nextPoint","begin","MIN_SAFE_INTEGER","end","MAX_SAFE_INTEGER","Component","UploadNotice","UploadNoticeView","queueRef","setMessages","timerRef","shift","idx","rtmState","pageTool","setPageTool","startScreenShare","stopScreenShare","setScreenShare","localShareStream","addLocalSharedStream","addNewPage","newIndex","currentPath","setSceneIndex","changePage","force","_idx","pptNextStep","pptPreviousStep","showControl","toolItems","drawable","tool","setTool","selector","updateSelector","uploadPhase","updateUploadPhase","convertPhase","updateConvertPhase","UploadPanel","percent","showUploadNotice","setViewMode","ViewMode","Broadcaster","Freedom","handToolActive","disableCameraTransform","UploadProgressView","strokeColor","memberState","r","g","onChangeComplete","rgb","showDialog","nickname","link","setData","time1","parseInt","h","getHours","mm","getMinutes","padStart","to","regexPattern","truncateBlank","ChatPanel","setRefs","scrollTop","scrollHeight","setStatus","closeDiscussion","Input","disabled","disableUnderline","onKeyPress","CustomIcon","StudentList","isHand","setForbidden","cancelHands","LiveData","teacherName","weekIndex","transformWeekDay","classroomList","images","thumbnail","data-source","original","attachements","rel","download","marqueeEl","resume","deleteResumList","Roomboard","setActive","SmallClass","currentActive","showRoom","setShowRoom","useParams","joinRtm","tokenData","setTokenData","userName","fetchData","detaiData","whiteBoard","setDetail","promises","tokens","setTokenInfo","resStatus","resAudience","anchor","setCreater","success","showLoading","loginAndJoin","updateSessionInfo","getMembers","stopLoading","useTokenLogin","Fragment","history","goBack","spacing","container","top","left","background","opacity","zIndex","Loading","LoadContainer","ConsecutiveSnackbars","RoomDialog","onConfirm","Dialog","disableBackdropClick","aria-describedby","DialogContent","DialogContentText","player","PlayerPhase","Pause","isFirstScreenReady","isPlayerSeeking","seenMessagesLength","isChatOpen","isVisible","replayFail","scheduleTime","seekToScheduleTime","Playing","Ended","_uuid","ReplayContext","ReplayContainer","Replay","handlePlayerClick","WaitingFirstFrame","pause","onWindowResize","handleSpaceKey","handleOperationClick","URLSearchParams","search","abs","onCatchErrorWhenRender","onCatchErrorWhenAppendFrame","updatePhase","onLoadFirstFrame","loadFirstFrame","onSliceChanged","onPlayerStateChanged","onStoppedWithError","setReplayFail","onScheduleTimeChanged","setCurrentTime","setPlayer","totalTime","loadRTM","getRtmMessage","utc","PlayerCover","Buffering","onMouseDown","onMouseUp","updateProgress","min","objectFit","SocketIOClient","socket","SocketIO","transports","openConnect","heartCheck","auth","receive","setSocketDetail","ReactDOM","render","exact","component","Home","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.38a520a9.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAFIUlEQVRoQ+2YB8iVZRzFfyfbVIhNmlY0bU+zHKSmpWYlpVmkpU3L0EqjJApSIitpglhWtGkhBe1NOEojo2FLwnA1jRZlnTjwfCCiX733Xj8Tvgde7uXe93nf//mvc/6PWMeX1nH7aQWwtiPYGoHWCNTpgTWaQra3AnYAlkv6sE5bV7l9jQGwvTPwIHAo8BNwg6RbGw2i4QBs55ltgIeAg4DrgRHAJsDpwI/AIkluBJiGArB9MnAG8DewH/CspDG2e+Q78D6wGfAlcJakH+oF0TAAtrsDjwJLS8p0BEZKut32AcBsYB4wHQjQe4CrJP1VD4hGArgJ6A+cBPwGvJsakDTSdm9gGnCapGm2Uxt7ACdKWvJ/AfBI6ThJl62BT4CZknrYPhh4Eegi6WPbZwMB/CrwBTBR0ne1AGlkBKYUr/YF/gAWALMk9Ssp9ATQS9J820OA+0otbAq8AQyX9HNVEI0EcAcQT58gaZntz4C5kgbY7lAM7i9poe1zS3fqBJwJXAZ0lPTR2gSQlOgCHJ90sB2vLpY00PbewJ2lBvLfUOBCILWxSynwbpLeahEA6fUr93Hb6fd9SpostR0eaCNpkO0U7M3hAUm/lBoYWO4/BJhRIvDOGgdgO4R0KrAXcL+kT/NS21cXouopaZHti4C2kibY3g2YkHSRtNz2cOAoScNsDygtNSmUwq+0KteA7buBwcCy0u8HS5ptO3l8HtBD0gLbaacdJI233R4YJymGB2zSp13574oUMNBd0teVrIdqE5ntfYCXgedKTqefp/0FUD9gDHBs6TQhsrTNG4suGiFpbAEQabFU0uO2U/yHA8el+Nc0gP2Bt4Ghkp6yfQzwdIRaATIe6Crp89I6kyaTbe8EDJI0sQA4H3gPSM5n//ohwVpYuVIKFXn8AvABEDJar+TvvkCU5iSgs6R5trcB2kuaZbttSaeATwodAXwFpO/nefNSD1W9n/srAVihWEeVkM+xnV7+CnBJ6TSdov1tR9QdCOwK/FpIK2JuhqTF5VnbAy8BD6ceWgrAjqUGZpWijacjE6JpjgaOlDTXduaAdKqQW3ggg82eRWKEMx5LVAr4sZLCzJVX5QgUz40rHk/BxtsBkEikxaYLvbaiJbYzH2wJpAmEhbtFiRbvv5k0lJQ6qrxqBbA78Dpwi6RJtrcFLi/smtxOIX+7Kmtsp2B7AuGJcMe9ASLpysrW11IDJQIble6xHDgl5FR+T85fAGwHDJP0/eqMKl0q+x6ImJM0usUAFGPT05uIa37Ty8tIGRCdgSGS/mwGROrn+VySklKVV00pVACEfEJqoyRNXSnn89wQ23RJ3zQDIA0hom9Ki9ZAARAdHyaOEX0lZZSstIpKnQmcI+nJSpvLzTVHoIA4rNTCM8BoSb9XMcL2IGByIb+5VfY23VsXgAIiIu464FJJGdT/87Kd1AsX9K71hKIRALbITFtOGm6LbJaUY5Vml+3oqojCqZKu+bf7V/d/3QBKFNoBd5X+fm2OUpozyHZILakTEH0i/tYqgAJiYyCDe0gt0niVh1a2c2IRCd0VuFhS9tS8GhKBprfbTgqlvWawXx2AzUvvnyMpArCu1WgAmXtDYBk5s6KBckU+5Mr3RCr3Lci8XJf1tUqJ1b3UdmaCnPksBDYs1wblM/Ij33NFQkTEZX6u65C30RHolWG96P9wQuaAHDPmc8UrAJY0zQX1RKGhAOoxpNa9rQBq9Vyj9rVGoFGerPU5rRGo1XON2rfOR+Afo2QKT/Vn2ZkAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAMAAABGS8AGAAABklBMVEUVZcDf6PP6+vpzote5z+lwoNe70eqYuuGnxOWhwOMaaMHw9Piuyefo7vZhltPP3u9Nis7p7/YWZsAxd8cqcsU5fcn3+PobacGLst5CgstfldPY5PHn7vVFhMzI2u6AqtuNs9+gv+OwyucibsP4+fq+0+tqnNZ5ptldlNLz9vkcacEyeMfO3u+avOJSjc/h6vQXZsDv8/fX4/GPtd+pxeW60eoudcbN3O5yodeCrNxtntb5+fomcMQ8fspLiM5il9T09vnl7fXW4vGevuKzzOjE1+z29/k+gMuIsN3b5vJ7p9qNs95LiM2StuA0echEhMxVjtDv8/gZaMEYZ8AgbMO2zukea8L19/muyOe80urM3O5Mic54ptnB1eyFrtyWueFelNPk6/QoccWmw+Xs8fe90uvF2O3V4vBck9Kxy+eOtN8sdMZWkNFom9XU4fA2e8kwd8fO3e5sndZaktKiwONkmdQpcsV6p9mTt+CKsd6DrdyqxuaBq9vj6/Tr8PZ0o9hlmdTG2O1Wj9C3zuk7fsrg6fO918xWAAACuklEQVR4Ae3Wg4/vTBTG8WfP2rZt27bt1+vXvvbfveic/KbTTrYnN7roJ04bfpunB1+rUCgUCoWiSImGRww5YuERR0o8HpdASiJMScnkSIFHKilpeFwsKekwZZCSmQVDNrEcPC6XlLx8GAqIFcJQREoxgpSQUgpDGbFyGCpIqUSQKmu96hpitfZ2dQhSb63XQIwam6ztmhGkkJQWuLVSRJutXTsCdXTa6nVRRLetXQ+C9Vrq9ZHWb2s3gGCDlnpDpA2PWNqNItiYpV4PuYz722VCIH/CX2+SHkyRY9rfbgYSs+SY0/XmybGQTg8W/e2WILHsq7dEjpVVcqz5Xl2HxIauZ0zm5hY/ifW229yGxE6Np96Wmsxd7O3TgwNvu0PIHHnqHZPjBDjl6fS0+wYy33rq8WSOAoM8nZ52GZD5zqzHk/k9gFKeTrPdfhNkfjDr8WT+CKDjJ3pwZrY7h9SFUe/StbhXPJ1Gu2tITRv1eDJvACCap9No9zOkfnHX48n8FQ9+c08ntxuuhtTv7no8mfHuu+PI3e4PyEW56v1Jjr/g+Ns1ndwuHnIJuh5PZt4OHP+4ppPbpUEu1lVv0vik/tXTmS08VcyzhevpyQTT01mkTxW5kki9/3gywf6PTOeyPlXkrrienkwwPZ299lNFdLYk6slkrulM1aeKXCHX05PJ9HRmi08V82zhek98v/enPJ3c7hmEWC/X05Op6Olctp8qwrPluZ5MRU9nr/1UEZ4tLyzleTpf2k8V4dnCbuDyipjlVJGeLewCzD2d8lPFtExavG377KeK/GzhyWR6Ou2nivxs4ck0vCZmOVVkZwt7A2ZMp/VUkZ8txmQa02k9VeRnizGZxnTaTxX52cKTaXhL7BwfY4qUd2DmdNpPFfnZwpNpOpWfKhZp7cp7+NS3Oz5U4zMRCoVCodAdT/xXuxEInTUAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAMAAABGS8AGAAAB71BMVEUufTL6+vr4+fgxfzUzgDfx9PHm7uY8hkCvzLGlxqYvfjNBiUVSk1XV49YygDY3gzv09vTz9vOsyq5DikY+h0J6q3xvpXKoyKpamF2Mt47f6d9Jjk319/U4gzzP4ND3+Pc5hD1Xllr5+fm607tMj0/w9PBEi0js8exnoGrk7eVQklM7hT/t8u6PuJE2gjrf6uDF2cbo7+g3gjqYvprC2MNknmdWllqXvZn2+PbO386dwZ7J3MqGs4lFi0lLj06dwZ8yfzby9fKmxqfZ5trk7OTO38+30blCiUb29/bo7+myzrO40rq91b53qnqPuZKZv5uEsobR4dK+1b/A18Lq8OpxpnRjnmbG2segw6Lh6+LW5Nfu8+5TlFbg6uHS4tNdmmB/r4JcmV/b59xHjEqwzbLH28hso29RklTT4tTt8u1NkFCVvJd9rX9tpHB8rX5AiEOnx6m0z7Zem2JUlFdrom7a5trX5djN3s7j7ONfm2JZl1y20LdbmV6HtIrY5dmGs4iav5yUu5ZGjErd6N6ty67A1sFso27M3s12qXmDsYY9hkHp8Op1qHeuzLCixKS81L5ln2g6hD7r8etzp3ZKjk6BsIOfwqEwfjRhnGRjnWbU49XF2sbe6d41gTmOuJBIjUucwJ5WlVnx9fLb59u81L01/8yoAAACEUlEQVQYGe3BU5McYQAF0HsHa9u2md04WWVj27Zt27bzQ1Nb352anpmnxksqfQ7g8/l8Pt9/bjFlfhMSJTdT1sOmBZspi5AolZI7B3btYMROxMsIUEph30zKSsTroRwIwr5DOZQjiFVECUyDE8sovZWwCpVR5sKReZmUGbDqpJR1wZlLdTQmGxCVH6YMwqkNlCWISqHcgWN9WyktiCihLEyGcy2U0SBknPIEbuyhzIJRSFkFVwrW0OgowJTsJBrh2XBnKaUYU5ZTVsCt1TQCpwGUV9CYnga3dv+isRdAPY3J/XDvKmUt1lEOwwNpVTQ2Zm+iMZoFL2wZprGNsh3e6GesEXgktItWrTXwykVa7YN3ihl1GR56mcSIg+nwUj8jRuCl9A5G5L6BhyYY1QPvHKXVMXilppVWzcfhkROMdRLeOEUZoJyBF0JnaZwLnqdxoRIeGKIMopaSCvcyhmnUA8ijUXcFbqWN06goB5DeSONaFly6TrmBKaWUm3DnVphGUjamZN2mMdkGV+5SCmHco9yHGw8oVYgYoDyEc48eU0oQ0VZNo7EJjj2lpCDqGeU5nHpBCecjqv0V5TWc6eqmdMLqLaW3HY68o3SHYPU+k5IHJ2oDlCLE+sCIj7Av+InyGfEmKF++wrZvlEAG4n3PofyAXQ05lFQkGqJU/4RNKWPyOxmJ+jLH5A98Pp/P5/sn/AWJ4EPUygBHhAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAMAAABGS8AGAAAA9lBMVEXYQxX6+vreZD7bUijtsZ7ZSBvkhWf58u/36ubYRBbuu6zZSh748O7ljXLjfl/uvK3cVy76+fnjfF359fPgbkvliGzielrtsZ/aUCX47uv13tflhmndXjbmjHD6+PjnlHr25uHmjXH35+P58e/rppHfaUTpn4j58vDmj3XvwLH14tz58/HmknjZSyDhdlXmkXfbVSvfZ0HfZD/cWTDkhGbvvq7eYTvxyLvnk3nyzcLnln3qo43tt6bxx7raTiPdXTbfZ0Lsrprvv7DdXDXlh2rpoIrbVCv69/b029Pss6HkgWLkgmTjfV7ieFffakbcWjLYRRjljHFmmud9AAABBUlEQVR4Xu3YtXLFMBSE4SPDZeYbZmZmZs77v0y6tSeTVF4Xntm/VPGNmiNpZBlKKaWUGp/8o7Vqtzc/SAZPuX+bqY+GbBj2UZkMoxWPDKN8iwyjZo0Mo3YnCTw7HbW50B+Jy0M/AVz4tT5WislzDBjlJgAv+kzYqg4tUWFbBlziwo1VTCAXtgBbXufCG4AbXPgWsMeFtwBvc+EdwLtceA9wmQvv4+w0KnyAoT6kwsVjTN4JFT51yCPC/plD50aCLy5rQd5FXXGvJnRt6cA3xXTgemhpwJU7AEy4cP9gdPjx6fmF8Cis5GK9vr1/fH7FAe5ZkX1YsGDBggXjI+TbMp9SSin1AxSeHMME6wNuAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAMAAABGS8AGAAAB71BMVEXGKCjIMDDlpKT15ub6+vrz39/lpqbPS0vGKyvvy8v59fXRUlLdh4f15eXXbW3x2Njz3d3nra3GKir15+fSWlrPTEzbfHzvzs7imprbf3/VY2Pw1dXqurrnsLDRVFT26urw0tLQTU3KODjw1NT48PDSWVnNRUX59vbWZ2fswcH6+Pjbfn7be3vmq6vnrq7fj4/48vL26OjWaWnvzMz6+fnMQkL04ODlqKjOR0fYcnLx19fKOjrhlpby2tr37u7IMTHQUlLimJjTXl7uycnjm5vXbGz59PTy3NzHLCzRVVXpt7fkoaHeiorloqLLPT3QUFDHLi737Oz04uLeiYnfjY3txMTKOTnQT0/gkZHOSEjlo6PMQEDqu7vMQUHx1dXSW1vTXV369/fei4vrvLzswMDptrbmrKzjnZ3aeHjHLS3w0NDcgYHPTU3aeXn37+/fjo7SWFjuysrWaGjos7PqubnswsL37e3cg4PRV1fZdXXnr6/TXFzz4ODYb2/z3t7jnJzORkbJNTXux8fmqaneiIjosLDUYWHhlZXLOzvv0NDy29vdhobYcHD48/PtxsbGKSnNRETZc3PafHzMPz/LPDzlpaX04+PosrLNQ0Pwz8/uyMjptbXYbm7vzc3koKDrvb326+vILy/UYmLbgIDil5f+3V+ZAAACpklEQVR4Ae3XY5tlVxCG4bc7z9HYtm3btu2Ztm3bccf6oVnrOvvEaFQ4+/6+jKpSKBQKvc3S0t8hEo3JWjyBN2GijE2CyVOAqTI2DabPmAnMkqnZwBzNBebJ1HxggRYCi2RqMbBES4FlMrUMWL4CZ6VMrQJWr8F+xmuBdbNw1svUBmDjJpzNMoWTvgVnq0xtAxLbcXbI1E5gF95umUonsEe25hDYK1v7COyXsQMkHZSxQ+AdlrUl4B05KmPHSNooY8dJOiBjEQInzHcicFKmTuFE8E7L0h7gTGwCztlzsnMe54Iu4l2Sncs4O3RlG86Eq7Jy7TpwY4Z0E+/ANRnZj3NLUnyl7Rd3GzhzR875DRjGp7s4UXm6h8cmWdiCc1+eZpzE44HBPj9cCzxS4PFSPJ5ctblrT5Xy7Dkezy+fnvPi1OaXJ1+9fpOROTFLo7VvLZCtH+XwW87szdXovP5VNpGXz28q0GgU4hTpBweLby3eQ8qExSWlZQvLSaoYbapCpTzdqdp7mJ/ZVV0j58qU6glArUauDue1nLu3du7iN9Q3FM6Q1DgNaNJIZUWA5/fVeO8wv29b88WCnBaYMPKOW3Gm3prLj67vbDs0p71x1uIJ/FKHRmrFEX5iQuLy/GedSrnzomsXgVH+eqe7SdlW2lOZ9euBe1uW9RHoX66RqUwQWFUyJU2/Z2BwwdD8S+8ueE8j834bKR8MyE7edVI+PCozR9uAwzkT8Opk5spC4KO0FrzbMvNxLbB3YOIunL59snLwLHBRA8N4PbIS/wT4VCrASwzIyj1g57UgUOQ3ysrgBCh/qOXleJ/ZVnT7VXMd76LsLIXPr3yxC+/LuOz0wVckDR+VoX5STjbJUg6Bkq9l65vDOJOHZC7r2+h3p88pFAqF/tu+B66jcHkkRB85AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAAAAABU/m/oAAAA7ElEQVR4AWIIoxEAtGMHmhXDUBjH3zUvFVAEjLZdZ5RtayxWrQP2EgPsAWaGM0jNvSG90nNAvv8D/IQ48AEGDBgw4Eph4zxl2kphEygbr4Wwo3zMSxnsD2FeimA6hvldC+agBfObFhxlSfgnyl4a/uLYLAx//HLsVRam7fM7yi+yMM1t2/X9cD8+CMP03MakYZq0YHo8CTd2r7n6wPEcbP+jy9ZB/MWxpS+H84VOCSavBdOTFkyTFkwVwY1N6kRgm3an9uIKPg8wLg+XVwkMGLC/3fUys0KaExlC0oIRnW72vDOYxwADBgwYsGh/EqDsp/Y872YAAAAASUVORK5CYII=\"","const hostname = window.location.host\nexport const isLocal = !!hostname.match(/:/)\nexport const isTest = !!hostname.match(/^test/)\nexport const isPre = !!hostname.match(/^pre/)\nexport const isOnline = !!hostname.match(/^web/)\n","import { isOnline } from './url'\n\nconst ID = 'UA-138191338-5'\n\nexport function inject() {\n  // 添加统计代码\n  if (!isOnline) {\n    return\n  }\n\n  const ele = document.createElement('script')\n\n  function loaded() {\n    window.dataLayer = window.dataLayer || []\n\n    window.gtag = function(...args) {\n      // 在这里只能传 arguments 才会被追踪\n      window.dataLayer.push(arguments)\n    }\n\n    window.gtag('js', new Date())\n    window.gtag('config', ID)\n  }\n\n  ele.src = 'https://www.googletagmanager.com/gtag/js?id=' + ID\n  ele.addEventListener('load', loaded)\n\n  document.head.appendChild(ele)\n}\n\n/**\n * 针对spa页面做的路由跟踪\n * @param path\n * @param fullPath\n */\nexport function ga(path, fullPath) {\n  if (!isOnline) {\n    return\n  }\n\n  if (window.ga) {\n    window.ga('set', 'page', fullPath)\n    window.ga('send', 'pageview')\n    window.gtag('config', ID, { page_path: fullPath })\n\n    if (path !== fullPath) {\n      window.ga('set', 'page', path)\n      window.ga('send', 'pageview')\n      window.gtag('config', ID, { page_path: path })\n    }\n  }\n}\n","import * as React from \"react\";\n\nimport { inject } from \"../../utils/bi\"\n\nexport default class Layout extends React.Component<{}, { error: boolean }> {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\terror: false\n\t\t};\n\t}\n\tcomponentDidMount() {\n\t\tinject();\n\t}\n\tcomponentDidCatch(error, errorInfo) {\n\t\tconsole.error(error)\n\t\tconsole.error(errorInfo)\n\t}\n\n\trender() {\n\t\tconst { children } = this.props;\n\t\treturn <React.Fragment>{children}</React.Fragment>\n\t}\n}\n","// 顶层路由的Provider\nimport React from 'react';\nimport {HashRouter, Route, Router} from 'react-router-dom';\n\nexport const RouterContext = React.createContext({} as Router);\n\nfunction CustomBrowserRouter ({children}: any) {\n  return (\n    <HashRouter>\n      <Route>\n        {(routeProps: any) => (\n          <RouterContext.Provider value={routeProps}>\n            {children}\n          </RouterContext.Provider>\n        )}\n      </Route>\n    </HashRouter>\n  )\n}\n\nexport default CustomBrowserRouter;","// 整个页面的themeProvider\nimport React from 'react';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { createMuiTheme } from '@material-ui/core/styles';\n\nconst THEME = createMuiTheme({\n  typography: {\n   \"fontFamily\": '-apple-system, BlinkMacSystemFont, \\\\\"Segoe UI\\\\\", \\\\\"Roboto\\\\\", \\\\\"Oxygen\\\\\", \\\\\"Ubuntu\\\\\", \\\\\"Cantarell\\\\\", \\\\\"Fira Sans\\\\\", \\\\\"Droid Sans\\\\\", \\\\\"Helvetica Neue\\\\\", sans-serif',\n   \"fontSize\": 14,\n   \"fontWeightLight\": 300,\n   \"fontWeightRegular\": 400,\n   \"fontWeightMedium\": 500,\n  },\n\n  overrides: {\n    MuiRadio: {\n      root: {\n        padding: '4px'\n      }\n    },\n    MuiSvgIcon: {\n      root: {\n        width: '1rem',\n        height: '1rem',\n      }\n    },\n    MuiFormControl: {\n      root: {\n        margin: '0.3rem 0',\n      }\n    },\n    MuiInput: {\n      underline: {\n        '&:before': {\n          borderBottom: '1px solid #EAEAEA',\n        },\n        '&:hover:not($disabled):not($focused):not($error):before': {\n          borderBottom: `2px solid #EAEAEA`,\n        },\n        '&$focused': {\n          '&:after': {\n            borderBottom: '2px solid #44a2fc',\n          }\n        },\n      }\n    }\n  }\n});\n\nexport default function ({children}: any) {\n  return (\n    <ThemeProvider theme={THEME}>\n      {children}\n    </ThemeProvider>\n  )\n}","import { RoomMessage } from './agora-rtm-client';\nimport * as _ from 'lodash';\nimport OSS from 'ali-oss';\n\nexport interface OSSConfig {\n  accessKeyId: string,\n  accessKeySecret: string,\n  region: string,\n  bucket: string,\n  folder: string,\n}\n\nexport const ossConfig: OSSConfig = {\n  \"accessKeyId\": process.env.REACT_APP_AGORA_OSS_BUCKET_KEY as string,\n  \"accessKeySecret\": process.env.REACT_APP_AGORA_OSS_BUCKET_SECRET as string,\n  \"bucket\": process.env.REACT_APP_AGORA_OSS_BUCKET_NAME as string,\n  \"region\": process.env.REACT_APP_AGORA_OSS_BUCKET_REGION as string,\n  \"folder\": process.env.REACT_APP_AGORA_OSS_BUCKET_FOLDER as string\n}\n\nexport const ossClient = new OSS(ossConfig);\n\nconst OSS_PREFIX = process.env.REACT_APP_AGORA_RECORDING_OSS_URL as string;\n\nexport function getOSSUrl (mediaUrl: string): string {\n  const res = `${OSS_PREFIX}/${mediaUrl}`;\n  console.log(\"resolve: \", res, OSS_PREFIX);\n  return res;\n}\n\nexport const handleRegion = (region: string): number => {\n  switch (region) {\n    case \"CN_Hangzhou\":\n      return 0;\n    case \"oss-cn-hangzhou\":\n      return 0;\n    case \"CN_Shanghai\":\n      return 1;\n    case \"oss-cn-shanghai\":\n      return 1;\n    case \"CN_Qingdao\":\n      return 2;\n    case \"oss-cn-qingdao\":\n      return 2;\n    case \"CN_Beijin\":\n      return 3;\n    case \"oss-cn-beijing\":\n      return 3;\n    case \"CN_Zhangjiakou\":\n      return 4;\n    case \"oss-cn-zhangjiakou\":\n      return 4;\n    case \"CN_Huhehaote\":\n      return 5;\n    case \"oss-cn-huhehaote\":\n      return 5;\n    case \"CN_Shenzhen\":\n      return 6;\n    case \"oss-cn-shenzhen\":\n      return 6;\n    case \"CN_Hongkong\":\n      return 7;\n    case \"oss-cn-hongkong\":\n      return 7;\n    case \"US_West_1\":\n      return 8;\n    case \"oss-us-west-1\":\n      return 8;\n    case \"US_East_1\":\n      return 9;\n    case \"oss-us-east-1\":\n      return 9;\n    case \"AP_Southeast_1\":\n      return 10;\n    case \"oss-ap-southeast-1\":\n      return 10;\n    case \"AP_Southeast_2\":\n      return 11;\n    case \"oss-ap-southeast-2\":\n      return 11;\n    case \"AP_Southeast_3\":\n      return 12;\n    case \"oss-ap-southeast-3\":\n      return 12;\n    case \"AP_Southeast_5\":\n      return 13;\n    case \"oss-ap-southeast-5\":\n      return 13;\n    case \"AP_Northeast_1\":\n      return 14;\n    case \"oss-ap-northeast-1\":\n      return 14;\n    case \"AP_South_1\":\n      return 15;\n    case \"oss-ap-south-1\":\n      return 15;\n    case \"EU_Central_1\":\n      return 16;\n    case \"oss-eu-central-1\":\n      return 16;\n    case \"EU_West_1\":\n      return 17;\n    case \"oss-eu-west-1\":\n      return 17;\n    case \"EU_East_1\":\n      return 18;\n    case \"oss-me-east-1\":\n      return 18;\n    default:\n      return 0;\n  }\n}\n\n// TODO: 用于debug信息 后面会修改\nexport function resolveMessage(peerId: string, { cmd, text }: { cmd: number, text?: string }) {\n  let type = '';\n  switch (cmd) {\n    case RoomMessage.acceptCoVideo:\n      type = 'accept co-video'\n      break;\n    case RoomMessage.rejectCoVideo:\n      type = 'reject co-video'\n      break;\n    case RoomMessage.cancelCoVideo:\n      type = 'cancel co-video'\n      break;\n    case RoomMessage.applyCoVideo:\n      type = 'apply co-video'\n      break;\n    case RoomMessage.muteVideo:\n      type = 'mute video'\n      break;\n    case RoomMessage.muteAudio:\n      type = 'mute audio'\n      break;\n    case RoomMessage.unmuteAudio:\n      type = 'unmute audio'\n      break;\n    case RoomMessage.unmuteVideo:\n      type = 'unmute video'\n      break;\n    default:\n      return console.warn(`[RoomMessage] unknown type, from peerId: ${peerId}`);\n  }\n  console.log(`[RoomMessage] [${type}] from peerId: ${peerId}`)\n}\n\nexport interface UserAttrs {\n  uid: string\n  account: string\n  role: string\n  audio: number\n  video: number\n  chat: number\n  whiteboard_uid?: string\n  link_uid?: number\n  shared_uid?: number\n  mute_chat?: number\n  class_state?: number\n}\n\nexport function resolveMediaState(body: any) {\n  const cmd: number = body.cmd;\n  const mediaState = {\n    key: 'unknown',\n    val: -1,\n  }\n  switch (cmd) {\n    case RoomMessage.muteVideo:\n      mediaState.key = 'video'\n      mediaState.val = 0\n      break\n    case RoomMessage.unmuteVideo:\n      mediaState.key = 'video'\n      mediaState.val = 1\n      break\n    case RoomMessage.muteAudio:\n      mediaState.key = 'audio'\n      mediaState.val = 0\n      break\n    case RoomMessage.unmuteAudio:\n      mediaState.key = 'audio'\n      mediaState.val = 1\n      break\n    case RoomMessage.muteChat:\n      mediaState.key = 'chat'\n      mediaState.val = 0\n      break\n    case RoomMessage.unmuteChat:\n      mediaState.key = 'chat'\n      mediaState.val = 1\n      break\n    default:\n      console.warn(\"[rtm-message] unknown message protocol\");\n  }\n  return mediaState;\n}\n\nexport function genUid(): string {\n  const id = +Date.now() % 1000000;\n  return id.toString();\n}\n\nexport function jsonParse(json: string) {\n  try {\n    return JSON.parse(json);\n  } catch (err) {\n    return {};\n  }\n}\n\nexport function resolvePeerMessage(text: string) {\n  const body = jsonParse(text);\n  return body;\n}\n\nexport const resolveFileInfo = (file: any) => {\n  const fileName = encodeURI(file.name);\n  const fileType = fileName.substring(fileName.length, fileName.lastIndexOf('.'));\n  return {\n    fileName,\n    fileType\n  }\n}\n\nexport function resolveChannelAttrs(json: object) {\n  const teacherJson = jsonParse(_.get(json, 'teacher.value'));\n  const room: any = {\n    class_state: 0,\n    link_uid: 0,\n    shared_uid: 0,\n    mute_chat: 0,\n    whiteboard_uid: 0,\n    lock_board: 0,\n    grant_board: 0,\n  }\n  if (teacherJson) {\n    for (let key of Object.keys(teacherJson)) {\n      if (['class_state', 'link_uid', 'shared_uid', 'mute_chat', 'whiteboard_uid', 'lock_board'].indexOf(key) !== -1\n        && teacherJson[key] !== undefined\n        && teacherJson[key] !== '') {\n        room[key] = teacherJson[key];\n      }\n    }\n  }\n  const students = [];\n  for (let key of Object.keys(json)) {\n    if (key === 'teacher') continue;\n    const student = jsonParse(_.get(json, `${key}.value`));\n    if (student && Object.keys(student).length) {\n      student.uid = key;\n      students.push(student);\n    }\n  }\n  const accounts = [];\n  if (teacherJson && Object.keys(teacherJson).length) {\n    accounts.push({\n      role: 'teacher',\n      account: teacherJson.account,\n      uid: teacherJson.uid,\n      video: +teacherJson.video,\n      audio: +teacherJson.audio,\n      chat: +teacherJson.chat,\n      link_uid: teacherJson.link_uid,\n      shared_uid: teacherJson.shared_uid,\n      whiteboard_uid: teacherJson.whiteboard_uid,\n      lock_board: teacherJson.lock_board,\n      grant_board: +teacherJson.grant_board,\n    });\n  }\n  for (let student of students) {\n    accounts.push({\n      role: 'student',\n      account: student.account,\n      uid: student.uid,\n      video: +student.video,\n      audio: +student.audio,\n      chat: +student.chat,\n      link_uid: student.link_uid,\n      shared_uid: student.shared_uid,\n      whiteboard_uid: student.whiteboard_uid,\n      grant_board: +student.grant_board,\n    });\n  }\n  return {\n    teacher: teacherJson,\n    students: students,\n    accounts,\n    room,\n  };\n}\n\nconst level = [\n  'unknown',\n  'excellent',\n  'good',\n  'poor',\n  'bad',\n  'very bad',\n  'down'\n];\n\nexport function NetworkQualityEvaluation(evt: { downlinkNetworkQuality: number, uplinkNetworkQuality: number }) {\n  let defaultQuality = 'unknown';\n  const val = Math.max(evt.downlinkNetworkQuality, evt.uplinkNetworkQuality);\n  return level[val] ? level[val] : defaultQuality;\n}\n\nexport function btoa(input: any) {\n  let keyStr =\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n  let output = \"\";\n  let chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n  let i = 0;\n\n  while (i < input.length) {\n    chr1 = input[i++];\n    chr2 = i < input.length ? input[i++] : Number.NaN; // Not sure if the index\n    chr3 = i < input.length ? input[i++] : Number.NaN; // checks are needed here\n\n    enc1 = chr1 >> 2;\n    enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n    enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n    enc4 = chr3 & 63;\n\n    if (isNaN(chr2)) {\n      enc3 = enc4 = 64;\n    } else if (isNaN(chr3)) {\n      enc4 = 64;\n    }\n    output +=\n      keyStr.charAt(enc1) +\n      keyStr.charAt(enc2) +\n      keyStr.charAt(enc3) +\n      keyStr.charAt(enc4);\n  }\n  return output;\n}","import AgoraRTM from 'agora-rtm-sdk';\nimport EventEmitter from 'events';\nimport * as _ from 'lodash';\nimport { resolveMessage, jsonParse } from './helper';\n\nexport const APP_ID = process.env.REACT_APP_AGORA_APP_ID as string;\nconst ENABLE_LOG = process.env.REACT_APP_AGORA_LOG === 'true';\nconst logFilter = ENABLE_LOG ? AgoraRTM.LOG_FILTER_DEBUG : AgoraRTM.LOG_FILTER_OFF;\n\nexport enum RoomMessage {\n  muteAudio = 101,\n  unmuteAudio = 102,\n  muteVideo = 103,\n  unmuteVideo = 104,\n  applyCoVideo = 105,\n  acceptCoVideo = 106,\n  rejectCoVideo = 107,\n  cancelCoVideo = 108,\n  muteChat = 109,\n  unmuteChat = 110,\n  muteBoard = 200,\n  unmuteBoard = 201\n}\n\nexport interface ChatBody {\n  account: string\n  content: string\n}\n\nexport interface EntityBody {\n  uid: string\n  account: string\n  resource: string\n  value: number\n}\n\nexport interface MessageBody {\n  cmd: RoomMessage\n  text?: string\n  data?: ChatBody | EntityBody\n}\n\n\nexport default class AgoraRTMClient {\n\n  private _bus: EventEmitter;\n  public _currentChannel: any; // 当前激活的频道\n  public _currentChannelName: string | any; // // 当前激活的频道名字\n  private _channels: any; // 所有频道\n  private _client: any; // 当前的客户端\n  private _channelAttrsKey: string | any; // 当前频道的所有属性\n  public _logged: boolean = false; // 是否登录\n  private _joined: boolean = false; // 是否已经加入频道\n\n  constructor() {\n    this._bus = new EventEmitter();\n    this._channels = {};\n    this._currentChannel = null;\n    this._currentChannelName = null;\n    this._channelAttrsKey = null;\n    this._client = AgoraRTM.createInstance(APP_ID, { enableLogUpload: ENABLE_LOG, logFilter });\n  }\n\n  public removeAllListeners(): any {\n    this._bus.removeAllListeners();\n  }\n\n  destroy(): void {\n    for (let channel of Object.keys(this._channels)) {\n      if (this._channels[channel]) {\n        this._channels[channel].removeAllListeners();\n        this._channels[channel] = null;\n      }\n    }\n    this._currentChannel = null;\n    this._currentChannelName = null;\n    this._client.removeAllListeners();\n  }\n\n  on(evtName: string, cb: (args: any) => void) {\n    this._bus.on(evtName, cb);\n  }\n\n  off(evtName: string, cb: (args: any) => void) {\n    this._bus.off(evtName, cb);\n  }\n\n  async login(uid: string, token?: string) {\n    await this._client.login({ uid, token });\n    this._client.on(\"ConnectionStateChanged\", (newState: string, reason: string) => {\n      // 通知 客户端 与 Agora RTM 系统的连接状态发生了改变。\n      this._bus.emit(\"ConnectionStateChanged\", { newState, reason });\n    });\n    \n    this._logged = true;\n    return\n  }\n\n  async logout() {\n    if (!this._logged) return;\n    await this._client.logout();\n    this.destroy();\n    this._logged = false;\n    return;\n  }\n\n  async join(channel: string) {\n    const _channel = this._client.createChannel(channel);\n    this._channels[channel] = _channel;\n    this._currentChannel = this._channels[channel];\n    this._currentChannelName = channel;\n    await _channel.join();\n    _channel.on('ChannelMessage', (message: string, memberId: string) => {\n      // 收到频道消息的事件通知。\n      this._bus.emit('ChannelMessage', { message, memberId });\n    });\n\n    _channel.on('MemberJoined', (memberId: string) => {\n      // 收到用户加入频道的通知。\n      this._bus.emit('MemberJoined', memberId);\n    });\n\n    _channel.on('MemberLeft', (memberId: string) => {\n      // 收到用户离开频道的通知。\n      this._bus.emit('MemberLeft', memberId);\n    });\n\n    _channel.on('MemberCountUpdated', (count: number) => {\n      // 频道成员人数更新回调。返回最新频道成员人数。\n      // 频道成员人数超过 512 时，最高触发频率为每 3 秒 1 次。\n      // 用户在成功加入频道时会收到该回调。你可以通过监听该回调获取加入频道时的频道成员人数和后继人数更新。\n      this._bus.emit('MemberCountUpdated', count);\n    })\n\n    _channel.on('AttributesUpdated', (attributes: any) => {\n      // 频道属性更新回调。返回所在频道的所有属性。\n      this._bus.emit('AttributesUpdated', attributes);\n    });\n    this._joined = true;\n    return;\n  }\n\n  destroyChannel(channel: string) {\n    if (this._channels[channel]) {\n      this._channels[channel].removeAllListeners();\n      this._channels[channel] = null;\n    }\n  }\n\n  async leave(channel: string) {\n    if (this._channels[channel]) {\n      await this._channels[channel].leave();\n      this._joined = false;\n      this.destroyChannel(channel);\n    }\n  }\n\n  async exit() {\n    await this.deleteChannelAttributesByKey();\n    await this.leave(this._currentChannelName);\n    await this.logout();\n  }\n\n\n\n  // 添加或更新某指定频道的属性。\n  async updateChannelAttrsByKey(key: string, attrs: any) {\n    this._channelAttrsKey = key;\n    const channelAttributes: { [key: string]: string } = {}\n    if (key) {\n      channelAttributes[key] = JSON.stringify(attrs);\n    }\n\n    console.log(\"[rtm-client] updateChannelAttrsByKey \", attrs, \" key \", key, channelAttributes);\n\n    // 如果属性已存在，该方法更新该频道的已有属性；\n    // 如果属性不存在，该方法增加该频道的属性。\n    // setLocalUserAttributes 、 addOrUpdateChannelAttributes 、 deleteChannelAttributesByKeys ，和 clearChannelAttributes 一并计算在内：调用频率限制为每 5 秒 10 次。\n    // (channelId: string, attributes: AttributesMap, options?: ChannelAttributeOptions)\n    await this._client.addOrUpdateChannelAttributes(\n      this._currentChannelName,\n      channelAttributes,\n      { enableNotificationToChannelMembers: true });\n  }\n\n  // 删除指定频道的uid属性。\n  async deleteChannelAttributesWith(uid: string) {\n    // (channelId: string, attributeKeys: string[], options?: ChannelAttributeOptions):\n    await this._client.deleteChannelAttributesByKeys(\n      this._currentChannelName,\n      [uid],\n      { enableNotificationToChannelMembers: true }\n    );\n  }\n\n  // 删除指定频道的更新属性。\n  async deleteChannelAttributesByKey() {\n    if (!this._channelAttrsKey) return;\n    await this._client.deleteChannelAttributesByKeys(\n      this._currentChannelName,\n      [this._channelAttrsKey],\n      { enableNotificationToChannelMembers: true }\n    );\n    this._channelAttrsKey = null;\n    return;\n  }\n\n  // 查询单个或多个频道的成员人数。\n  async getChannelMemberCount(ids: string[]) {\n    // 该方法的调用频率上限为每秒 1 次。\n    // 不支持一次查询超过 32 个频道的成员人数。\n    return this._client.getChannelMemberCount(ids);\n  }\n\n  // 查询指定用户的在线状态。\n  async queryOnlineStatusBy(accounts: any[]) {\n    let results: any = {};\n    if (accounts.length > 0) {\n      const ids = accounts.map((it: any) => `${it.uid}`);\n      results = await this._client.queryPeersOnlineStatus(ids); // 返回用户 ID 列表。\n      if (results && Object.keys(results).length) {\n        const teacher = accounts.find((it: any) => it.role === 'teacher');\n        if (teacher && results[teacher.uid]) {\n          results.teacher = results[teacher.uid];\n          results.teacherCount = 1;\n        }\n        results.totalCount = accounts.filter((it: any) => results[it.uid]).length;\n      } else {\n        console.warn(`accounts: ${ids}, cannot get peers online status from [queryPeersOnlineStatus]`);\n      }\n    }\n    return results;\n  }\n\n  //  查询某指定频道的全部属性\n  async getChannelAttributeBy(channelName: string) {\n    // 查询某指定频道的全部属性。 调用频率限制为每 5 秒 10 次。\n    let json = await this._client.getChannelAttributes(channelName);\n    const accounts = [];\n    for (let key of Object.keys(json)) {\n      if (key === 'teacher') {\n        const teacherObj = jsonParse(_.get(json, `${key}.value`));\n        console.log(\"teacherObj \", teacherObj);\n        // when teacher is not empty object\n        if (teacherObj && Object.keys(teacherObj).length) {\n          accounts.push({ role: 'teacher', ...teacherObj });\n        }\n        continue;\n      }\n      const student = jsonParse(_.get(json, `${key}.value`));\n      // when student is not empty object\n      if (student && Object.keys(student).length) {\n        student.uid = key;\n        accounts.push(student);\n      }\n    }\n    return accounts;\n  }\n\n  \n  /**\n   * 广播所有者\n   * (重要) 发送频道消息，所有加入频道的用户都会收到该频道消息。\n   * \n   * 发送消息（包括点对点消息和频道消息）的频率上限为 60 qps。\n   * @param body \n   */\n  async sendChannelMessage(body: string) {\n    console.log('发送文本消息', body)\n    return this._currentChannel.sendMessage({ text: body }, { enableHistoricalMessaging: true });\n  }\n\n  \n  /**\n   * 点对点 广播\n   * (重要)本地用户（发送者）向指���用户（接收者）发送点对点消息或点对点的离线消息。\n   * \n   * 发送消息（包括点对点消息和频道消息）的频率上限为 60 qps。\n   * @param peerId \n   * @param body \n   */\n  async sendPeerMessage(peerId: string, body: MessageBody) {\n    resolveMessage(peerId, body);\n    console.log(\"[rtm-client] send peer message \", peerId, JSON.stringify(body));\n    // (message: RtmMessage, peerId: string, options?: SendMessageOptions)\n    // RtmMessage => https://docs.agora.io/cn/Real-time-Messaging/API%20Reference/RTM_web/interfaces/rtmtextmessage.html\n    // 可以是文本数据，也可以是二进制\n    let result = await this._client.sendMessageToPeer({ text: JSON.stringify(body) }, peerId, { enableHistoricalMessaging: true });\n    return result.hasPeerReceived;\n  }\n}","/**\n * https://docs.agora.io/cn/Voice/API%20Reference/web/index.html\n * \n * 声网的rtc分为\n *  1. AgoraRTC  Agora Web SDK 中所有可调用方法的入口\n *      可用于创建客户端 (Client) 和音视频流 (Stream) 对象\n *      还可以检查浏览器兼容性和设置日志上传。\n *  2. Client 接口提供音视频通话的核心功能，例如加入频道、发布和订阅音视频流等。\n *  3. Stream 接口提供的方法用于定义音视频流对象的行为，例如流的播放控制、音视频的编码配置等。\n *      一个 Stream 对象指通话中发布的【本地音视频流】 或 订阅的【远端音视频流】。\n *  4. error-codes https://docs.agora.io/cn/Voice/API%20Reference/web/index.html#error-codes\n *  5. warning-codes https://docs.agora.io/cn/Voice/API%20Reference/web/index.html#warning-codes\n */\nimport { RoomStore } from './../stores/room';\n\nimport EventEmitter from 'events';\nimport AgoraRTC from 'agora-rtc-sdk';\n\nif (process.env.REACT_APP_AGORA_LOG !== 'true') {\n  AgoraRTC.Logger.setLogLevel(AgoraRTC.Logger.NONE);\n}\n\n// spec 参数接口 https://docs.agora.io/cn/Voice/API%20Reference/web/interfaces/agorartc.streamspec.html\nexport interface AgoraStreamSpec {\n  streamID: number // (重要)音视频流 ID 请将音视频流 ID 设置为与 uid 相同，可通过 Client.join 方法的回调获取。\n  video: boolean // 指定该音视频流是否包含视频资源\n  audio: boolean // 指定该音视频流是否包含音频资源\n  mirror?: boolean // 指定本地视频流在本地显示的时候是否要做镜像翻转（不适用于屏幕共享）\n  screen?: boolean // 指定该音视频流是否包含屏幕共享功能 (https://docs.agora.io/cn/Video/screensharing_web?platform=Web)\n  screenAudio?: boolean // 指定该音视频流是否包含屏幕共享背景音功能 将 screen 也设为 true，同时我们建议将 audio 设为 false\n  microphoneId?: string // 通过 getDevices 方法获取的麦克风设备 ID 获取的 ID 为 ASCII 字符，字符串长度大于等于 0 小于 256 字节\n  cameraId?: string // Chrome 插件 ID如果 Chrome 72 及以后的版本支持无插件屏幕共享\n  audioOutput?: {\n    volume: number // 看上去是垃圾代码\n    deviceId: string\n  }\n}\n\n// stream的事件\nconst streamEvents: string[] = [\n  \"accessAllowed\", // 该回调通知 App 已获取本地摄像头／麦克风使用权限。\n  \"accessDenied\", // 该回调通知 App 已禁止本地摄像头／麦克风使用权限。\n  \"stopScreenSharing\", // 该回调通知 App 屏幕共享已停止。\n  \"videoTrackEnded\", // 该回调通知视频轨道已停止。停止的原因可能是设备拔出、取消授权等\n  \"audioTrackEnded\", // 该回调通知音频轨道已停止。\n  \"player-status-changed\" // (重要)该回调通知音视频播放状态变化。 https://docs.agora.io/cn/Voice/API%20Reference/web/interfaces/agorartc.stream.html#on\n];\n\n// client 事件\nconst clientEvents: string[] = [\n  'stream-published', // 该回调通知 App 本地音视频流已发布。\n  'stream-added', // 该回调通知 App 远端音视频流已添加。\n  'stream-removed', // 该回调通知 App 已删除远端音视频流，即对方调用了 Client.unpublish\n  'stream-subscribed', // 该回调通知 App 已接收远端音视频流。\n  'peer-online', // (重要) 该回调提示有远端用户/主播加入频道。 https://docs.agora.io/cn/Voice/API%20Reference/web/interfaces/agorartc.client.html#on\n  'peer-leave', // (重要) 该回调通知 App 有远端用户离线。\n  'error', // 该回调通知 app 有错误信息，需要进行处理，可能的错误如下：为 \"SOCKET_DISCONNECTED\" 表示此时 SDK 和 Agora 服务器的连接因为网络原因断开了，SDK 会自动尝试重连\n  'network-type-changed', // 该回调通知 App 网络类型发生改变。\n  'network-quality', // 该回调报告本地用户的上下行网络质量。该回调每 2 秒触发，向 App 报告本地用户当前的上行和下行网络质量。\n  'exception', // (重要) 该回调通知 App 频道内的异常事件。\n  'onTokenPrivilegeWillExpire', // (重要) TODO:需要自己实现后面的逻辑 在 Token 过期前 30 秒，会收到该事件通知。\n  'onTokenPrivilegeDidExpire', // (重要) 在 Token 过期后，会收到该事件通知。 在收到该消息之后，应向服务端重新申请 Token，并调用 Client.renewToken 方法。\n]\n\nexport const APP_ID = process.env.REACT_APP_AGORA_APP_ID as string;\nexport const APP_TOKEN = process.env.REACT_APP_AGORA_APP_TOKEN as string;\nexport const ENABLE_LOG = process.env.REACT_APP_AGORA_LOG as string === \"true\";\nexport const SHARE_ID = 7;\n\nclass AgoraRTCClient {\n\n  private streamID: any;\n  public _init: boolean = false;\n  public _joined: boolean = false;\n  public _published: boolean = false;\n  private _internalTimer: NodeJS.Timeout | any;\n  public _client: any = AgoraRTC.createClient({mode: 'live', codec: 'vp8'});\n  public _bus: EventEmitter = new EventEmitter();\n  public _localStream: any = null;\n  public _streamEvents: string[];\n  public _clientEvents: string[];\n\n  constructor () {\n    this.streamID = null;\n    this._streamEvents = [];\n    this._clientEvents = [];\n  }\n\n  // init rtc client when _init flag is false;\n  public async initClient(appId: string) {\n    if (this._init) return;\n    let prepareInit = new Promise((resolve, reject) => {\n      this._init === false && this._client.init(appId, () => {\n        this._init = true;\n        resolve()\n      }, reject);\n    })\n    await prepareInit;\n  }\n\n  // create rtc client;\n  public async createClient(appId: string, enableRtt?: boolean) {\n    await this.initClient(appId);\n    this.subscribeClientEvents();\n    if (enableRtt) {\n      this._internalTimer = setInterval(() => {\n        this._client.getTransportStats((stats: any) => {\n          const RTT = stats.RTT ? stats.RTT : 0;\n          this._bus.emit('watch-rtt', RTT);\n        });\n      }, 100);\n    }\n  }\n\n  destroyClient(): void {\n    this.unsubscribeClientEvents();\n  }\n\n  // Client的event订阅\n  subscribeClientEvents() {\n    for (let evtName of clientEvents) {\n      this._clientEvents.push(evtName);\n      this._client.on(evtName, (args: any) => {\n        if (evtName === \"peer-leave\") {\n          console.log(\"[agora-web] peer-leave: \", args);\n        }\n        if(evtName === \"stream-published\"){\n          this._published = true;\n        }\n        this._bus.emit(evtName, args);\n      });\n    }\n  }\n\n  unsubscribeClientEvents() {\n    for (let evtName of this._clientEvents) {\n      this._client.off(evtName, () => {});\n      this._clientEvents = this._clientEvents.filter((it: any) => it === evtName);\n    }\n  }\n\n  // Stream的event订阅\n  subscribeLocalStreamEvents() {\n    for (let evtName of streamEvents) {\n      this._streamEvents.push(evtName);\n      this._localStream.on(evtName, (args: any) => {\n        this._bus.emit(evtName, args);\n      });\n    }\n  }\n\n  unsubscribeLocalStreamEvents() {\n    if (this._localStream) {\n      for (let evtName of this._streamEvents) {\n        this._localStream.removeEventListener(evtName, (args: any[]) => {});\n        this._streamEvents = this._streamEvents.filter((it: any) => it === evtName);\n      }\n    }\n  }\n\n  // 重新获取token\n  renewToken(newToken: string) {\n    if (!this._client) return console.warn('renewToken is not permitted, checkout your instance');\n    this._client.renewToken(newToken);\n  }\n\n  removeAllListeners() {\n    this.unsubscribeClientEvents();\n    this._bus.removeAllListeners();\n  }\n\n  // subscribe\n  on(evtName: string, cb: (args: any) => void) {\n    this._bus.on(evtName, cb);\n  }\n\n  // unsubscribe\n  off(evtName: string, cb: (args: any) => void) {\n    this._bus.off(evtName, cb);\n  }\n\n  // 发布本地音视频流\n  async publish() {\n    return new Promise((resolve, reject) => {\n      if (this._published) {\n        return resolve();\n      }\n      // 发布本地音视频流\n      this._client.publish(this._localStream, (err: any) => {\n        reject(err);\n      })\n      setTimeout(() => {\n        resolve();\n        this._published = true;\n      }, 300);\n    })\n  }\n\n  async unpublish() {\n    return new Promise((resolve, reject) => {\n      if (!this._published || !this._localStream) {\n        return resolve();\n      }\n      this._client.unpublish(this._localStream, (err: any) => {\n        reject(err);\n      })\n      setTimeout(() => {\n        resolve();\n        this.destroyLocalStream();\n        this._published = false;\n      }, 300);\n    })\n  }\n\n  /**\n   * 设置视频大小流\n   * @param stream \n   * @param streamType 0: 高分辨率、高码率的视频大流 1: 低分辨率、低码率的视频小流\n   */\n  setRemoteVideoStreamType(stream: any, streamType: number) {\n    this._client.setRemoteVideoStreamType(stream, streamType);\n  }\n  \n  /**\n   * 开启双流模式\n   * 该方法在 Publish 端，即发送端，开启双流模式。该方法建议在加入频道（Client.join）后调用。\n   * https://docs.agora.io/cn/Voice/API%20Reference/web/interfaces/agorartc.client.html#enabledualstream\n   */\n  async enableDualStream() {\n    return new Promise((resolve, reject) => {\n      this._client.enableDualStream(resolve, reject);\n    });\n  }\n\n  createLocalStream(data: AgoraStreamSpec): Promise<any> {\n    // 创建本地流无镜像模式\n    this._localStream = AgoraRTC.createStream({...data, mirror: false});\n    return new Promise((resolve, reject) => {\n      this._localStream.init(() => {\n        this.streamID = data.streamID;\n        this.subscribeLocalStreamEvents();\n        if (data.audioOutput && data.audioOutput.deviceId) {\n          //  设置音频输出\n          this.setAudioOutput(data.audioOutput.deviceId).then(() => {\n            resolve();\n          }).catch((err: any) => {\n            reject(err);\n          })\n        }\n        resolve();\n      }, (err: any) => {\n        reject(err);\n      })\n    });\n  }\n\n  destroyLocalStream () {\n    this.unsubscribeLocalStreamEvents();\n    if(this._localStream) {\n      if (this._localStream.isPlaying()) {\n        this._localStream.stop();\n      }\n      this._localStream.close();\n    }\n    this._localStream = null;\n    this.streamID = 0;\n  }\n\n  async join (uid: number, channel: string, token?: string) {\n    return new Promise((resolve, reject) => {\n      this._client.join(token, channel, +uid, resolve, reject);\n    })\n  }\n\n  async leave () {\n    if (this._client) {\n      return new Promise((resolve, reject) => {\n        this._client.leave(resolve, reject);\n      })\n    }\n  }\n\n  /**\n   * 设置音频输出\n   * 目前只有 Chrome 49 以上的浏览器支持该方法。\n   * @param speakerId \n   */\n  setAudioOutput(speakerId: string) {\n    return new Promise((resolve, reject) => {\n      // (deviceId: string, onSuccess?: function, onFailure?: function)\n      this._client.setAudioOutput(speakerId, resolve, reject);\n    })\n  }\n\n  // 调节音量大小\n  setAudioVolume(volume: number) {\n    // 音量，范围为 0（静音） 到 100（声音最大）。\n    this._client.setAudioVolume(volume);\n  }\n\n  subscribe(stream: any) {\n    // 订阅远端音视频流\n    // 订阅远端音视频流之后，本地会触发 Client.on(\"stream-subscribed\") 回调。 \n    // 如果订阅流中包含音频，还会触发 Client.on(\"first-audio-frame-decode\") 回调；\n    // 如果订阅流中包含视频，还会触发 Client.on(\"first-video-frame-decode\") 回调。\n    this._client.subscribe(stream, {video: true, audio: true}, (err: any) => {\n      console.log('[rtc-client] subscribe failed: ', JSON.stringify(err));\n    });\n  }\n\n  destroy (): void {\n    this._internalTimer && clearInterval(this._internalTimer);\n    this._internalTimer = null;\n    this.destroyLocalStream();\n  }\n\n  async exit () {\n    await this.leave();\n    await this.destroy();\n  }\n\n  getDevices (): Promise<Device[]> {\n    return new Promise((resolve, reject) => {\n      AgoraRTC.getDevices((devices: any) => {\n        const _devices: any[] = [];\n        devices.forEach((item: any) => {\n          _devices.push({deviceId: item.deviceId, kind: item.kind, label: item.label});\n        })\n        resolve(_devices);\n      }, (err: any) => {\n        reject(err);\n      });\n    })\n  }\n}\n\nexport default class AgoraWebClient {\n\n  public readonly rtc: AgoraRTCClient;\n  public shareClient: AgoraRTCClient;\n  public localUid: number;\n  public channel: string;\n  public readonly bus: EventEmitter;\n  public shared: boolean;\n  public joined: boolean;\n  public published: boolean;\n  public tmpStream: any;\n\n  private roomStore: RoomStore;\n\n  constructor(deps: {roomStore: RoomStore}) {\n    this.localUid = 0;\n    this.channel = '';\n    this.rtc = new AgoraRTCClient();\n    this.bus = new EventEmitter();\n    this.shared = false;\n    this.shareClient = null;\n    this.tmpStream = null;\n    this.joined = false; // 是否加入\n    this.published = false; // 是否发布\n    \n    this.roomStore = deps.roomStore;\n  }\n\n  async getDevices () {\n    const client = new AgoraRTCClient();\n    await client.initClient(APP_ID);\n    await client.createLocalStream({\n      streamID: 0,\n      audio: true,\n      video: true,\n      microphoneId: '',\n      cameraId: ''\n    });\n    setTimeout(() => {\n      client.destroyLocalStream();\n    }, 80);\n    return client.getDevices();\n  }\n\n  async joinChannel(data: {\n    uid: number,\n    channel: string,\n    dual: boolean,\n    token: string\n  }) {\n    const {\n      uid, channel, dual, token\n    } = data\n    console.log('[rtc users joinChannel]', data)\n    this.localUid = uid;\n    this.channel = channel;\n    await this.rtc.createClient(APP_ID, true);\n    await this.rtc.join(this.localUid, channel, token);\n    dual && await this.rtc.enableDualStream(); // 开启双流模式\n    this.joined = true;\n    this.roomStore.setRTCJoined(true);\n  }\n\n  async leaveChannel() {\n    this.localUid = 0;\n    this.channel = '';\n    await this.unpublishLocalStream();\n    await this.rtc.leave();\n    this.rtc.destroy();\n    this.rtc.destroyClient();\n    this.joined = false;\n    this.roomStore.setRTCJoined(false);\n  }\n\n  async enableDualStream() {\n    return this.rtc.enableDualStream();\n  }\n\n  async publishLocalStream(data: AgoraStreamSpec) {\n    console.log(\" publish local stream \", this.published);\n    if (this.published) {\n      await this.unpublishLocalStream();\n      console.log(\"[agora-web] unpublished\", this.published);\n    }\n    await this.rtc.createLocalStream(data);\n    await this.rtc.publish();\n    this.published = true;\n  }\n\n  async unpublishLocalStream() {\n    console.log(\"[agora-web] invoke unpublishStream\");\n    await this.rtc.unpublish();\n    this.published = false;\n  }\n\n  // 启动屏幕共享\n  async startScreenShare (token: string) {\n    this.shareClient = new AgoraRTCClient();\n    await this.shareClient.createLocalStream({\n      video: false,\n      audio: false,\n      screen: true,\n      screenAudio: true,\n      streamID: SHARE_ID,\n      microphoneId: '',\n      cameraId: ''\n    })\n    await this.shareClient.createClient(APP_ID);\n    await this.shareClient.join(SHARE_ID, this.channel, token);\n    await this.shareClient.publish();\n    this.shared = true;\n  }\n\n  async stopScreenShare () {\n    await this.shareClient.unpublish();\n    await this.shareClient.leave();\n    await this.shareClient.destroy();\n    await this.shareClient.destroyClient();\n    this.roomStore.removeLocalSharedStream();\n    this.shared = false;\n  }\n\n  async exit () {\n    await this.leaveChannel();\n    if (this.shared === true) {\n      await this.shareClient.unpublish();\n      await this.shareClient.leave();\n    }\n    if (this.shareClient) {\n      await this.shareClient.destroy();\n      await this.shareClient.destroyClient();\n    }\n  }\n\n  // 创建预览的功能\n  async createPreviewStream({cameraId, microphoneId}: Partial<AgoraStreamSpec>) {\n    const tmpStream = AgoraRTC.createStream({\n      video: true,\n      audio: true,\n      screen: false,\n      cameraId,\n      microphoneId\n    });\n\n    if (this.tmpStream) {\n      this.tmpStream.isPlaying() && this.tmpStream.stop();\n      this.tmpStream.close();\n    }\n\n    return new Promise((resolve, reject) => {\n      tmpStream.init(() => {\n        this.tmpStream = tmpStream;\n        resolve(tmpStream);\n      }, (err: any) => {\n        reject(err);\n      })\n    });\n  }\n\n  subscribe(stream: any) {\n    this.rtc.subscribe(stream);\n  }\n\n  // 设置视频大小流\n  setRemoteVideoStreamType(stream: any, type: number) {\n    this.rtc.setRemoteVideoStreamType(stream, type);\n  }\n}","import { isEmpty } from \"lodash\";\n\nexport class CustomStorage {\n\n  private storage: Storage;\n\n  constructor() {\n    this.storage = window.sessionStorage;\n  }\n\n  read(key: string): any {\n    try {\n      let json = JSON.parse(this.storage.getItem(key) as string);\n      return json\n    } catch(_) {\n      return this.storage.getItem(key);\n    }\n  }\n\n  save(key: string, val: any) {\n    this.storage.setItem(key, JSON.stringify(val));\n  }\n\n  clear(key: string) {\n    this.storage.removeItem(key);\n  }\n\n  getLanguage() {\n    // const language = this.read('language') ? this.read('language') : navigator.language;\n    return {language:\"zh-CN\"};\n  }\n\n  getRtmMessage (): {count: any, messages: any[]} {\n    const channelMessages = GlobalStorage.read('channelMessages');\n    if (isEmpty(channelMessages)) return {\n      count: 0,\n      messages: []\n    }\n    const messages = channelMessages.filter((it: any) => it.message_type === \"group_message\");\n    const chatMessages = messages.reduce((collect: any[], value: any) => {\n      const payload = value.payload;\n      const json = JSON.parse(payload);\n      if (json.content) {\n        return collect.concat({\n          account: json.account,\n          content: json.content,\n          ms: value.ms,\n          src: value.src\n        });\n      }\n      return collect;\n    }, []);\n    return {\n      messages: chatMessages,\n      count: chatMessages.length\n    }\n  }\n}\n\nconst GlobalStorage = new CustomStorage();\n// @ts-ignore\nwindow.GlobalStorage = GlobalStorage;\nexport default GlobalStorage;","import { Subject } from 'rxjs';\nimport GlobalStorage from '../utils/custom-storage';\n\n\nexport type GlobalState = {\n  loading: boolean\n  toast: {\n    type: string\n    message: string\n  }\n  dialog: {\n    type: string\n    message: string\n    confirmText?: string\n    cancelText?: string\n  }\n  uploadNotice: {\n    type: string\n    title: string\n  },\n  notice: {\n    text: string\n    reason: string\n  },\n  nativeWindowInfo: {\n    visible: boolean\n    items: any[]\n  },\n  active: string,\n  language: string,\n  newMessageCount: number,\n  liveHouseName: string,\n  liveId: string,\n  createId: string,\n}\n\nexport class Root {\n  private subject: Subject<GlobalState> | null;\n  public state: GlobalState;\n  public readonly defaultState: GlobalState = {\n    loading: false,\n    toast: {\n      type: '',\n      message: '',\n    },\n    dialog: {\n      type: '',\n      message: '',\n      confirmText: 'confirm',\n      cancelText: 'cancel'\n    },\n    uploadNotice: {\n      type: '',\n      title: '',\n    },\n    notice: {\n      reason: '',\n      text: '',\n    },\n    nativeWindowInfo: {\n      visible: false,\n      items: []\n    },\n    active: 'liveData',\n    language: 'zh-CN',\n    newMessageCount: 0,\n    liveHouseName: '',\n    liveId: \"\",\n    createId: \"\",\n    ...GlobalStorage.getLanguage(),\n  }\n\n  constructor() {\n    this.subject = null;\n    this.state = this.defaultState;\n  }\n\n  initialize() {\n    this.subject = new Subject<GlobalState>();\n    this.state = {\n      ...this.defaultState,\n    }\n    this.subject.next(this.state);\n  }\n\n  subscribe(updateState: any) {\n    this.initialize();\n    this.subject && this.subject.subscribe(updateState);\n  }\n\n  unsubscribe() {\n    this.subject && this.subject.unsubscribe();\n    this.subject = null;\n  }\n\n  commit(state: GlobalState) {\n    this.subject && this.subject.next(state);\n  }\n\n  updateState(rootState: GlobalState) {\n    this.state = {\n      ...this.state,\n      ...rootState,\n    }\n    this.commit(this.state);\n  }\n\n  showNotice({\n    reason,\n    text,\n  }: {\n    reason: string,\n    text: string\n  }) {\n    this.state = {\n      ...this.state,\n      notice: {\n        text,\n        reason\n      }\n    }\n    this.commit(this.state);\n  }\n\n  removeNotice() {\n    this.state = {\n      ...this.state,\n      notice: {\n        text: '',\n        reason: ''\n      }\n    }\n    this.commit(this.state);\n  }\n\n  setNativeWindowInfo({ visible, items }: { visible: boolean, items: any[] }) {\n    this.state = {\n      ...this.state,\n      nativeWindowInfo: {\n        visible,\n        items\n      }\n    }\n    this.commit(this.state);\n  }\n\n  setliveId(liveId: string) {\n    this.state = {\n      ...this.state,\n      liveId\n    }\n    this.commit(this.state);\n  }\n\n  setliveHouseName(liveHouseName: string) {\n    this.state = {\n      ...this.state,\n      liveHouseName\n    }\n    this.commit(this.state);\n  }\n\n  setCreateId(createId: string) {\n    this.state = {\n      ...this.state,\n      createId\n    }\n    this.commit(this.state);\n  }\n\n  showUploadNotice({ type, title }: { type: string, title: string }) {\n    this.state = {\n      ...this.state,\n      uploadNotice: {\n        type,\n        title\n      }\n    }\n    this.commit(this.state);\n  }\n\n  removeUploadNotice() {\n    this.state = {\n      ...this.state,\n      uploadNotice: {\n        type: '',\n        title: ''\n      }\n    }\n    this.commit(this.state);\n  }\n\n  showToast({ type, message }: { type: string, message: string }) {\n    this.state = {\n      ...this.state,\n      toast: {\n        type, message\n      },\n    }\n    this.commit(this.state);\n  }\n\n  showDialog({ type, message }: { type: string, message: string }) {\n    this.state = {\n      ...this.state,\n      dialog: {\n        type,\n        message\n      },\n    }\n    this.commit(this.state);\n  }\n\n  removeDialog() {\n    this.state = {\n      ...this.state,\n      dialog: {\n        type: '',\n        message: ''\n      },\n    }\n    this.commit(this.state);\n  }\n\n  showLoading() {\n    this.state = {\n      ...this.state,\n      loading: true\n    }\n    this.commit(this.state);\n  }\n\n  stopLoading() {\n    this.state = {\n      ...this.state,\n      loading: false\n    }\n    this.commit(this.state);\n  }\n\n  setLanguage(language: string) {\n    this.state = {\n      ...this.state,\n      language,\n    }\n    this.commit(this.state);\n    GlobalStorage.save('edu_language', this.state.language);\n    window.location.reload();\n  }\n\n  setActive(active: string) {\n    if (active !== 'chatroom') {\n      this.state = {\n        ...this.state,\n        active,\n      }\n    } else {\n      this.state = {\n        ...this.state,\n        active,\n        newMessageCount: 0,\n      }\n    }\n    this.commit(this.state);\n  }\n\n  setMessageCount(len: number) {\n    this.state = {\n      ...this.state,\n      newMessageCount: len\n    }\n    this.commit(this.state);\n  }\n}\n\nexport const globalStore = new Root();\nwindow.globalStore = globalStore","import { globalStore } from './../stores/global';\nimport {get, isEmpty} from 'lodash';\n\nconst BUILD_VERSION = process.env.REACT_APP_BUILD_VERSION as string;\nconst build_version = BUILD_VERSION ? BUILD_VERSION : '0.0.1';\n\nconst zhCN: any = {\n  'whiteboard': {\n    'loading': '加载中...',\n  },\n  'toast': {\n    'api_login_failured': '房间加入失败, 原因: {reason}',\n    'confirm': '确定',\n    'cancel': '取消',\n    'quit_room': '确定退出课程吗？',\n    'kick': '其他端登录，被踢出房间',\n    'login_failure': '登录房间失败',\n    'whiteboard_lock': '设置白板跟随',\n    'whiteboard_unlock': '取消白板跟随',\n    'canceled_screen_share': '已取消屏幕共享',\n    'screen_sharing_failed': '屏幕分享失败, 原因：{reason}',\n    'recording_failed': '开启云录制失败, 原因：{reason}',\n    'start_recording': '开始云录制',\n    'stop_recording': '结束云录制',\n    'recording_too_short': '录制太短，至少15秒',\n    'rtm_login_failed': '房间登录失败, 请检查网络设置',\n    'rtm_login_failed_reason': '房间登录失败, 原因： {reason}',\n    'replay_failed': '回放失败，请刷新页面重试',\n    'teacher_exists': '该房间老师已存在，请等待30秒或重新创建教室',\n    'student_over_limit': '超出学生最大人数，请等待30秒或重新创建教室',\n    'teacher_and_student_over_limit': '超出学生和老师的最大人数',\n    'teacher_accept_whiteboard': '老师已授权了你白板的权限',\n    'teacher_cancel_whiteboard': '老师已收回了你白板的权限',\n    'teacher_accept_co_video': '老师已允许连麦',\n    'teacher_reject_co_video': '老师已拒绝连麦',\n    'teacher_cancel_co_video': '老师已取消连麦',\n    'student_cancel_co_video': '学生已取消连麦',\n  },\n  'notice': {\n    'student_interactive_apply': `\"{reason}\"想和你连麦`\n  },\n  'chat': {\n    'placeholder': '说点什么',\n    'banned': '禁言中',\n    'send': '发送'\n  },\n  'device': {\n    'camera': '摄像头',\n    'microphone': '麦克风',\n    'speaker': '扬声器',\n    'finish': '完成',\n  },\n  'nav': {\n    'delay': '延迟: ',\n    'network': '网络: ',\n    'cpu': 'CPU: ',\n    'class_end': '暂停上课',\n    'class_start': '开始上课',\n    'record_start':'开始录制',\n    'record_end':'结束录制',\n  },\n  'home': {\n    'entry-home': '进入教室',\n    'teacher': '老师',\n    'student': '学生',\n    'cover_class': 'cover-cn',\n    'room_name': '房间名',\n    'nickname': '昵称',\n    'room_type': '房间类型',\n    'room_join': '加入房间',\n    'short_title': {\n      'title': '声网在线教育解决方案',\n      'subtitle': '由声网提供',\n    },\n    'name_too_long': '名字过长，不得超过20个字符',\n    '1v1': '一对一',\n    'mini_class': '小班课',\n    'large_class': '大班课',\n    'missing_room_name': '缺少房间名',\n    'missing_your_name': '缺少昵称',\n    'missing_password': '缺少房间密码',\n    'missing_role': '\b缺少角色',\n    'account': '姓名',\n    'password': '密码',\n  },\n  'room': {\n    'chat_room': '消息列表',\n    'student_list': '学生列表',\n    'uploading': '上传中...',\n    'converting': '转换中...',\n    'upload_success': '上传成功',\n    'upload_failure': '上传失败，请检查网络',\n    'convert_success': '转换成功',\n    'convert_failure': '转换失败，请检查网络',\n  },\n  'replay': {\n    'loading': '加载中...',\n  },\n  'build_version': `构建版本: ${build_version}`,\n}\n\nconst en = {\n  'whiteboard': {\n    'loading': 'Loading...',\n  },\n  'toast': {\n    'api_login_failured': 'Join Failured, Reason: {reason}',\n    'confirm': 'Confirm',\n    'cancel': 'Cancel',\n    'quit_room': 'Are U sure to exit the classroom?',\n    'kick': 'kicked',\n    'login_failure': 'login failure',\n    'whiteboard_lock': 'Whiteboard follow',\n    'whiteboard_unlock': 'Whiteboard nofollow',\n    'canceled_screen_share': 'Canceled screen sharing',\n    'screen_sharing_failed': 'Screen sharing failed, reason: {reason}',\n    'recording_failed': 'Start cloud recording failed, reason: {reason}',\n    'start_recording': 'Start cloud recording success',\n    'stop_recording': 'Stop cloud recording success',\n    'recording_too_short': 'Recording too short, at least 15 seconds',\n    'rtm_login_failed': 'login failure, please checkout ur network',\n    'rtm_login_failed_reason': 'login failure, reason: {reason}',\n    'replay_failed': 'Replay Failed please refresh browser',\n    'teacher_exists': 'Teacher already exists, Please waiting for 30s or reopen new class',\n    'student_over_limit': 'Student have reached upper limit, , Please waiting for 30s or rejoin new class',\n    'teacher_and_student_over_limit': 'The number of students and teacher have reached upper limit',\n    'teacher_accept_whiteboard': 'Teacher already grant your whiteboard',\n    'teacher_cancel_whiteboard': 'Teacher already cancel your whiteboard',\n    'teacher_accept_co_video': 'Teacher already accept co-video',\n    'teacher_reject_co_video': 'Teacher already rejected co-video',\n    'teacher_cancel_co_video': 'Teacher already canceled co-video',\n    'student_cancel_co_video': 'Student canceled co-video',\n  },\n  'notice': {\n    'student_interactive_apply': `\"{reason}\" wants to interact with you`\n  },\n  'chat': {\n    'placeholder': 'Input Message',\n    'banned': 'Banned',\n    'send': 'send'\n  },\n  'device': {\n    'camera': 'Camera',\n    'microphone': 'Microphone',\n    'speaker': 'Speaker',\n    'finish': 'Finish',\n  },\n  'nav': {\n    'delay': 'Delay: ',\n    'network': 'Network: ',\n    'cpu': 'CPU: ',\n    'class_end': 'Class end',\n    'class_start': 'Class start',\n    'record_start':'Record start',\n    'record_end':'Record end',\n  },\n  'home': {\n    'entry-home': 'Enter in Home',\n    'teacher': 'teacher',\n    'student': 'student',\n    'cover_class': 'cover-en',\n    'room_name': 'Room Name',\n    'nickname': 'Your Name',\n    'room_type': 'Room Type',\n    'room_join': 'Join',\n    'short_title': {\n      'title': 'Agora Education',\n      'subtitle': 'Powered by agora.io',\n    },\n    'name_too_long': 'name too long, should <= 20 characters',\n    '1v1': 'One-to-One',\n    'mini_class': 'Small Class',\n    'large_class': 'Large Class',\n    'missing_room_name': 'missing room name',\n    'missing_your_name': 'missing your name',\n    'missing_password': 'missing password',\n    'missing_role': 'missing role',\n    'account': 'nickname',\n    'password': 'password',\n  },\n  'room': {\n    'chat_room': 'Chat Room',\n    'student_list': 'Student List',\n    'uploading': 'Uploading...',\n    'converting': 'Converting...',\n    'upload_success': 'upload success',\n    'upload_failure': 'upload failure, check the network',\n    'convert_success': 'convert success',\n    'convert_failure': 'convert failure, check the network',\n  },\n  'replay': {\n    'loading': 'loading...',\n  },\n  'build_version': `build version: ${build_version}`,\n}\n\nexport const t = (name: string, options?: any): string => {\n  const lang = globalStore.state.language.match(/zh/) ? zhCN : en;\n  let content = get(lang, name, null);\n  if (!content) throw `${lang}: ${name} has no match`;\n  if (!isEmpty(options)) {\n    if (options.reason && content.match(/\\{.+\\}/)) {\n      content = content.replace(/\\{.+\\}/, options.reason);\n    }\n  }\n\n  return content;\n}\n","import { MessageObj } from '../utils/types';\nimport { AgoraUser, roomStore } from \"./room\"\nimport { List } from 'immutable';\n/**\n * 用于获取live的各种数据\n *\n */\n\nimport { Subject } from 'rxjs';\n\n// 每一个直播参与用户的属性（xhb自己的用户，非声网的）\nexport interface Audience extends AgoraUser {\n  uid: string // uid声网的uid\n  token: string // xhb的用户id\n  name: string // 名字\n  avatar: string  //\n  status: \"online\" | \"offline\" // 状态\n  broadcast: boolean\n  handsUp: boolean // 举手状态\n  forbiddenWord: boolean // 是否在禁言\n  online: boolean  // 是否在线\n}\n\nexport interface LiveDetail {\n  identify: 'teacher' | 'student'\n  id: string // 创建id\n  classroomId: string //\n  senderId: string // 创建者id\n  houseName: string // 房间名字 liveHouseName\n  title: string // 直播的主题\n  status: number\n  uid: number\n  startTime: number\n  endTime: number\n}\n\ninterface TokenInfo {\n  rtcToken: string\n  rtcUid: string\n  rtmToken: string\n  whiteBoardToken: string\n  whiteBoardUuid: string\n}\n\n\nexport interface LiveState {\n  detail: LiveDetail, // 一个直播的详细数据\n  onlineIds: Array<string>, // 所有的在线ids\n  tokenInfo: TokenInfo, // token信息\n  discussionStatus: boolean, // 是否关闭讨论\n  audienceList: Array<Audience>, // 邀请的参与者列表（xhb自己定义的）\n  creater: Audience,\n  allForbidden: boolean, // true 全部在线观众都被禁言\n  messageList: List<MessageObj> // 文字消息列表\n  openState: boolean\n  resumList: Array<any> // 失败的流，需要重新播放\n}\n\nexport class LiveStore {\n  private subject: Subject<LiveState> | null;\n  public state: LiveState;\n  public readonly defaultState: LiveState = {\n    onlineIds: [],\n    resumList: [],\n    tokenInfo: {\n      rtcToken: \"\",\n      rtcUid: \"\",\n      rtmToken: \"\",\n      whiteBoardToken: \"\",\n      whiteBoardUuid: \"\",\n    },\n    detail: {\n      identify: \"student\",\n      id: \"\",\n      classroomId: \"\",\n      senderId: \"\",\n      houseName: \"\",\n      title: \"\",\n      status: -1,\n      uid: -1,\n      startTime: 0,\n      endTime: 0\n    },\n    discussionStatus: true,\n    audienceList: [],\n    creater: {\n      uid: '',\n      token: '',\n      name: '',\n      avatar: '',\n      status: 'offline',\n      broadcast: true,\n      handsUp: true,\n      forbiddenWord: true,\n      online: true,\n      account: '',\n      role: '',\n      video: 0,\n      audio: 0,\n      chat: 0,\n      boardId: '',\n      sharedId: 0,\n      linkId: 0,\n      lockBoard: 1,\n      grantBoard: 0\n    },\n    allForbidden: true,\n    messageList: List<MessageObj>(),\n    openState: false\n  }\n\n  constructor() {\n    this.subject = null;\n    this.state = this.defaultState;\n  }\n\n  private initialize() {\n    this.subject = new Subject<LiveState>();\n    this.state = {\n      ...this.defaultState,\n    }\n    this.subject.next(this.state);\n  }\n\n  private commit(state: LiveState) {\n    this.subject && this.subject.next(state);\n  }\n\n  // 具体调用 请看src/containers/root-container.tsx => useObserver方法\n  public subscribe(updateState: any) {\n    this.initialize();\n    this.subject && this.subject.subscribe(updateState);\n  }\n\n  // 具体调用 请看src/containers/root-container.tsx => useObserver方法\n  public unsubscribe() {\n    this.subject && this.subject.unsubscribe();\n    this.subject = null;\n  }\n\n  get me() {\n    const { me } = roomStore.state\n    const obj = this.state.audienceList.find(k => k.uid + '' === me.uid + '');\n    return obj ? obj : roomStore.state.me as Audience\n  }\n\n\n  public updateState(rootState: LiveState) {\n    this.state = {\n      ...this.state,\n      ...rootState,\n    }\n    this.commit(this.state);\n  }\n\n  addResumList(stream: any) {\n    const { resumList } = this.state\n    resumList.push(stream)\n    this.state = {\n      ...this.state,\n      resumList\n    }\n    this.commit(this.state);\n  }\n\n  deleteResumList(userId:number) {\n    const { resumList } = this.state\n    const index = resumList.findIndex(k => k.userId === Number(userId))\n    resumList.splice(index, 1)\n    this.state = {\n      ...this.state,\n      resumList\n    }\n    this.commit(this.state);\n  }\n  setDetail(detail: LiveDetail) {\n    this.state = {\n      ...this.state,\n      detail\n    }\n    this.commit(this.state);\n  }\n\n  setTokenInfo(tokenInfo: TokenInfo) {\n    this.state = {\n      ...this.state,\n      tokenInfo\n    }\n    this.commit(this.state);\n  }\n\n  setAudienceListLeaveOrJoin(id: string, isJoin?: boolean) {\n    const { creater, audienceList } = this.state\n    if (creater.uid + '' === id + '') {\n      creater.online = isJoin ? true : false\n    }\n    let onlineNum = 0;\n    const newList = audienceList.map(k => {\n      if (k.uid + '' === id + '') {\n        k.online = isJoin ? true : false\n        if (isJoin) {\n          onlineNum++\n        }\n      }\n      return k\n    })\n\n\n    if (onlineNum === audienceList.length) {\n      this.setAllForbidden(true)\n    }\n    newList.sort((a, b) => (a.online ? -1 : 1))\n    this.state = {\n      ...this.state,\n      creater,\n      audienceList: newList\n    }\n    this.commit(this.state);\n  }\n\n  setOnlineIds(onlineIds: Array<string>) {\n    onlineIds.forEach(k => this.setAudienceListLeaveOrJoin(k, true))\n    this.state = {\n      ...this.state,\n      onlineIds\n    }\n\n    this.commit(this.state);\n  }\n\n  setOpenState(openState: boolean) {\n    this.state = {\n      ...this.state,\n      openState\n    }\n    this.commit(this.state);\n  }\n\n  setDiscussionStatus(discussionStatus) {\n    this.state = {\n      ...this.state,\n      discussionStatus\n    }\n    this.commit(this.state);\n  }\n\n  setAudienceList(arr: Array<Audience>) {\n    // const list = this.setRankList(arr)\n    this.state = {\n      ...this.state,\n      audienceList: arr\n    }\n    this.commit(this.state);\n  }\n\n  setCreater(obj: Audience) {\n    this.state = {\n      ...this.state,\n      creater: obj\n    }\n    this.commit(this.state);\n  }\n\n  setAllForbidden(forbidden) {\n    this.state = {\n      ...this.state,\n      allForbidden: forbidden\n    }\n    this.commit(this.state);\n  }\n\n  setMessageList(obj: MessageObj) {\n    this.state = {\n      ...this.state,\n      messageList: this.state.messageList.push(obj)\n    }\n    this.commit(this.state);\n  }\n\n  //\n  /**\n   * 判断用户是否经验禁言状态\n   * @param userId / token\n   * @return true 需要禁言\n  */\n  isForbiddenWordsForUserId(userId) {\n    const obj = this.state.audienceList.find(k => k.token === userId);\n    if (obj) {\n      return obj.forbiddenWord\n    } else {\n      return true\n    }\n  }\n\n  /**\n     * 判断当前观众是否能加入直播\n     * @param userId / token\n     * @return true 可以加入直播\n    */\n  canJoinForUserId(userId) {\n    const obj = this.state.audienceList.find(k => k.token === userId);\n    if (obj) {\n      return true\n    } else {\n      return false\n    }\n  }\n\n}\n\nexport const liveStore = new LiveStore();\nwindow.liveStore = liveStore\n","// localStorage的前缀\n\n/**\n * 调用方式\n * import localstore from \"./local-store\"\n * \n * // 取值\n * localstore.get(\"111\")\n * localstore.getItem(\"111\")\n * \n * // 设置值\n * localstore.set(\"111\", 123)\n * localstore.setItem(\"111\", 123)\n * \n * // 获取特殊值\n * import { LocalKey } from \"./local-store\"\n * localstore.get(LocalKey.userInfo) //用户信息\n * localstore.get(LocalKey.accessToken) //token信息\n */\nexport const LocalPrefix = ''\n\nexport interface StoreItem {\n  value: any\n  options: Options\n}\n\nexport interface Options {\n  type?: string\n}\n\nconst generateType = (value: any) => {\n  if (typeof value === 'object') {\n    return Object.prototype.toString.call(value).match(/\\[object\\s(\\w*)]/)![1]\n  }\n  return typeof value\n}\n\n/**\n * 设置localStore\n * @param {*} storeName 存储名称\n * @param {*} storeValue 存储值\n * @param {*} options 配置项\n */\nconst set = (storeName: string, storeValue: any, options: Options = {}) => {\n  \n\n  let storeItem: StoreItem = {\n    value: storeValue,\n    options: {\n      type: generateType(storeValue),\n      ...options\n    }\n  }\n\n  localStorage[storeName] = JSON.stringify(storeItem)\n}\n\n/**\n * 获取localStore\n * @param {*} storeName 存储名称\n */\nconst get = (storeName: string) => {\n\n \n  try{\n    let { value, options } = JSON.parse(localStorage[storeName]) as StoreItem\n     // value 不存在时的降级逻辑\n      if (value == null && options) {\n        switch (options.type) {\n          case 'Object':\n            return {}\n          case 'Array':\n            return []\n          default:\n            return ''\n        }\n      }\n      return JSON.parse(localStorage[storeName]) \n  } catch (e) {\n    \n    return localStorage[storeName] || \"\"\n  }\n \n\n \n}\n\n/**\n * 删除localStore\n * @param {*} storeName 存储名称\n */\nconst remove = (storeName: string) => {\n  \n  return localStorage.removeItem(storeName)\n}\n\nexport default {\n  get,\n  getItem: get,\n  set,\n  setItem: set,\n  remove,\n  removeItem: remove\n}\n\n// 储存常用的local key\nexport const LocalKey = (prefix => {\n  const key: { [key: string]: string } = {\n    userInfo: 'USERINFO',\n    accessToken: 'ACCESSTOKEN'\n  }\n  Object.keys(key).forEach(element => {\n    key[element] = prefix + key[element]\n  })\n  return key\n})('')\n","import 'dayjs/locale/zh-cn'\nimport dayjs from 'dayjs'\n\nconst weekArray = ['周日', '周一', '周二', '周三', '周四', '周五', '周六']\n\nexport const formatTime = (\n  timestamp: number,\n  diffToday: boolean,\n  format: string\n) => {\n  if (!timestamp) return ''\n\n  diffToday = typeof diffToday === 'undefined' ? true : diffToday\n  format = format || 'YYYY/MM/DD HH:mm:ss'\n\n  const currentDate = dayjs()\n  const date = dayjs(timestamp)\n  const newCurrentDate = currentDate.format('YYYY/MM/DD')\n  const newDate = date.format('YYYY/MM/DD')\n  const currentYear = currentDate.format('YYYY')\n  const year = date.format('YYYY')\n  let newValue = date\n\n  if (diffToday) {\n    if (newCurrentDate === newDate) {\n      // 今天不返回日期\n      format = 'HH:mm'\n    } else if (currentYear === year) {\n      // 今年不返回年份\n      format = 'MM/DD HH:mm'\n    }\n  }\n\n  return newValue.locale('zh-cn').format(format)\n}\n\n/**\n * 获取文件类型\n * @param {String} fileName 带后缀的文件名\n * 返回icon、type\n */\nexport const getFileType = (fileName: string) => {\n  if (/\\.doc(x?)/i.test(fileName)) {\n    return {\n      icon: require('../assets/message_word.png'),\n      type: 'application/word'\n    }\n  }\n  if (/\\.xls(x?)/i.test(fileName)) {\n    return {\n      icon: require('../assets/message_excel.png'),\n      type: 'application/xls'\n    }\n  }\n  if (/\\.ppt(x?)/i.test(fileName)) {\n    return {\n      icon: require('../assets/message_ppt.png'),\n      type: 'application/ppt'\n    }\n  }\n  if (/\\.pdf/i.test(fileName)) {\n    return {\n      icon: require('../assets/message_pdf.png'),\n      type: 'application/pdf'\n    }\n  }\n\n  return { icon: require('../assets/message_file.png') }\n}\n\nexport const transformWeekDay = (str: string) => {\n  const weekIndex = str.match(/\\((\\d)\\)/)[1]\n  return str.replace(/\\((\\d)\\)/, `（${weekArray[weekIndex]}）`)\n}\n\n// 去除班级内称呼\nexport const removeClassCall = (str: string) => {\n  const nameList = ['爸爸', '妈妈', '阿姨', '爷爷', '奶奶', '外公', '外婆', '叔叔', '大伯', '姑姑', '舅舅', '姐姐', '哥哥']\n  let name = str\n  nameList.forEach(item => {\n    if (str.indexOf(item) > -1) {\n      name = str.replace(item, '')\n    }\n  })\n  return name\n}\n\nexport default {\n  formatTime,\n  getFileType,\n  removeClassCall\n}\n","\nimport { ChatMessage, AgoraStream } from '../utils/types';\nimport { Subject, from } from 'rxjs';\nimport { Map, Set, List } from 'immutable';\nimport AgoraRTMClient, { RoomMessage } from '../utils/agora-rtm-client';\nimport AgoraWebClient from '../utils/agora-rtc-client';\nimport { get } from 'lodash';\nimport GlobalStorage from '../utils/custom-storage';\nimport { t } from '../utils/i18n';\nimport { liveStore,Audience } from '../stores/live';\nimport localStore, { LocalKey } from '../utils/local-store'\nimport { removeClassCall } from '../utils/tool'\n\nfunction canJoin({ onlineStatus, channelCount, role }: { onlineStatus: any, role: string, channelCount: number }) {\n  const result = {\n    permitted: true,\n    reason: ''\n  }\n\n  let maximum = Infinity;\n  if (channelCount >= maximum) {\n    result.permitted = false;\n    result.reason = t('toast.teacher_and_student_over_limit');\n    return result;\n  }\n\n  // TODO 限制暂时去除\n  // const teacher = get(onlineStatus, 'teacher', false);\n  const totalCount: number = get(onlineStatus, 'totalCount', 0);\n\n  if (role === 'teacher') {\n    // const isOnline = teacher;\n    // if (isOnline) {\n    //   result.permitted = false;\n    //   result.reason = t('toast.teacher_exists');\n    //   return result;\n    // }\n  }\n\n  if (role === 'student') {\n    if (totalCount + 1 > maximum) {\n      result.permitted = false;\n      result.reason = t('toast.student_over_limit');\n      return result;\n    }\n  }\n\n  return result;\n}\n\n\nexport interface AgoraUser {\n  uid: string\n  account: string\n  role: \"teacher\" | \"student\" | \"\"\n  video: number\n  audio: number\n  chat: number\n  boardId: string // whiteboard_uuid\n  sharedId: number // shared_uid\n  linkId: number // link_uid\n  lockBoard?: number // lock_board\n  grantBoard: number // 举手\n  online: boolean\n  avatar: string\n  handsUp?: boolean,\n  name?: string\n}\n\nexport interface ClassState {\n  rid: string\n  roomName: string\n  teacherId: string\n  boardId: string // whiteboard_uuid\n  sharedId: number // shared_uid\n  linkId: number // link_uid\n  lockBoard: number // lock_board\n  courseState: number\n  muteChat: number\n}\n\ntype RtcState = {\n  rtcToken: string\n  published: boolean\n  joined: boolean\n  users: Set<number>\n  shared: boolean\n  localStream: AgoraMediaStream | null\n  localSharedStream: AgoraMediaStream | null\n  remoteStreams: Map<number, AgoraMediaStream>\n}\n\nexport type MediaDeviceState = {\n  microphoneId: string\n  speakerId: string\n  cameraId: string\n  speakerVolume: number\n  camera: number\n  microphone: number\n  speaker: number\n}\n\nexport type SessionInfo = {\n  uid: string\n  rid: string\n  account: string\n  roomName: string\n  role: string\n}\n\nexport type RtmState = {\n  joined: boolean\n  rtmToken: string\n  memberCount: number\n}\n\nexport type RoomState = {\n  discussionStatus: boolean\n  rtcToken: string\n  rtmToken: string\n  rtmLock: boolean\n  uuid: string\n  homePage: string\n  me: AgoraUser // 当前登录的用户是谁\n  users: Map<string, AgoraUser> // 整个直播有多少用户\n  course: ClassState // 当前频道的一些信息\n  applyUid: number\n  rtc: RtcState\n  rtm: RtmState\n  mediaDevice: MediaDeviceState // 当前媒体信息\n  messages: List<ChatMessage>\n  language: string\n}\n\nexport type AgoraMediaStream = {\n  streamID: number\n  stream?: any\n}\n\nexport class RoomStore {\n  private subject: Subject<RoomState> | null;\n  public _state: RoomState;\n\n  get state() {\n    return this._state;\n  }\n\n  set state(newState) {\n    this._state = newState;\n  }\n  public readonly defaultState: RoomState = Object.freeze({\n    discussionStatus: true,\n    rtmLock: false,\n    me: {\n      account: \"\",\n      uid: \"\",\n      role: \"\",\n      video: 1,\n      audio: 1,\n      chat: 1,\n      linkId: 0,\n      sharedId: 0,\n      boardId: '',\n    },\n    users: Map<string, AgoraUser>(),\n    applyUid: 0,\n    rtm: {\n      joined: false,\n      memberCount: 0,\n    },\n    rtc: {\n      published: false,\n      joined: false,\n      shared: false,\n      users: Set<number>(),\n      localStream: null,\n      localSharedStream: null,\n      remoteStreams: Map<number, AgoraMediaStream>(),\n    },\n    course: {\n      teacherId: '',\n      boardId: '',\n      sharedId: 0,\n      linkId: 0,\n      courseState: 0,\n      muteChat: 0,\n      rid: '',\n      roomName: '',\n    },\n    mediaDevice: {\n      microphoneId: '',\n      speakerId: '',\n      cameraId: '',\n      speakerVolume: 100,\n      camera: 0,\n      speaker: 0,\n      microphone: 0\n    },\n    messages: List<ChatMessage>(),\n    language: navigator.language,\n    ...GlobalStorage.read('edu_agora_room')\n  });\n\n  private applyLock: number = 0;\n\n  public windowId: number = 0;\n\n  public rtmClient: AgoraRTMClient;\n  public rtcClient: AgoraWebClient;\n\n  constructor() {\n    this.subject = null;\n    this._state = {\n      ...this.defaultState\n    };\n    this.rtmClient = new AgoraRTMClient();\n    this.rtcClient = new AgoraWebClient({ roomStore: this });\n  }\n\n  initialize() {\n    this.subject = new Subject<RoomState>();\n    this.state = {\n      ...this.defaultState,\n    }\n    this.applyLock = 0;\n    this.subject.next(this.state);\n  }\n\n  get applyUid() {\n    return this.applyLock;\n  }\n\n  subscribe(updateState: any) {\n    this.initialize();\n    this.subject && this.subject.subscribe(updateState);\n  }\n\n  unsubscribe() {\n    this.subject && this.subject.unsubscribe();\n    this.subject = null;\n  }\n\n  commit(state: RoomState) {\n    this.subject && this.subject.next(state);\n  }\n\n  updateState(rootState: RoomState) {\n    this.state = {\n      ...this.state,\n      ...rootState,\n    }\n    this.commit(this.state);\n  }\n\n  isTeacher(peerId: string) {\n    if (!peerId) return false;\n    const user = this.state.users.get(peerId)\n    if (!user) return false;\n    if (user.role === 'teacher') return true;\n    return false;\n  }\n\n  isStudent(peerId: string) {\n    if (!peerId) return false;\n    const user = this.state.users.get(peerId);\n    if (!user) return false;\n    if (user.role === 'student') return true;\n    return false;\n  }\n\n  addLocalStream(stream: AgoraStream) {\n    this.state = {\n      ...this.state,\n      rtc: {\n        ...this.state.rtc,\n        localStream: stream\n      }\n    }\n    this.commit(this.state);\n  }\n\n  removeLocalStream() {\n    this.state = {\n      ...this.state,\n      rtc: {\n        ...this.state.rtc,\n        localStream: null,\n        localSharedStream: null\n      }\n    }\n    this.commit(this.state);\n  }\n\n  addLocalSharedStream(stream: any) {\n    this.state = {\n      ...this.state,\n      rtc: {\n        ...this.state.rtc,\n        localSharedStream: stream\n      }\n    }\n    this.commit(this.state);\n  }\n\n  removeLocalSharedStream() {\n    this.state = {\n      ...this.state,\n      rtc: {\n        ...this.state.rtc,\n        localSharedStream: null\n      }\n    }\n    this.commit(this.state);\n  }\n\n  addPeerUser(uid: number) {\n    this.state = {\n      ...this.state,\n      rtc: {\n        ...this.state.rtc,\n        users: this.state.rtc.users.add(uid),\n      }\n    }\n    this.commit(this.state);\n  }\n\n  removePeerUser(uid: number) {\n    this.state = {\n      ...this.state,\n      rtc: {\n        ...this.state.rtc,\n        users: this.state.rtc.users.delete(uid),\n      }\n    }\n    this.commit(this.state);\n  }\n\n  addRemoteStream(stream: AgoraStream) {\n    \n    this.state = {\n      ...this.state,\n      rtc: {\n        ...this.state.rtc,\n        remoteStreams: this.state.rtc.remoteStreams.set(stream.streamID, stream)\n      }\n    }\n    this.commit(this.state);\n  }\n\n  removeRemoteStream(uid: number) {\n    const remoteStream = this.state.rtc.remoteStreams.get(uid);\n    if (remoteStream && remoteStream.stream && remoteStream.stream.isPlaying) {\n      remoteStream.stream.isPlaying() && remoteStream.stream.stop();\n    }\n\n\n    this.state = {\n      ...this.state,\n      rtc: {\n        ...this.state.rtc,\n        remoteStreams: this.state.rtc.remoteStreams.delete(uid)\n      }\n    }\n  }\n\n  updateMemberCount(count: number) {\n    this.state = {\n      ...this.state,\n      rtm: {\n        ...this.state.rtm,\n        memberCount: count,\n      }\n    }\n    this.commit(this.state);\n  }\n\n  updateRtc(newState: any) {\n    this.state = {\n      ...this.state,\n      rtc: {\n        ...this.state.rtc,\n        ...newState,\n      }\n    }\n    this.commit(this.state);\n  }\n\n  updateDevice(state: MediaDeviceState) {\n    this.state = {\n      ...this.state,\n      mediaDevice: state\n    }\n    this.commit(this.state);\n  }\n\n  // 关闭操作\n  async mute(uid: string, type: string) {\n    const me = this.state.me;\n    if (me.uid === `${uid}`) {\n      if (type === 'audio') {\n        await this.updateAttrsBy(me.uid, {\n          audio: 0\n        });\n      }\n      if (type === 'video') {\n        await this.updateAttrsBy(me.uid, {\n          video: 0\n        });\n      }\n      if (type === 'chat') {\n        await this.updateAttrsBy(me.uid, {\n          chat: 0\n        });\n      }\n      // if (type === 'grantBoard') {\n      //   await this.updateAttrsBy(me.uid, {\n      //     grant_board: 0\n      //   });\n      // }\n    }\n    else if (me.role === 'teacher') {\n      if (type === 'audio') {\n        await this.rtmClient.sendPeerMessage(`${uid}`, { cmd: RoomMessage.muteAudio });\n      }\n      if (type === 'video') {\n        await this.rtmClient.sendPeerMessage(`${uid}`, { cmd: RoomMessage.muteVideo });\n      }\n      if (type === 'chat') {\n        await this.rtmClient.sendPeerMessage(`${uid}`, { cmd: RoomMessage.muteChat });\n      }\n      if (type === 'grantBoard') {\n        await this.rtmClient.sendPeerMessage(`${uid}`, { cmd: RoomMessage.muteBoard });\n      }\n    }\n  }\n\n  // 开启操作\n  async unmute(uid: string, type: string) {\n    const me = this.state.me;\n    if (me.uid === `${uid}`) {\n      if (type === 'audio') {\n        await this.updateAttrsBy(me.uid, {\n          audio: 1\n        });\n      }\n      if (type === 'video') {\n        await this.updateAttrsBy(me.uid, {\n          video: 1\n        });\n      }\n      if (type === 'chat') {\n        await this.updateAttrsBy(me.uid, {\n          chat: 1\n        });\n      }\n      // if (type === 'grantBoard') {\n      //   await this.updateAttrsBy(me.uid, {\n      //     grant_board: 1\n      //   });\n      // }\n    }\n    else if (me.role === 'teacher') {\n      if (type === 'audio') {\n        await this.rtmClient.sendPeerMessage(`${uid}`, { cmd: RoomMessage.unmuteAudio });\n      }\n      if (type === 'video') {\n        await this.rtmClient.sendPeerMessage(`${uid}`, { cmd: RoomMessage.unmuteVideo });\n      }\n      if (type === 'chat') {\n        await this.rtmClient.sendPeerMessage(`${uid}`, { cmd: RoomMessage.unmuteChat });\n      }\n      if (type === 'grantBoard') {\n        await this.rtmClient.sendPeerMessage(`${uid}`, { cmd: RoomMessage.unmuteBoard });\n      }\n    }\n  }\n\n  async loginAndJoin(payload: any, pass: boolean = false) {\n    const { role, uid, rid, rtcToken, rtmToken } = payload;\n    await this.rtmClient.login(uid, rtmToken);\n\n    let result = { permitted: true, reason: '' };\n    try {\n      // 查询单个或多个频道的成员人数。\n      const channelMemberCount = await this.rtmClient.getChannelMemberCount([rid]);\n      const channelCount = channelMemberCount[rid];\n      // 查询某指定频道的全部属性\n      let accounts = await this.rtmClient.getChannelAttributeBy(rid);\n      //  查询指定用户的在线状态。\n      const onlineStatus = await this.rtmClient.queryOnlineStatusBy(accounts);\n      const argsJoin = {\n        channelCount,\n        onlineStatus,\n        role,\n        accounts\n      };\n      // 判断用户是否能加入\n      result = pass === false ? canJoin(argsJoin) : { permitted: true, reason: '' };\n      if (result.permitted) {\n        let res = await this.rtmClient.join(rid);\n        this.state = {\n          ...this.state,\n          rtm: {\n            ...this.state.rtm,\n            joined: true\n          },\n          rtmToken,\n          rtcToken,\n        }\n        const grantBoard = role === 'teacher' ? 1 : 0;\n        // 更新当前me的属性\n        await this.updateMe({ ...payload, grantBoard });\n        this.commit(this.state);\n        return;\n      }\n      throw {\n        type: 'not_permitted',\n        reason: result.reason\n      }\n    } catch (err) {\n      if (this.rtmClient._logged) {\n        await this.rtmClient.logout();\n      }\n      throw err;\n    }\n  }\n\n  setRTCJoined(joined: boolean) {\n    this.state = {\n      ...this.state,\n      rtc: {\n        ...this.state.rtc,\n        joined\n      }\n    }\n    this.commit(this.state);\n  }\n\n  async updateCourseLinkUid(linkId: number) {\n    const me = this.state.me;\n    console.log(\"me: link_uid\", me, linkId);\n    let res = await this.updateAttrsBy(me.uid, {\n      link_uid: linkId\n    })\n    // let res = await this.updateMe({...me, linkId: linkId});\n    this.applyLock = linkId;\n    console.log(\"current apply lock: \", this.applyLock);\n    return res;\n  }\n\n  async updateWhiteboardUid(uid: string) {\n    const me = this.state.me;\n    let res = await this.updateAttrsBy(me.uid, {\n      whiteboard_uid: uid\n    });\n    console.log(\"[update whiteboard uid] res\", uid);\n    return res;\n  }\n\n  updateChannelMessage(msg: ChatMessage) {\n    let type = msg.action ? msg.action.type : ''\n    if (type === \"handoff\") {\n      this.updateHandOffState(msg)\n\n    } else if (type === \"handup\") {\n      this.updateHandUpState(msg)\n\n    } else if (type === \"openTopic\" || type === \"closeTopic\") {\n      let discussionStatus = !(msg.action.type === 'openTopic')\n\n      liveStore.setDiscussionStatus(discussionStatus)\n\n      console.log('我我我', liveStore.state.discussionStatus)\n\n      let text = type === 'openTopic' ? '老师开启讨论' : '老师关闭讨论'\n\n      let paramObj = {\n        timestamp: 0,\n        sender: {\n          id: '',\n          avatar: '',\n          name: ''\n        },\n        message: {\n          type: 'text',\n          text: text,\n        },\n        isSystem: true\n      }\n      liveStore.setMessageList(paramObj)\n\n    } else if (type === 'socket') {\n      this.state = {\n        ...this.state,\n      };\n    } else if (type === \"mute\" || type === \"cancelMute\") {\n      console.log('禁言第二步骤',msg)\n      let list = liveStore.state.audienceList\n\n      if (msg.receiver) {\n        // 主播是否禁言某个人 senderId是自己 receiveId某个人 用sendMessage广播\n        list.some((val: Audience) => {\n          if (val.uid === msg.receiver.id) {\n            // 消息还未广播出去 改变自己当前页面的状态 ？？？\n            // if (msg.isSelf) {\n            //   val.forbiddenWord = type === \"mute\"\n            // } else {\n            //   val.broadcast = type === \"mute\"? false:true\n            // }\n\n            if (msg.isSelf) {\n              if (type === \"mute\") {\n                this.mute(msg.receiver.id, 'audio')\n              } else {\n                this.unmute(msg.receiver.id, 'audio') // 开启\n              }\n            }\n            val.broadcast = type === \"mute\" ? false : true\n\n            return val.uid === msg.receiver.id\n          }\n        })\n      } else {\n        // 一键禁言 有没有一键取消禁言？？？？val.broadcast = false\n        list.forEach(val => {\n          val.online && (val.broadcast = false);\n        })\n        let paramObj = {\n          timestamp: 0,\n          sender: {\n            id: '',\n            avatar: '',\n            name: ''\n          },\n          message: {\n            type: 'text',\n            text: '老师要求全体禁言',\n          },\n          isSystem: true\n        }\n        liveStore.setMessageList(paramObj)\n      }\n\n      liveStore.setAudienceList(list)\n\n      const onlineList = list.filter(val => val.online)\n      const forbidden = onlineList.every(val => !val.broadcast)\n      liveStore.setAllForbidden(forbidden)\n\n    } else {\n      // 文字消息\n      let name = removeClassCall(msg.sender.name)\n      console.log('name',name)\n      let paramObj = {\n        timestamp: msg.timestamp,\n        sender: {\n          id: msg.sender.id,\n          avatar: msg.sender.avatar,\n          name: name\n        },\n        message: {\n          type: 'text',\n          text: msg.message.text,\n        },\n        isSystem: msg.isSystem\n      }\n      liveStore.setMessageList(paramObj)\n    }\n\n\n    this.commit(this.state);\n  }\n\n  // 广播取消举手列表状态更新\n  updateHandOffState(msg: any) {\n    if (msg.receiver && msg.receiver.id) {\n      // 广播一个人\n      const audienceList = liveStore.state.audienceList.map(item => {\n        let val = item\n\n        if (Number(msg.receiver.id) === Number(item.uid)) {\n          let handsUp = false\n          val = { ...item, handsUp }\n        }\n        return val\n\n      })\n      liveStore.setAudienceList(audienceList)\n    } else {\n      // 广播所有人\n      const audienceList = liveStore.state.audienceList.map(item => {\n        let handsUp = false\n\n        return { ...item, handsUp }\n      })\n      liveStore.setAudienceList(audienceList)\n    }\n\n  }\n  // 广播老师某个人举手列表状态更新\n  updateHandUpState(msg: any) {\n    const audienceList = liveStore.state.audienceList.map(item => {\n      let val = item\n      if (Number(msg.sender.id) === Number(item.uid)) {\n        let handsUp = true\n        val = { ...item, handsUp }\n      }\n      return val\n    })\n    liveStore.setAudienceList(audienceList)\n\n  }\n\n  async updateAttrsBy(uid: string, attr: any) {\n    console.log(\"[updateAttrsBy], \",uid, attr);\n    if (attr['whiteboard_uid']) {\n      console.log(\"[update whiteboard uid], \", attr['whiteboard_uid']);\n    }\n    const user = this.state.users.get(uid);\n\n    if (!user) return;\n    const key = user.role === 'teacher' ? 'teacher' : uid;\n    const attrs = {\n      uid: user.uid,\n      whiteboard_uid: user.boardId,\n      link_uid: user.linkId,\n      shared_uid: user.sharedId,\n      account: user.account,\n      video: user.video,\n      audio: user.audio,\n      chat: user.chat,\n      grant_board: user.grantBoard,\n    }\n    if (user.role === 'teacher') {\n      Object.assign(attrs, {\n        mute_chat: this.state.course.muteChat,\n        class_state: this.state.course.courseState,\n        whiteboard_uid: this.state.course.boardId,\n        link_uid: this.state.course.linkId,\n        shared_uid: this.state.course.sharedId,\n      })\n    }\n    if (attr) {\n      Object.assign(attrs, attr);\n    }\n    let res = await this.rtmClient.updateChannelAttrsByKey(key, attrs);\n    return res;\n  }\n\n  // 更新自己的属性\n  async updateMe(user: any, forceUseRtm: boolean = false) {\n    console.log('updateMeupdateMeupdateMe', user, forceUseRtm);\n\n    const { role, uid, account, video, audio, chat, boardId, linkId, sharedId, grantBoard } = user;\n    const key = role === 'teacher' ? 'teacher' : uid;\n    const me = this.state.me;\n    const attrs: any = {\n      uid: me.uid,\n      account: me.account,\n      chat: me.chat,\n      video: me.video,\n      audio: me.audio,\n    }\n    Object.assign(attrs, {\n      uid,\n      account,\n      video,\n      audio,\n      chat,\n      whiteboard_uid: boardId,\n      link_uid: linkId,\n      shared_uid: sharedId,\n      grant_board: grantBoard,\n    });\n\n\n    if (grantBoard !== undefined) {\n      Object.assign(attrs, {\n        grant_board: grantBoard,\n      });\n    }\n    if (role === 'teacher') {\n      const class_state = get(user, 'courseState', this.state.course.courseState);\n      const whiteboard_uid = get(user, 'boardId', this.state.course.boardId);\n      const mute_chat = get(user, 'muteChat', this.state.course.muteChat);\n      const shared_uid = get(user, 'sharedId', this.state.course.sharedId);\n      const link_uid = get(user, 'linkId', this.state.course.linkId);\n      const lock_board = get(user, 'lockBoard', this.state.course.lockBoard);\n      Object.assign(attrs, {\n        mute_chat,\n        class_state,\n        whiteboard_uid,\n        link_uid,\n        shared_uid,\n        lock_board\n      })\n      console.log(\"teacher attrs: >>>> \", attrs);\n    }\n\n\n    let res = await this.rtmClient.updateChannelAttrsByKey(key, attrs);\n    return res;\n  }\n\n  updateRoomAttrs(attrs: any) {\n    const { teacher, accounts, room } = attrs\n    console.log(\"[updateRoomAttrs], room:  \", room, \" teacher: \", teacher, \"accounts \", accounts);\n    const userInfo = localStore.get(LocalKey.userInfo)\n    const { avatar } = userInfo\n    const users = accounts.reduce((acc: Map<string, AgoraUser>, it: any) => {\n      return acc.set(it.uid, {\n        role: it.role,\n        account: it.account,\n        uid: it.uid,\n        video: it.video,\n        audio: it.audio,\n        chat: it.chat,\n        boardId: it.whiteboard_uid,\n        sharedId: it.shared_uid,\n        linkId: it.link_uid,\n        lockBoard: it.lock_board,\n        grantBoard: it.grant_board,\n        online: true,\n        avatar: avatar || require('../assets/user_avatar_default.png')\n      });\n    }, Map<string, AgoraUser>());\n\n    const me = this.state.me;\n\n    if (users.get(me.uid)) {\n      Object.assign(me, users.get(me.uid));\n    }\n\n    if (me.role === 'teacher') {\n      Object.assign(me, {\n        linkId: room.link_uid,\n        boardId: room.whiteboard_uid,\n        lockBoard: room.lock_board,\n      })\n    }\n\n    const newClassState: ClassState = {} as ClassState;\n    Object.assign(newClassState, {\n      teacherId: get(teacher, 'uid', 0),\n      linkId: room.link_uid,\n      boardId: room.whiteboard_uid,\n      courseState: room.class_state,\n      muteChat: room.mute_chat,\n      lockBoard: room.lock_board\n    })\n\n    // console.log(\"... me\", this.state.me);\n    // console.log(\"... this.state.me\", me);\n\n    this.state = {\n      ...this.state,\n      users,\n      me: {\n        ...this.state.me,\n        ...me,\n      },\n      course: {\n        ...this.state.course,\n        ...newClassState\n      }\n    }\n    this.commit(this.state);\n  }\n\n  updateSessionInfo(info: any) {\n    this.state = {\n      ...this.state,\n      course: {\n        ...this.state.course,\n        rid: info.rid,\n        roomName: info.roomName,\n      },\n      me: {\n        ...this.state.me,\n        account: info.account,\n        uid: info.uid,\n        role: info.role,\n        video: info.video,\n        audio: info.audio,\n        chat: info.chat,\n        linkId: info.linkId,\n        sharedId: info.sharedId,\n        boardId: info.boardId,\n      },\n      homePage: info.homePage,\n    }\n    this.commit(this.state);\n  }\n\n  async exitAll() {\n    try {\n      await this.rtmClient.exit();\n    } catch (err) {\n      console.warn(err);\n    }\n    try {\n      await this.rtcClient.exit();\n    } catch (err) {\n      console.warn(err);\n    }\n    GlobalStorage.clear('edu_agora_room');\n    this.state = {\n      ...this.defaultState\n    }\n    this.commit(this.state);\n  }\n\n  setScreenShare(shared: boolean) {\n    this.state = {\n      ...this.state,\n      rtc: {\n        ...this.state.rtc,\n        shared,\n      }\n    }\n    this.commit(this.state);\n  }\n}\n\nexport const roomStore = new RoomStore();\nwindow.roomStore = roomStore\n\n","import Axios,{ Method } from 'axios'\nimport { LocalKey } from \"./local-store\"\nimport store from \"./local-store\"\nimport { httpSign } from '@heibanfe/encrypt'\nimport NProgress from \"nprogress\"\nimport { message as Message } from \"antd\"\n\nconst axios = Axios.create({\n    baseURL: `/api`,\n    timeout: 5000000\n  })\n\n\n// 请求拦截器\naxios.interceptors.request.use(\n  config => {\n    const accessToken = store.get(LocalKey.accessToken) || ''\n    let url = `/api${config.url}`\n    const queryIndex = url.indexOf('?')\n    let query = ''\n\n    if (queryIndex > -1) {\n      query = url.substring(queryIndex + 1)\n      url = url.substring(0, queryIndex)\n    }\n\n    const sign = httpSign(\n      url,\n      query,\n      config.method,\n      config.data || ''\n    )\n      config.headers = {\n      'app-version': window.appVersion || \"\",\n      platform: 'web',\n      Authorization: `Bearer ${accessToken}`.trim(),\n      'X-Content-Security': sign\n    }\n    const userInfo = store.get(LocalKey.userInfo)\n      if (userInfo && userInfo.userId) {\n      config.headers['x-User-Id'] = userInfo.userId\n    }\n\n    return config\n  },\n  error => {\n\n    return error\n  }\n)\n\n// 响应拦截器\naxios.interceptors.response.use(\n  response => {\n    NProgress.done()\n\n    if ((response.config.url || '').indexOf('sign/alicloud/assumerole') > -1) {\n      return response\n    }\n\n    return response.data\n  },\n  error => {\n    NProgress.done()\n\n    let hideErrorMessage = false\n    const { config } = error.response || {}\n    const res = error.response || {}\n    const status = res.status\n    const data = res.data || {}\n    const code = data.code || 404\n    const message = data.message || data.desc || '请求超时了^o^'\n\n    if (config) {\n      try {\n        if (config.method === 'get') {\n          hideErrorMessage = (config.params || {}).hideErrorMessage\n        } else {\n          hideErrorMessage = JSON.parse(JSON.stringify(config.data) || '{}')\n            .hideErrorMessage\n        }\n      } catch (e) {\n        // throw new Error(e)\n      }\n    }\n\n    if (!hideErrorMessage || status !== 406) {\n        Message.error(message)\n    }\n\n    // if (status === 406 && code !== 20002) {\n    //   message.error(message)\n    // }\n\n    if (status === 401) {\n\n      return\n    }\n\n    return { code, message }\n  }\n)\n\nexport interface WebReq {\n  params?: { [index: string]: any }\n  forms?: any\n}\n\n/**\n * 解析路由参数responseType\n *\n */\nconst reg = /:[a-z|A-Z]+/g\nfunction parseParams(url: string) {\n  const ps = url.match(reg)\n\n  if (!ps) {\n    return []\n  }\n\n  return ps.map(k => k.replace(/:/, ''))\n}\n\n/**\n * 按照url和params生成相应的url\n * @param url\n * @param params\n */\nfunction genUrl(url: string, params: WebReq['params']) {\n  if (!params) {\n    return url\n  }\n\n  const ps = parseParams(url)\n  ps.forEach(k => {\n    const reg = new RegExp(':' + k)\n    url = url.replace(reg, params[k])\n  })\n\n  const path: string[] = []\n  for (const key of Object.keys(params)) {\n    if (!ps.find(k => k === key)) {\n      path.push(key + '=' + params[key])\n    }\n  }\n\n  return url + (path.length > 0 ? '?' + path.join('&') : '')\n}\n\ninterface Response<T> {\n  code: number\n  message: string\n  data: any | T\n}\nexport function Api<T>(\n  url: string,\n  method: Method,\n  req: WebReq\n): Promise<Response<T>> {\n  if (url.match(/:/) || method.match(/get|delete/i)) {\n    // 如果路由是带挂参的，先看params再看forms\n    url = genUrl(url, req.params || req.forms)\n  }\n  switch (method) {\n    case 'get':\n      return axios.get(url)\n    case 'delete':\n      return axios.delete(url)\n    case 'post':\n      return axios.post(url, req.forms || req.params)\n    case 'put':\n      return axios.put(url, req.forms || req.params)\n    case 'patch':\n      return axios.patch(url, req.forms || req.params)\n    default:\n      return axios.get(url)\n  }\n}\n\nexport function get<T>(\n  url: string,\n  params?: WebReq['params'],\n  forms?: any\n): Promise<Response<T>> {\n  return Api<T>(url, 'get', {\n    params,\n    forms\n  })\n}\n\nexport function deletes<T>(\n  url: string,\n  params?: WebReq['params'],\n  forms?: any\n): Promise<Response<T>> {\n  return Api<T>(url, 'delete', {\n    params,\n    forms\n  })\n}\n\nexport function post<T>(\n  url: string,\n  params?: WebReq['params'],\n  forms?: any\n): Promise<Response<T>> {\n  return Api<T>(url, 'post', {\n    forms,\n    params\n  })\n}\n\nexport function put<T>(\n  url: string,\n  params?: WebReq['params'],\n  forms?: any\n): Promise<Response<T>> {\n  return Api<T>(url, 'put', {\n    forms,\n    params\n  })\n}\n\nexport function patch<T>(\n  url: string,\n  params?: WebReq['params'],\n  forms?: any\n): Promise<Response<T>> {\n  return Api<T>(url, 'patch', {\n    forms,\n    params\n  })\n}\n\n// 给 goctl 生成的 .ts 文件使用\nexport const webapi = {\n  get,\n  delete: deletes,\n  put,\n  patch,\n  post\n}\n\nexport default axios\n","import { webapi } from '../utils/webapi'\n\n/**\n * 发布直播\n * @param\n * token\n */\n\nexport const publishLive = formData => webapi.post(`/live/publish/pack`, formData)\n\n/**\n * 获取直播权限\n * token\n */\n\nexport const getAuth = () => webapi.get(`/live/auth`)\n\n/**\n * 直播详情\n * liveId\n * token\n * */\nexport const getLiveDetail = formData =>\n    webapi.post(`/live/detail/${formData.liveId}`, formData)\n\n/**\n * 获取直播观众\n * @param {*} liveId - 直播 id\n */\nexport const getLiveAudiences = liveId => webapi.get(`/live/get-audiences/${liveId}`)\n\n/**\n * 更新直播状态\n * @param {*} formData\n * liveRoomName - 直播房间\n * status - 0：未开始，1：进行中，2：已结束\n */\nexport const updateLiveState = formData =>\n    webapi.post(`/live/update/${formData.liveRoomName}`, formData)\n\n/**\n * 暂停上课\n * @param formData\n * liveRoomName - 直播房间\n */\nexport const stopLiveState = formData =>\n    webapi.post(`/live/stop-live/${formData.liveRoomName}`)\n\n/**\n * 开始录制\n * @param {*} liveRoomName - 直播房间\n */\nexport const startRecord = liveRoomName =>\n    webapi.post(`/live/start-record/${liveRoomName}`)\n\n/**\n * 停止录制\n * @param {*} formData\n * liveRoomName - 直播房间\n * resourceId - 资源 id\n * sid\n * title - 录制的文件名称\n */\nexport const stopRecord = formData =>\n    webapi.post(`/live/stop-record/${formData.liveRoomName}`, formData)\n\n/**\n * 获取直播房间用户 id\n */\nexport const getLiveUid = () => webapi.get(`/live/get-single-audience`)\n\n/**\n * 获取禁言状态\n * liveRoomName\n */\nexport const getForbiddenStatus = liveRoomName =>\n    webapi.get(`/live/forbidden-words/${liveRoomName}`)\n\n/**\n * 设置禁言状态\n * liveRoomName\n */\nexport const setForbiddenStatus = (formData, liveRoomName) =>\n    webapi.post(`/live/forbidden-words/${liveRoomName}`, formData)\n/*\n * 在直播间举手 liveRoomName\n */\nexport const handsUp = liveRoomName => webapi.post(`/live/hands-up/${liveRoomName}`)\n\n/**\n * 主播清除单个人的举手 liveRoomName\n */\nexport const putDownSingleHand = (liveRoomName, singleToken) => webapi.post(`/live/put-down-single-hand/${liveRoomName}`, singleToken)\n\n/**\n* 主播清除所有的举手 liveRoomName\n*/\nexport const putDownHands = liveRoomName =>\n    webapi.post(`/live/put-down-hands/${liveRoomName}`)\n\n// 在直播间撤回自己的举手\nexport const revokeHandsUp = (liveRoomName, singleToken) =>\n    webapi.post(`/live/revoke-hands-up/${liveRoomName}`, singleToken)\n\n/**\n * 获取声网 token\n * @param {*} liveRoomName 直播房间\n */\nexport const getAgoraToken = formData =>\n    webapi.get(`/live/agora-token/${formData.liveHouseName}?type=${formData.type}&uid=${formData.uid}`)\n\n/**\n * 获取直播间的讨论状态\n * @param {*} liveRoomName 直播房间\n */\nexport const getDiscussionStatus = liveHouseName =>\n    webapi.get(`/live/discussion-status/${liveHouseName}`)\n\n/**\n * 主播更新直播间的讨论状态\n * @param {*} liveRoomName 直播房间\n */\nexport const setDiscussionStatus = (liveHouseName, formData) =>\n    webapi.post(`/live/update-discussion/${liveHouseName}`, formData)\n\n\nexport default {\n    publishLive,\n    getAuth,\n    getLiveDetail,\n    getLiveAudiences,\n    updateLiveState,\n    startRecord,\n    stopRecord,\n    getLiveUid,\n    getForbiddenStatus,\n    setForbiddenStatus,\n    handsUp,\n    putDownHands,\n    getAgoraToken,\n    stopLiveState,\n    putDownSingleHand,\n    getDiscussionStatus,\n    revokeHandsUp\n}\n","/**\n * 用于获取socket的各种数据\n *\n */\nimport { Subject } from 'rxjs';\n\nexport interface SocketData{\n    liveHouseName:string,\n    classState?:string\n    recordState?:string\n}\nexport interface SocketState {\n    liveClassState?:string\n    recordVideoState?:string\n}\n\nexport class SocketStore {\n    private subject: Subject<SocketState> | null;\n    public state: SocketState;\n    public defaultState = {\n        liveClassState:\"\",\n        recordVideoState:\"\"\n    }\n    constructor() {\n        this.subject = null;\n        this.state = this.defaultState\n    }\n\n    private initialize() {\n        this.subject = new Subject<SocketState>();\n        this.state = this.defaultState\n        this.subject.next(this.state);\n    }\n\n    // 具体调用 请看src/containers/root-container.tsx => useObserver方法\n    public subscribe(updateState: any) {\n        this.initialize();\n        this.subject && this.subject.subscribe(updateState);\n    }\n\n    // 具体调用 请看src/containers/root-container.tsx => useObserver方法\n    public unsubscribe() {\n        this.subject && this.subject.unsubscribe();\n        this.subject = null;\n    }\n\n    private commit(state: SocketState) {\n        this.subject && this.subject.next(state);\n    }\n\n    setSocketDetail( { type, chattingView, messageView, messageId, chattingId, state, liveHouseName }) {\n        console.log('store里,收到socket通知了');\n        const data = {\n            liveClassState: {} as any,\n            recordVideoState: {} as any\n        }\n        switch (type) {\n            case 'LIVE_STOP':\n                data.liveClassState = state\n                break\n            case 'LIVE_START':\n                data.liveClassState = state\n                break\n            case 'LIVE_CLOSE':\n                data.liveClassState = state\n                break\n            case 'LIVE_START_RECORD':\n                data.recordVideoState = state\n                break\n            case 'LIVE_STOP_RECORD':\n                data.recordVideoState = state\n                break\n        }\n        this.state = {\n            ...this.state,\n            ...data\n        }\n        console.log('this.state',this.state);\n        this.commit(this.state);\n    }\n\n}\n\nexport const socketStore = new SocketStore();\nwindow.socketStore = socketStore;\n","import React from 'react';\nimport Icon from \"./whiteboard/tools\";\nimport { Popover } from 'antd';\n\nexport default function ({data, icon, disable, className, onClick, active}: any) {\n  let iconClass = disable ? '' : (icon ? 'icon-btn' : 'icon');\n  iconClass = active ? iconClass + \" active\" : iconClass;\n  let dataName = data ? data : ''\n\n  const getPositionAndPopover=()=>{\n    let needHover = false\n    let chName = null\n    let position = 'right'\n    const tools = [\n      {\n        name: 'selector',\n        ch:'箭头'\n      },\n      {\n        name: 'pencil',\n        ch:'笔'\n      },\n      {\n        name: 'rectangle',\n        ch:'矩形'\n      },\n      {\n        name: 'ellipse',\n        ch:'圆形'\n      },\n      {\n        name: 'text',\n        ch:'打字'\n      },\n      {\n        name: 'eraser',\n        ch:'橡皮擦'\n      },\n      {\n        name: 'color_picker',\n        ch:'颜色'\n      },\n      {\n        name: 'add',\n        ch:'添加白板页面'\n      },\n      {\n        name: 'upload',\n        ch:'上传课件'\n      },\n      {\n        name: 'hand_tool',\n        ch:'移动'\n      },\n    ]\n\n    const navPage = [\n      {\n        name:'first_page',\n        ch:'第一页'\n      },\n      {\n        name:'last_page',\n        ch:'最尾页'\n      },\n      {\n        name:'prev_page',\n        ch:\"上一页\"\n      },\n      {\n        name:'next_page',\n        ch:\"下一页\"\n      }\n    ]\n\n    tools.forEach(item=>{\n      if(item.name === data){\n        needHover = true\n        chName = item.ch\n        position = \"right\"\n      }\n    })\n\n    navPage.forEach(item=>{\n      if(item.name === data){\n        needHover = true\n        chName = item.ch\n        position = \"top\"\n      }\n    })\n    return {\n      position,chName,needHover\n    }\n  }\n\n  const { position ,chName, needHover} = getPositionAndPopover()\n\n\n\n  return (\n      <div>\n        {needHover?\n            position==='right'?\n            <Popover content={chName} trigger=\"hover\" placement=\"right\">\n              <div className={`${iconClass} ${className}`} onClick={onClick} data-name={dataName}></div>\n            </Popover>\n                :\n              <Popover content={chName} trigger=\"hover\" placement=\"top\">\n                <div className={`${iconClass} ${className}`} onClick={onClick} data-name={dataName}></div>\n              </Popover>\n            :\n            <div className={`${iconClass} ${className}`} onClick={onClick} data-name={dataName}></div>\n        }\n\n      </div>\n\n\n  )\n}\n","import React from 'react';\nimport { Button } from '@material-ui/core';\nexport default function (props: any) {\n  return (\n    <Button variant=\"contained\" className={props.className ? props.className : 'custom-button'} color=\"primary\" onClick={props.onClick}>\n      {props.name}\n    </Button>\n  )\n}","import React from 'react';\nimport { Select, InputLabel, MenuItem } from '@material-ui/core';\nimport { t } from '../utils/i18n';\n\nexport interface FormSelectItems {\n  text: string\n}\n\nexport interface FormSelect {\n  items: FormSelectItems[]\n  Label: string\n  value: any\n  onChange: (evt: any) => any\n}\n\nconst FormSelect: React.FC<FormSelect> = ({\n  Label,\n  value,\n  onChange,\n  items\n}) => {\n  return (\n    <>\n      <InputLabel>{Label}</InputLabel>\n      <Select\n        value={value}\n        onChange={onChange}\n      >\n        {items.map((item: any, key: number) => \n          <MenuItem key={key} value={key}>{item.text}</MenuItem>\n        )}\n      </Select>\n    </>\n  );\n}\n\nexport default React.memo(FormSelect);","import React, {useEffect} from 'react';\nimport Icon from '../icon';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Slider from '@material-ui/core/Slider';\n\nimport './index.scss';\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    marginTop: '8px',\n  },\n  sliderClass: {\n    color: '#44A2FC',\n    minWidth: '210px',\n    marginLeft: '6px'\n  }\n});\n\ninterface SliderProps {\n  volume: number\n  onChange: (volume: number) => void\n}\n\nexport default function ContinuousSlider(props: SliderProps) {\n  const classes = useStyles(props);\n  const [value, setValue] = React.useState<number>(props.volume);\n\n  const handleChange = (event: any, newValue: any) => {\n    setValue(newValue);\n  };\n\n  useEffect(() => {\n    props.onChange(value);\n  }, [value]);\n\n  return (\n    <div className=\"volume-container\">\n      <div className={classes.root}>\n        <Icon className=\"icon-speaker\" disable/>\n        <Slider className={classes.sliderClass} value={value} onChange={handleChange} aria-labelledby=\"continuous-slider\" />\n      </div>\n    </div>\n  );\n}","import React from 'react';\nimport Icon from '../icon';\nimport {makeStyles} from '@material-ui/core/styles';\n\nimport './index.scss';\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    marginTop: '8px',\n  },\n  sliderClass: {\n    color: '#44A2FC',\n    minWidth: '210px',\n    marginLeft: '6px',\n  },\n  sliderRailClass: {\n    height: '12px',\n    color: '#44A2FC'\n  },\n  sliderMarkClass: {\n    height: '12px',\n    color: '#CCCCCC'\n  }\n});\n\nconst totalVolumes = 52;\n\nfunction CustomSlider(props: any) {\n  return (\n    <div className=\"voice-sliders\">\n      {[...Array(totalVolumes)].map((e: any, key: number) => <span className={props.volume > key ? \"active\" : \"\"} key={key}></span>)}\n    </div>\n  )\n}\n\nfunction VoiceSlider(props: any) {\n  const classes = useStyles(props);\n  const volume = props.volume;\n\n  return (\n    <div className={classes.root}>\n      <Icon className=\"icon-voice\" disable />\n      <CustomSlider volume={volume * totalVolumes} className={classes.sliderClass} />\n    </div>\n  );\n}\n\nexport default function (props: any) {\n  return (\n    <div className=\"volume-container\">\n      <VoiceSlider volume={props.volume}/>\n    </div>\n  )\n}","const FETCH_TIMEOUT = 5000\n\nexport async function AgoraFetch (input: RequestInfo, init?: RequestInit): Promise<any> {\n  return new Promise((resolve, reject) => {\n    fetch(input, init).then(resolve, reject)\n    if (FETCH_TIMEOUT) {\n      const err = new Error(\"request timeout\")\n      setTimeout(reject, FETCH_TIMEOUT, err)\n    }\n  })\n}","import {get, isEmpty} from 'lodash';\nimport { AgoraFetch } from '../utils/fetch';\nimport GlobalStorage from '../utils/custom-storage';\n\nconst isDev = process.env.NODE_ENV !== 'production' ? true : false;\nconst url = isDev ? `${window.location.protocol}//${window.location.host}/dev/v2/project/%s/rtm` : process.env.REACT_APP_AGORA_RTM_SERVICE_ENDPOINT as string || \"\";\nconst PREFIX = url.replace('%s', process.env.REACT_APP_AGORA_APP_ID as string);\n\ntype queryChannelMessage = {\n  rid: string,\n  startTime: string,\n  endTime: string\n}\n\ntype AgoraChannelMessage = {\n  dst: string\n  message_type: string\n  ms: number\n  payload: string\n  src: string\n}\n\nexport class RTMRestful {\n  startTime: number\n  endTime: number\n  source: string\n  destination: string\n  customerId: string\n  appSecret: string\n  totalCount: number\n  offset: number\n  limit: number\n\n  constructor(customerId: string, appSecret: string) {\n    this.startTime = 0\n    this.endTime = 0\n    this.source = ''\n    this.destination = ''\n    this.customerId = customerId\n    this.appSecret = appSecret\n    this.totalCount = 0\n    this.offset = 0\n    this.limit = 100\n    // this.agoraAppId = appId\n  }\n\n  private basicAuthorization(): string {\n    const plainCredentials = `${this.customerId}:${this.appSecret}`;\n    return `Basic ${btoa(plainCredentials)}`;\n  }\n\n  async fetchChannelMessageCount({rid, startTime, endTime}: queryChannelMessage) {\n    const response: Response = await AgoraFetch(`${PREFIX}/message/history/count?destination=${rid}&start_time=${startTime}&end_time=${endTime}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: this.basicAuthorization(),\n      },\n    });\n    const json = await response.json();\n    const count = get(json, 'count');\n    this.totalCount = count;\n    this.offset = 0;\n    this.limit = 100;\n    return count;\n  }\n\n  async fetchChannelMessages({\n    rid, startTime, endTime\n  }: queryChannelMessage): Promise<AgoraChannelMessage[]> {\n    const responseA: Response = await AgoraFetch(`${PREFIX}/message/history/query`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: this.basicAuthorization(),\n      },\n      body: JSON.stringify({\n          filter: {\n            source: \"\",\n            destination: rid,\n            start_time: startTime,\n            end_time: endTime\n          },\n          offset: this.offset,\n          limit: this.limit,\n          order: \"asc\"\n        })\n    });\n    const jsonA = await responseA.json();\n    const location = get(jsonA, 'location');\n    if (isEmpty(location)) {\n      throw `location from agora rtm endpoint must be present`\n    }\n    const respB = await AgoraFetch(`${PREFIX}/message/history/query/${location.replace('~/rtm/message/history/query/', '')}`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: this.basicAuthorization(),\n      },\n    });\n    const jsonB = await respB.json();\n    const messages = get(jsonB, 'messages');\n    return messages;\n  }\n\n  async getAllChannelMessages(params: queryChannelMessage) {\n    let count = await this.fetchChannelMessageCount(params);\n    if (count === 0) {\n      return {\n        count: 0,\n        messages: []\n      }\n    }\n    let totalCount = this.totalCount;\n    let channelMessages: AgoraChannelMessage[] = [];\n    while (totalCount > 0) {\n      const messages = await this.fetchChannelMessages(params);\n      channelMessages = channelMessages.concat(...messages);\n      if (totalCount >= messages.length) {\n        totalCount = totalCount - messages.length;\n        this.offset = channelMessages.length;\n        this.limit = 100;\n      }\n    }\n    console.log(\"getAllChannelMessages, channelMessages: \", channelMessages);\n    GlobalStorage.save('channelMessages', channelMessages);\n    return GlobalStorage.read('channelMessages');\n  }\n}\n\n//@ts-ignore\nwindow.RTMRestful = new RTMRestful(process.env.REACT_APP_AGORA_CUSTOMER_ID as string, process.env.REACT_APP_AGORA_CUSTOMER_CERTIFICATE as string);","import {get} from 'lodash';\nimport { WhiteWebSdk, ReplayRoomParams, PlayerCallbacks } from 'white-web-sdk';\nimport { AgoraFetch } from '../utils/fetch';\n\nconst createRoomApi = process.env.REACT_APP_NETLESS_APP_API_ENTRY as string;\nconst joinRoomApi = process.env.REACT_APP_NETLESS_APP_JOIN_API;\nconst sdkToken = process.env.REACT_APP_NETLESS_APP_TOKEN;\n\nexport const WhiteboardAPI = {\n  async createRoom ({rid, limit, mode}: any) {\n    let response = await AgoraFetch(`${createRoomApi}${sdkToken}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: rid,\n        limit,\n        mode\n      })\n    });\n    let json = await response.json();\n    return {\n      uuid: get(json, 'msg.room.uuid'),\n      roomToken: get(json, 'msg.roomToken')\n    }\n  },\n\n  async joinRoom (uuid: string, rid?: string): Promise<any> {\n    let response = await AgoraFetch(\n      `${joinRoomApi}${sdkToken}&uuid=${uuid}`, {\n        method: 'POST',\n        headers: {\n          \"content-type\": \"application/json\",\n        }\n      }\n    );\n    let json = await response.json();\n    return {\n      uuid: uuid,\n      roomToken: get(json, 'msg.roomToken')\n    }\n  },\n\n  async replayRoom(client: WhiteWebSdk, args: ReplayRoomParams, callback: PlayerCallbacks) {\n    let retrying;\n    do {\n      try {\n        let result = await client.replayRoom({\n          beginTimestamp: args.beginTimestamp,\n          duration: args.duration,\n          room: args.room,\n          mediaURL: args.mediaURL,\n          roomToken: args.roomToken,\n        }, callback);\n        retrying = false;\n        return result;\n      } catch (err) {\n        retrying = true;\n      }\n    } while (retrying);\n  }\n}","import { AgoraFetch } from \"../utils/fetch\";\n\nconst url = process.env.REACT_APP_AGORA_RECORDING_SERVICE_URL as string;\nconst PREFIX = url.replace('%s', process.env.REACT_APP_AGORA_APP_ID as string);\n\nexport class RecordOperator {\n  private readonly agoraAppId: string;\n  private readonly customerId: string;\n  private readonly customerCertificate: string;\n  private readonly channelName: string;\n  private readonly mode: string;\n  private readonly recordingConfig: any;\n  private readonly storageConfig: any;\n  private recordId?: string;\n  public resourceId?: string;\n  private readonly uid: string;\n  private readonly token: string | undefined = undefined;\n  public constructor(\n      rtcBaseConfig: {\n          agoraAppId: string,\n          customerId: string,\n          customerCertificate: string,\n          channelName: string,\n          mode: string,\n          token: string | undefined,\n          uid: string,\n      },\n      recordingConfig: any,\n      storageConfig: any,\n      ) {\n      this.agoraAppId = rtcBaseConfig.agoraAppId;\n      this.customerId = rtcBaseConfig.customerId;\n      this.customerCertificate = rtcBaseConfig.customerCertificate;\n      this.channelName = rtcBaseConfig.channelName;\n      this.recordingConfig = recordingConfig;\n      this.storageConfig = storageConfig;\n      this.mode = rtcBaseConfig.mode;\n      this.uid = rtcBaseConfig.uid;\n      this.token = rtcBaseConfig.token;\n  }\n\n  public async acquire(): Promise<void> {\n    let response = await AgoraFetch(`${PREFIX}/v1/apps/${this.agoraAppId}/cloud_recording/acquire`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: this.basicAuthorization(this.customerId, this.customerCertificate),\n      },\n      body: JSON.stringify({\n        cname: this.channelName,\n        uid: this.uid,\n        clientRequest: {},\n      })\n    });\n    const res = await response.json();\n    if (typeof res.resourceId === \"string\") {\n      this.resourceId = res.resourceId;\n    } else {\n      throw {\n        recordingErr: {\n          message: 'acquire recording failed',\n        },\n        reason: 'resourceId is invalid',\n      }\n    }\n  }\n\n  public async release(): Promise<void> {\n      this.resourceId = undefined;\n      this.recordId = undefined;\n  }\n\n\n  public async start(): Promise<any> {\n    if (this.resourceId === undefined) {\n      throw {\n        recordingErr: {\n          message: 'start recording failed',\n        },\n        reason: 'resourceId is undefined',\n      }\n    }\n    const response = await AgoraFetch(`${PREFIX}/v1/apps/${this.agoraAppId}/cloud_recording/resourceid/${this.resourceId}/mode/${this.mode}/start`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: this.basicAuthorization(this.customerId, this.customerCertificate),\n      },\n      body: JSON.stringify({\n        cname: this.channelName,\n        uid: this.uid,\n        clientRequest: {\n          token: this.token,\n          recordingConfig: this.recordingConfig,\n          storageConfig: this.storageConfig,\n        },\n      })\n    });\n    const res = await response.json();\n    if (typeof res.sid === \"string\") {\n        this.recordId = res.sid;\n    } else {\n      throw {\n        recordingErr: {\n          message: 'start recording failed',\n        },\n        reason: 'recordId is invalid',\n      }\n    }\n    return res;\n  }\n\n  public async stop(): Promise<any> {\n    if (this.resourceId === undefined) {\n      throw {\n        recordingErr: {\n          message: 'stop recording failed',\n        },\n        reason: 'resourceId is undefined',\n      }\n    }\n    if (this.recordId === undefined) {\n      throw {\n        recordingErr: {\n          message: 'stop recording failed',\n        },\n        reason: 'recordId is undefined',\n      }\n    }\n    try {\n        const response = await AgoraFetch(`${PREFIX}/v1/apps/${this.agoraAppId}/cloud_recording/resourceid/${this.resourceId}/sid/${this.recordId}/mode/${this.mode}/stop`,\n        {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: this.basicAuthorization(this.customerId, this.customerCertificate),\n          },\n          body: JSON.stringify({\n            cname: this.channelName,\n            uid: this.uid,\n            clientRequest: {},\n          })\n        });\n        const json = await response.json();\n        return json;\n    } catch (err) {\n        console.log(\"stop\", err);\n    } finally {\n        await this.release();\n    }\n  }\n\n  public async query(): Promise<any> {\n      if (this.resourceId === undefined) {\n          throw {\n            recordingErr: {\n              message: 'query recording failed',\n            },\n            reason: 'resourceId is undefined',\n          }\n      }\n      if (this.recordId === undefined) {\n        throw {\n          recordingErr: {\n            message: 'query recording failed',\n          },\n          reason: 'recordId is undefined',\n        }\n      }\n      const response = await AgoraFetch(`${PREFIX}/v1/apps/${this.agoraAppId}/cloud_recording/resourceid/${this.resourceId}/sid/${this.recordId}/mode/${this.mode}/query`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: this.basicAuthorization(this.customerId, this.customerCertificate),\n        },\n      })\n      const json = await response.json();\n      return json;\n  }\n\n  private basicAuthorization(appId: string, appSecret: string): string {\n      const plainCredentials = `${appId}:${appSecret}`;\n      return `Basic ${btoa(plainCredentials)}`;\n  }\n}","import { APP_ID } from './../utils/agora-rtm-client';\nimport { EventEmitter } from 'events';\nimport { videoPlugin } from '@netless/white-video-plugin';\nimport { audioPlugin } from '@netless/white-audio-plugin';\nimport { Room, WhiteWebSdk, DeviceType, SceneState, createPlugins, RoomPhase } from 'white-web-sdk';\nimport { Subject } from 'rxjs';\nimport { WhiteboardAPI, RecordOperator } from '../api';\nimport {Map} from 'immutable';\nimport GlobalStorage from '../utils/custom-storage';\nimport { isEmpty, get } from 'lodash';\nimport { roomStore } from './room';\nimport { handleRegion } from '../utils/helper';\nimport { globalStore } from './global';\nimport { t } from '../utils/i18n';\nimport {liveStore} from '../stores/live';\n\nconst ENABLE_LOG = process.env.REACT_APP_AGORA_LOG === 'true';\nconst RECORDING_UID = 1;\n\ninterface SceneFile {\n  name: string\n  type: string\n}\n\nexport interface CustomScene {\n  path: string\n  rootPath: string\n  file: SceneFile\n  type: string\n  current: boolean\n  currentPage: number\n  totalPage: number\n}\n\nexport interface SceneResource {\n  path: string\n  rootPath: string\n  file: SceneFile\n}\n\nconst pathName = (path: string): string => {\n  const reg = /\\/([^\\/]*)\\//g;\n  reg.exec(path);\n  if (RegExp.$1 === \"aria\") {\n      return \"\";\n  } else {\n      return RegExp.$1;\n  }\n}\n\nexport const plugins = createPlugins({\"video\": videoPlugin, \"audio\": audioPlugin});\n\nplugins.setPluginContext(\"video\", {identity: 'guest'});\nplugins.setPluginContext(\"audio\", {identity: 'guest'});\n\nexport type WhiteboardState = {\n  loading: boolean\n  joined: boolean\n  scenes: Map<string, CustomScene>\n  currentScenePath: string\n  currentHeight: number\n  currentWidth: number\n  dirs: SceneResource[]\n  activeDir: number\n  zoomRadio: number\n  scale: number\n  room: Room\n  recording: boolean\n  startTime: number\n  endTime: number\n}\n\ntype JoinParams = {\n  uuid: string\n  roomToken: string\n  userPayload: {\n    userId: string,\n    identity: string\n  }\n}\n\nexport class Whiteboard extends EventEmitter {\n  public state: WhiteboardState;\n  public subject: Subject<WhiteboardState> | null;\n  public defaultState: WhiteboardState = {\n    joined: false,\n    scenes: Map<string, CustomScene>(),\n    currentScenePath: '',\n    currentHeight: 0,\n    currentWidth: 0,\n    dirs: [],\n    activeDir: 0,\n    zoomRadio: 0,\n    scale: 0,\n    recording: false,\n    startTime: 0,\n    endTime: 0,\n    room: null,\n    loading: true,\n    ...GlobalStorage.read('mediaDirs'),\n  }\n\n  public readonly client: WhiteWebSdk = new WhiteWebSdk({\n    deviceType: DeviceType.Surface,\n    // handToolKey: \" \",\n    plugins,\n    loggerOptions: {\n      disableReportLog: ENABLE_LOG ? false : true,\n      reportLevelMask: \"info\",\n      printLevelMask: \"info\",\n    }\n  });\n\n  constructor() {\n    super();\n    this.subject = null;\n    this.state = this.defaultState;\n  }\n\n  initialize() {\n    this.subject = new Subject<WhiteboardState>();\n    this.state = {\n      ...this.defaultState,\n    }\n    this.subject.next(this.state);\n  }\n\n  subscribe(updateState: any) {\n    this.initialize();\n    this.subject && this.subject.subscribe(updateState);\n  }\n\n  unsubscribe() {\n    this.subject && this.subject.unsubscribe();\n    this.subject = null;\n  }\n\n  commit (state: WhiteboardState) {\n    this.subject && this.subject.next(state);\n  }\n\n  updateState(newState: WhiteboardState) {\n    this.state = {\n      ...this.state,\n      ...newState,\n    }\n    this.commit(this.state);\n  }\n\n  updateRoomState(file?: SceneFile) {\n    if (!this.state.room) return;\n    const roomState = this.state.room.state;\n\n    const path = roomState.sceneState.scenePath;\n    const ppt = roomState.sceneState.scenes[0].ppt;\n\n    const type = isEmpty(ppt) ? 'static' : 'dynamic';\n    const currentPage = roomState.sceneState.index;\n    const totalPage = roomState.sceneState.scenes.length;\n\n    if (type !== 'dynamic') {\n      this.state = {\n        ...this.state,\n        currentHeight: 0,\n        currentWidth: 0\n      }\n    } else {\n      this.state = {\n        ...this.state,\n        currentHeight: get(ppt, 'height', 0),\n        currentWidth: get(ppt, 'width', 0)\n      }\n    }\n\n    const _dirPath = pathName(path);\n    const dirPath = _dirPath === \"\" ? \"/init\" : `/${_dirPath}`;\n\n    const scenes = this.state.scenes.update(dirPath, (value: CustomScene) => {\n      console.log('filefilefile',file)\n      const sceneFile: SceneFile = {\n        name: 'whiteboard',\n        type: 'whiteboard'\n      }\n      if (file && dirPath !== \"/init\") {\n        sceneFile.name = file.name;\n        sceneFile.type = file.type;\n      }\n\n      const result = {\n        ...value,\n        path: dirPath,\n        type: type ? type : 'static',\n        currentPage,\n        totalPage,\n      }\n      if (!value || isEmpty(value.file)) {\n        result.file = sceneFile;\n      }\n      if (!value || isEmpty(value.rootPath)) {\n        result.rootPath = roomState.sceneState.scenePath\n      }\n      return result;\n    });\n\n    const _dirs: SceneResource[] = [];\n    scenes.forEach((it: CustomScene) => {\n      _dirs.push({\n        path: it.path,\n        rootPath: it.rootPath,\n        file: it.file\n      });\n    });\n\n    const currentDirIndex = _dirs.findIndex((it: SceneResource) => it.path === dirPath);\n\n    this.state = {\n      ...this.state,\n      scenes: scenes,\n      currentScenePath: dirPath,\n      dirs: _dirs,\n      activeDir: currentDirIndex !== -1 ? currentDirIndex : 0\n    }\n    this.commit(this.state);\n  }\n\n  setCurrentScene(dirPath: string) {\n    const currentDirIndex = this.state.dirs.findIndex((it: SceneResource) => it.path === dirPath);\n    this.state = {\n      ...this.state,\n      currentScenePath: dirPath,\n      activeDir: currentDirIndex !== -1 ? currentDirIndex : 0\n    }\n    this.commit(this.state);\n  }\n\n  updateSceneState(sceneState: SceneState) {\n    const path = sceneState.scenePath;\n    const currentPage = sceneState.index;\n    const totalPage = sceneState.scenes.length;\n    const _dirPath = pathName(path);\n    const dirPath = _dirPath === \"\" ? \"/init\" : `/${_dirPath}`;\n\n    const scenes = this.state.scenes.update(dirPath, (value) => {\n      return {\n        ...value,\n        currentPage,\n        totalPage,\n      }\n    });\n\n    this.state = {\n      ...this.state,\n      scenes,\n    }\n\n    this.commit(this.state);\n  }\n\n  updateScale(scale: number) {\n    this.state = {\n      ...this.state,\n      scale: scale\n    }\n\n    this.commit(this.state);\n  }\n\n  // 这个token信息通过服务端传输，所以注释了\n  // async connect(rid: string, uuid?: string) {\n  //   let retrying;\n  //   let time = 0;\n  //   let reason;\n  //   do {\n  //     try {\n  //       let res;\n  //       if (uuid) {\n  //         res = await WhiteboardAPI.joinRoom(uuid);\n  //       } else {\n  //         res = await WhiteboardAPI.createRoom({rid, limit: 100, mode: 'historied'});\n  //       }\n  //       retrying = false;\n  //       return res;\n  //     } catch(err) {\n  //       retrying = true;\n  //       time++;\n  //       reason = err;\n  //     }\n  //   } while(retrying && time < 3);\n  //   throw reason;\n  // }\n\n  updateLoading(value: boolean) {\n    this.state = {\n      ...this.state,\n      loading: value\n    }\n    this.commit(this.state);\n  }\n\n  async join({uuid, roomToken, userPayload}: JoinParams) {\n    await this.leave();\n    // const {uuid, roomToken} = await this.connect(rid, uid);\n    const identity = userPayload.identity === 'host' ? 'host' : 'guest';\n\n    plugins.setPluginContext(\"video\", {identity});\n    plugins.setPluginContext(\"audio\", {identity});\n\n    const room = await this.client.joinRoom({\n      uuid,\n      roomToken,\n      disableBezier: true,\n    }, {\n      onPhaseChanged: (phase: RoomPhase) => {\n        if (phase === RoomPhase.Connected) {\n          this.updateLoading(false);\n        } else {\n          this.updateLoading(true);\n        }\n        console.log(\"[White] onPhaseChanged phase : \", phase);\n      },\n      onRoomStateChanged: state => {\n        if (state.zoomScale) {\n          whiteboard.updateScale(state.zoomScale);\n        }\n        if (state.sceneState) {\n          whiteboard.updateRoomState();\n        }\n      },\n      onDisconnectWithError: error => {},\n      onKickedWithReason: reason => {},\n      onKeyDown: event => {},\n      onKeyUp: event => {},\n      onHandToolActive: active => {},\n      onPPTLoadProgress: (uuid: string, progress: number) => {},\n    });\n\n    await roomStore.updateWhiteboardUid(room.uuid);\n\n    this.state = {\n      ...this.state,\n      room: room\n    }\n    this.commit(this.state);\n  }\n\n  async leave() {\n    if (!this.state.room) return;\n    await this.state.room.disconnect();\n  }\n\n  async destroy() {\n    await this.leave();\n    this.state = {\n      ...this.defaultState,\n    }\n    this.commit(this.state);\n    this.removeAllListeners();\n  }\n\n  private operator: any = null;\n\n  async startRecording (token?: string) {\n    if (!this.state) return;\n    this.operator = new RecordOperator(\n      {\n        agoraAppId: APP_ID,\n        customerId: process.env.REACT_APP_AGORA_CUSTOMER_ID as string,\n        customerCertificate: process.env.REACT_APP_AGORA_CUSTOMER_CERTIFICATE as string,\n        channelName: roomStore.state.course.rid,\n        // WARN: here is cloud recording mode\n        mode: 'mix',\n        token,\n        uid: `${RECORDING_UID}`,\n      },\n      {\n        audioProfile: 1,\n        transcodingConfig: {\n            width: 240,\n            height: 180,\n            bitrate: 120,\n            fps: 15,\n            // \"mixedVideoLayout\": 1,\n            // \"maxResolutionUid\": \"1\",\n        },\n      },\n      {\n          vendor: 2,\n          region: handleRegion(process.env.REACT_APP_AGORA_OSS_BUCKET_REGION as string),\n          bucket: process.env.REACT_APP_AGORA_OSS_BUCKET_NAME as string,\n          accessKey: process.env.REACT_APP_AGORA_OSS_BUCKET_KEY as string,\n          secretKey: process.env.REACT_APP_AGORA_OSS_BUCKET_SECRET as string,\n      },\n    );\n    await this.operator.acquire();\n    await this.operator.start();\n    this.state = {\n      ...this.state,\n      recording: true,\n      startTime: +Date.now(),\n    };\n    this.commit(this.state);\n  }\n\n  async stopRecording () {\n    if (!this.state) return;\n    await this.operator.query();\n    const res = await this.operator.stop();\n    const mediaUrl = get(res, 'serverResponse.fileList');\n    this.state = {\n      ...this.state,\n      recording: false,\n      endTime: +Date.now(),\n    };\n    this.commit(this.state);\n    return mediaUrl;\n  }\n\n  clearRecording () {\n\n    const endTime = this.state.endTime;\n    const startTime = this.state.startTime;\n    const roomUUID = this.state.room.uuid;\n    this.state = {\n      ...this.state,\n      endTime: 0,\n      startTime: 0,\n      recording: false,\n    }\n    this.commit(this.state);\n\n    return {endTime, startTime, roomUUID};\n  }\n\n  async lock() {\n    const lockBoardStatus = Boolean(roomStore.state.me.lockBoard);\n    const lockBoard = lockBoardStatus ? 0 : 1;\n    console.log(lockBoard);\n    if (lockBoard) {\n      globalStore.showToast({\n        type: 'notice-board',\n        message: t('toast.whiteboard_lock')\n      });\n    } else {\n      globalStore.showToast({\n        type: 'notice-board',\n        message: t('toast.whiteboard_unlock')\n      });\n    }\n    await roomStore.updateMe({\n      ...roomStore.state.me,\n      lockBoard\n    });\n  }\n}\n\nexport const whiteboard = new Whiteboard();\n\nwindow.whiteboardStore = whiteboard\n","// 所有组件的顶层数据，都是通过这里进行Provider\nimport React, { useEffect, useRef } from 'react';\nimport { GlobalState, globalStore } from '../stores/global';\nimport { RoomState, roomStore } from '../stores/room';\nimport { LiveState, liveStore, Audience } from '../stores/live';\nimport { WhiteboardState, whiteboard } from '../stores/whiteboard';\nimport { SocketState, socketStore } from '../stores/socket';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { resolveChannelAttrs, jsonParse } from '../utils/helper';\nimport GlobalStorage from '../utils/custom-storage';\nimport { t } from '../utils/i18n';\nimport { removeClassCall } from '../utils/tool'\n\nexport type IRootProvider = {\n  globalState: GlobalState\n  roomState: RoomState\n  whiteboardState: WhiteboardState\n  liveState: LiveState\n  socketState: SocketState\n}\n\nexport interface IObserver<T> {\n  subscribe: (setState: (state: T) => void) => void\n  unsubscribe: () => void\n  defaultState: T\n}\n\n\nfunction useObserver<T>(store: IObserver<T>) {\n  // 声明一个state\n  const [state, setState] = React.useState<T>(store.defaultState);\n\n  React.useEffect(() => {\n    // 更新\n    store.subscribe((state: any) => {\n      setState(state);\n    });\n    return () => {\n      store.unsubscribe();\n    }\n  }, [store]);\n\n  return state;\n}\n\n\nexport const RootContext = React.createContext({} as IRootProvider);\n\nexport const useStore = () => {\n  const context = React.useContext(RootContext)\n  if (context === undefined) {\n    throw new Error('useStore must be used within a RootProvider');\n  }\n  return context;\n}\n\nexport const useGlobalState = () => {\n  return useStore().globalState;\n}\n\nexport const useRoomState = () => {\n  return useStore().roomState;\n}\n\nexport const useWhiteboardState = () => {\n  return useStore().whiteboardState;\n}\n\n\nexport const useSocketState = () => {\n  return useStore().socketState;\n}\n\nexport const RootProvider: React.FC<any> = ({ children }) => {\n  const globalState = useObserver<GlobalState>(globalStore);\n  const roomState = useObserver<RoomState>(roomStore);\n  const whiteboardState = useObserver<WhiteboardState>(whiteboard);\n  const liveState = useObserver<LiveState>(liveStore);\n  const socketState = useObserver<SocketState>(socketStore);\n\n  const history = useHistory();\n\n  const ref = useRef<boolean>(false);\n\n  useEffect(() => {\n    return () => {\n      ref.current = true;\n    }\n  }, []);\n\n  const value = {\n    globalState,\n    roomState,\n    whiteboardState,\n    liveState,\n    socketState\n  }\n\n  useEffect(() => {\n    if (!roomStore.state.rtm.joined) return;\n    const rtmClient = roomStore.rtmClient;\n    // https://docs.agora.io/cn/Real-time-Messaging/API%20Reference/RTM_web/interfaces/rtmevents.rtmclientevents.html#connectionstatechanged\n    rtmClient.on('ConnectionStateChanged', ({ newState, reason }: { newState: string, reason: string }) => {\n      // 通知 SDK 与 Agora RTM 系统的连接状态发生了改变。\n      console.log('reasonreasonreason', reason);\n      console.log(`newState: ${newState} reason: ${reason}`);\n      if (reason === 'LOGIN_FAILURE') {\n        globalStore.showToast({\n          type: 'rtmClient',\n          message: t('toast.login_failure'),\n        });\n        window.location.replace(`/#/`)\n        \n        return;\n      }\n      if (reason === 'REMOTE_LOGIN' || newState === 'ABORTED') {\n        globalStore.showToast({\n          type: 'rtmClient',\n          message: t('toast.kick'),\n        });\n        window.location.replace(`/#/`)\n        return;\n      }\n    });\n\n\n    // https://docs.agora.io/cn/Real-time-Messaging/API%20Reference/RTM_web/interfaces/rtmevents.rtmchannelevents.html#attributesupdated\n    rtmClient.on(\"AttributesUpdated\", (attributes: object) => {\n\n      const channelAttrs = resolveChannelAttrs(attributes);\n      console.log('[rtm-client] updated resolved attrs', channelAttrs);\n      console.log('[rtm-client] updated origin attributes', attributes);\n      roomStore.updateRoomAttrs(channelAttrs)\n    });\n    rtmClient.on(\"MemberJoined\", (memberId: string) => {\n      // 收到用户加入频道的通知。\n      // 当频道成员超过 512 时，该回调失效。\n      // TODO: 需要自己处理逻辑\n      // console.error(\"MemberJoined\",memberId)\n      const { onlineIds } =  liveStore.state;\n      const index = onlineIds.findIndex(k => k +'' === memberId)\n      if(index === -1){\n        onlineIds.push(memberId)\n        liveStore.setOnlineIds(onlineIds)\n      }\n      liveStore.setAudienceListLeaveOrJoin(memberId,true)\n      console.log(\"[users join]\",index, onlineIds,memberId )\n    \n    });\n    rtmClient.on(\"MemberLeft\", (memberId: string) => {\n      // 收到用户离开频道的通知。\n      // 当频道成员超过 512 时，该回调失效。\n      // \n      const { onlineIds } =  liveStore.state;\n      const index = onlineIds.findIndex(k => k +'' === memberId)\n      if(index > -1){\n        onlineIds.splice( index,1)\n        liveStore.setOnlineIds(onlineIds)\n      }\n      liveStore.setAudienceListLeaveOrJoin(memberId,false)\n      console.log(\"[users leave]\",index, onlineIds,memberId )\n      if (roomStore.state.applyUid === +memberId) {\n        roomStore.updateCourseLinkUid(0)\n          .then(() => {\n            globalStore.removeNotice();\n          }).catch(console.warn);\n      }\n    });\n    rtmClient.on(\"MemberCountUpdated\", (count: number) => {\n      // 频道成员人数更新回调。返回最新频道成员人数。\n      // 频道成员人数 ≤ 512 时，最高触发频率为每秒 1 次。\n      // 频道成员人数超过 512 时，最高触发频率为每 3 秒 1 次。\n      // 用户在成功加入频道时会收到该回调。你可以通过监听该回调获取加入频道时的频道成员人数和后继人数更新。\n      \n      !ref.current && roomStore.updateMemberCount(count);\n    });\n    rtmClient.on(\"ChannelMessage\", ({ memberId, message }: { message: { text: string }, memberId: string }) => {\n      // 收到频道消息的事件通知。\n      const msg = jsonParse(message.text);\n      const type = (msg.action && msg.action.type) || ''\n      console.log('msg.content', memberId, msg)\n      if (type === 'closeRoom') {\n        console.log('关闭3')\n        // 关闭直播间 广播\n        roomStore.exitAll()\n        window.location.href = process.env.REACT_APP_API_DOMAIN + '/#/message'\n      } else if (type === 'handoff' && !msg.receiver) {\n        //  取消所有人的举手逻辑\n        const handOffMessage = {\n          account: msg.account,\n          ts: +Date.now(),\n          id: memberId,\n          timestamp: msg.timestamp,\n          sender: {\n            id: msg.sender.id,\n            avatar: msg.sender.avatar,\n            name: msg.sender.account\n          },\n          action: msg.action\n        }\n        console.log(\"[rtmClient] ChannelMessage handoff\", msg);\n        roomStore.updateChannelMessage(handOffMessage);\n      } else if (type === 'handoff' && msg.receiver) {\n        //  个人取消举手逻辑\n        const handOffMessage = {\n          account: msg.account,\n          ts: +Date.now(),\n          id: memberId,\n          timestamp: msg.timestamp,\n          sender: {\n            id: msg.sender.id,\n            avatar: msg.sender.avatar,\n            name: msg.sender.account\n          },\n          receiver: {\n            id: msg.receiver.uid\n          },\n          action: msg.action\n        }\n        // 系统提醒\n        // let systemMessage = {\n        //   timestamp: 0,\n        //   sender: {\n        //     id: '',\n        //     avatar: '',\n        //     name: ''\n        //   },\n        //   message: {\n        //     type: 'text',\n        //     text: `${msg.account} 取消举手`,\n        //   },\n        //   isSystem: true\n        // }\n\n        // liveStore.setMessageList(systemMessage)\n        roomStore.updateChannelMessage(handOffMessage);\n      } else if (type === 'handoff') {\n        //  老师取消个人的举手逻辑，这个暂时不需要\n        const handSingOffMessage = {\n          account: msg.account,\n          ts: +Date.now(),\n          id: memberId,\n          timestamp: msg.timestamp,\n          sender: {\n            id: msg.sender.id,\n            avatar: msg.sender.avatar,\n            name: msg.sender.account\n          },\n          action: msg.action,\n          receiver: {\n            id: msg.receiver.uid\n          },\n        }\n        roomStore.updateChannelMessage(handSingOffMessage);\n      } else if (type === 'handup') {\n\n        //  个人的举手逻辑\n        const handUpMessage = {\n          account: msg.account,\n          ts: +Date.now(),\n          id: memberId,\n          timestamp: msg.timestamp,\n          sender: {\n            id: msg.sender.id,\n            avatar: msg.sender.avatar,\n            name: msg.sender.account\n          },\n          action: msg.action,\n          receiver: {\n            id: msg.receiver.uid\n          },\n          isSystem: true\n        }\n        \n        // 系统提醒\n        // let systemMessage = {\n        //   timestamp: 0,\n        //   sender: {\n        //     id: '',\n        //     avatar: '',\n        //     name: ''\n        //   },\n        //   message: {\n        //     type: 'text',\n        //     text: `${msg.account}举手`,\n        //   },\n        //   isSystem: true\n        // }\n\n        // liveStore.setMessageList(systemMessage)\n        roomStore.updateChannelMessage(handUpMessage);\n      } else if (type === 'openTopic' || type === 'closeTopic') {\n        // 开关讨论\n        let discussionStatus = !(type === 'openTopic')\n\n        liveStore.setDiscussionStatus(discussionStatus)\n\n        console.log('我我我观众', liveStore.state.discussionStatus)\n\n        let text = type === 'openTopic' ? '老师开启讨论' : '老师关闭讨论'\n\n        let paramObj = {\n          timestamp: 0,\n          sender: {\n            id: '',\n            avatar: '',\n            name: ''\n          },\n          message: {\n            type: 'text',\n            text: text,\n          },\n          isSystem: true\n        }\n        liveStore.setMessageList(paramObj)\n        console.log(\"[rtmClient] ChannelMessage handoff\", paramObj);\n\n      } else if (type === \"mute\" || type === \"cancelMute\") {\n        console.log('禁言第三步骤',msg)\n        let list = liveStore.state.audienceList\n\n        if (msg.receiver) {\n          // 主播是否禁言某个人 senderId是自己 receiveId某个人 用sendMessage广播\n          console.log('主播是否禁言某个人 senderId是自己 receiveId某个人 用sendMessage广',msg,liveStore.me.uid)\n          if (msg.receiver.id === liveStore.me.uid) {\n            if (type === \"mute\") {\n              roomStore.mute(msg.receiver.id, 'audio')\n            } else {\n              roomStore.unmute(msg.receiver.id, 'audio')\n            }\n          }\n          list.some((val: Audience) => {\n            if (val.uid === msg.receiver.id) {\n              // 主播操作 设置 forbiddenWord 自己操作设置 broadcast \n              val.broadcast = type === \"mute\" ? false : true\n              // 调用 RTC 开启关闭语音api\n              return val.uid === msg.receiver.id\n            }\n          })\n        } else {\n          // 一键禁言 有没有一键取消禁言？？？？val.broadcast = false\n          list.forEach(val => {\n            val.online && (val.broadcast = false);\n          })\n          console.log('一键禁言 有没有一键取消禁言？？？？val.broadcast = false', value.roomState.me)\n          roomStore.mute(liveStore.me.uid+ '', 'audio')\n\n          let paramObj = {\n            timestamp: 0,\n            sender: {\n              id: '',\n              avatar: '',\n              name: ''\n            },\n            message: {\n              type: 'text',\n              text: '老师要求全体禁言',\n            },\n            isSystem: true\n          }\n          liveStore.setMessageList(paramObj)\n        }\n\n        liveStore.setAudienceList(list)\n\n        const onlineList = list.filter(val => val.online)\n        const forbidden = onlineList.every(val => !val.broadcast)\n        liveStore.setAllForbidden(forbidden)\n      } else {\n        // 文字广播\n        let msgObj = msg\n        console.log('文字广播',msg.sender.name)\n        msgObj.sender.name = removeClassCall(msg.sender.name)\n        liveStore.setMessageList(msgObj)\n      }\n    });\n    return () => {\n      rtmClient.removeAllListeners();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [roomStore.state.rtm.joined]);\n\n  const location = useLocation();\n\n  useEffect(() => {\n    if (location.pathname === '/') {\n      return;\n    }\n\n    const room = value.roomState;\n    GlobalStorage.save('agora_room', {\n      me: room.me,\n      course: room.course,\n      mediaDevice: room.mediaDevice,\n    });\n    GlobalStorage.save('language', value.globalState.language);\n    // WARN: DEBUG ONLY MUST REMOVED IN PRODUCTION\n\n    window.room = roomState;\n    window.globalState = globalState;\n    window.whiteboard = whiteboardState;\n    window.liveState = liveState\n    window.socketState = socketState\n  }, [value, location, roomState, globalState, whiteboardState, liveState, socketState]);\n  return (\n    <RootContext.Provider value={value}>\n      {children}\n    </RootContext.Provider>\n  )\n}\n","import { useState, useMemo, useRef } from 'react'\nimport { useRoomState } from '../containers/root-container'\nimport { roomStore } from '../stores/room'\nimport localStore from '../utils/local-store'\nimport { LocalKey } from '../utils/local-store'\nimport { liveStore } from '../stores/live'\n\nexport default function useChatText() {\n  const [value, setValue] = useState('')\n\n  const roomState = useRoomState()\n\n  const roomName = roomState.course.roomName\n\n  const me = roomState.me\n\n  const role = me.role\n\n  const messages = useMemo(() => {\n    return roomState.messages\n  }, [roomState.messages])\n\n  const lock = useRef<boolean>(false)\n\n  const rtmClient = roomStore.rtmClient\n\n  const sendMessage = async (content: string, others?: any) => {\n    if (rtmClient && me.uid) {\n      if (\n        me.role !== 'teacher' &&\n        (!me.chat || Boolean(roomState.course.muteChat))\n      )\n        return console.warn('chat already muted')\n      if (me.role === 'teacher' && !me.chat)\n        return console.warn('chat already muted')\n      console.log(others, 8888)\n      const type = (others && others.type) || ''\n      switch (type) {\n        case 'closeRoom':\n          console.log('关闭1')\n          let closeRoom = {\n            sender: {\n              id: me.uid,\n              avatar: me.avatar,\n              name: me.account\n            },\n            action: {\n              type: 'closeRoom'\n            }\n          }\n          await rtmClient.sendChannelMessage(JSON.stringify(closeRoom))\n          window.location.href = process.env.REACT_APP_API_DOMAIN + '/#/message'\n          break;\n        // 主播取消全部举手 senderId是自己 receiveId不传\n        case 'handoff':\n          let handoff = {\n            account: me.account,\n            content,\n            timestamp: new Date().getTime(),\n            sender: {\n              id: me.uid,\n              avatar: me.avatar,\n              name: me.account\n            },\n            action: {\n              type: 'handoff'\n            }\n          }\n          await rtmClient.sendChannelMessage(JSON.stringify(handoff))\n          roomStore.updateChannelMessage(handoff)\n          break\n        // 主播取消个人的举手 handsingoff\n        // case 'handsingoff':\n        //   let handsingoff = {\n        //     account: me.account,\n        //     timestamp: (new Date()).getTime(),\n        //     sender: {\n        //       id: me.uid + '',\n        //       avatar: me.avatar,\n        //       name: me.account\n        //     },\n        //     action: {\n        //       type: 'handoff'\n        //     },\n        //     receiver: {\n        //       id: others.uid\n        //     }\n        //   }\n        //   await rtmClient.sendChannelMessage(JSON.stringify(handsingoff));\n        //   roomStore.updateChannelMessage(handsingoff);\n        //   setValue('');\n        //   break;\n        // 观众举手 senderId是自己 receiveId也是自己\n        case 'handup':\n          let handup = {\n            account: me.account,\n            content,\n            timestamp: new Date().getTime(),\n            sender: {\n              id: me.uid,\n              avatar: me.avatar,\n              name: me.account\n            },\n            action: {\n              type: 'handup'\n            },\n            receiver: {\n              id: me.uid\n            }\n          }\n          await rtmClient.sendChannelMessage(JSON.stringify(handup))\n          roomStore.updateChannelMessage(handup)\n          break\n        // 观众取消举手 senderId是自己 receiveId也是自己\n        case 'studenthandoff':\n          let studenthandoff = {\n            account: me.account,\n            content,\n            timestamp: new Date().getTime(),\n            sender: {\n              id: me.uid,\n              avatar: me.avatar,\n              name: me.account\n            },\n            action: {\n              type: 'handoff'\n            },\n            receiver: {\n              id: me.uid\n            }\n          }\n          await rtmClient.sendChannelMessage(JSON.stringify(studenthandoff))\n          roomStore.updateChannelMessage(studenthandoff)\n          break\n        case 'openTopic':\n        case 'closeTopic':\n          // 开关讨论\n          let topic = {\n            account: me.account,\n            content,\n            sender: {\n              id: me.uid,\n              avatar: me.avatar,\n              name: me.account\n            },\n            action: {\n              type: type\n            }\n          }\n          await rtmClient.sendChannelMessage(JSON.stringify(topic))\n\n          const topicMessage = {\n            account: me.account,\n            id: me.uid,\n            ts: +Date.now(),\n            action: {\n              type: type\n            },\n            sender: {\n              id: me.uid,\n              avatar: me.avatar,\n              name: me.account\n            }\n          }\n          roomStore.updateChannelMessage(topicMessage)\n          break\n        case 'mute':\n        case 'cancelMute':\n          //禁言 取消禁言\n          if (others.uid) {\n            // 主播是否禁言某个人 senderId是自己 receiveId某个人 用sendMessage广播\n            // 观众开麦 senderId是自己 receiveId也是自己 用 sendmessage广播。观众关麦 senderId是自己 receiveId也是自己 用sendmessage广播。\n            let mute = {\n              sender: {\n                id: me.uid,\n                avatar: me.avatar,\n                name: me.account\n              },\n              timestamp: new Date().getTime(),\n              action: {\n                type: type\n              },\n              receiver: {\n                // others.uid === me.uid 代表是观众自己开麦\n                id: others.uid\n              },\n              isSelf: others.uid === me.uid\n            }\n            console.log('禁言第1步骤', mute)\n            await rtmClient.sendChannelMessage(JSON.stringify(mute))\n            roomStore.updateChannelMessage(mute)\n          } else {\n            // 一键禁言\n            let mute = {\n              sender: {\n                id: me.uid,\n                avatar: me.avatar,\n                name: me.account\n              },\n              timestamp: new Date().getTime(),\n              action: {\n                type: type\n              }\n            }\n            await rtmClient.sendChannelMessage(JSON.stringify(mute))\n            roomStore.updateChannelMessage(mute)\n          }\n          break\n        default:\n          console.log('锁住', lock.current)\n          if (lock.current) return\n          lock.current = true\n          let list = liveStore.state.audienceList\n          let objList = list.filter(val=>val.uid === me.uid)\n          let avatar = me.avatar\n          let name = me.account\n          if (objList.length>0) {\n            avatar = objList[0].avatar\n            name = objList[0].name\n          }\n          console.log('卫冕战',objList,me)\n          // 文字聊天协议\n          let paramObj1 = {\n            timestamp: new Date().getTime(),\n            sender: {\n              id: me.uid,\n              avatar: avatar,\n              name: name\n            },\n            message: {\n              type: 'text',\n              text: content\n            },\n            isSystem: false\n          }\n          await rtmClient.sendChannelMessage(JSON.stringify(paramObj1))\n          roomStore.updateChannelMessage(paramObj1)\n          setValue('')\n          lock.current = false\n          break\n      }\n    }\n  }\n\n  const handleChange = (evt: any) => {\n    setValue(evt.target.value.slice(0, 200))\n  }\n  \n\n  return {\n    role,\n    messages,\n    sendMessage,\n    value,\n    handleChange,\n    roomName\n  }\n}\n","import React, { useRef, useEffect, useState } from 'react';\nimport Icon from '../icon';\nimport './index.scss';\nimport { useRoomState } from '../../containers/root-container';\n\nimport handsUpImg from '../../assets/hands.png';\nimport handsDownImg from '../../assets/hands_down.png';\nimport useChatText from '../../hooks/use-chat-text'\nimport { liveStore } from '../../stores/live';\nimport { handsUp, revokeHandsUp,getForbiddenStatus } from \"../../api/live\";\nimport { message as Message } from \"antd\"\n\ninterface VideoPlayerProps {\n  domId?: string\n  id?: string\n  streamID: number\n  preview?: boolean\n  account?: any\n  stream?: any\n  role?: string\n  audio?: boolean\n  video?: boolean\n  className?: string\n  showProfile?: boolean\n  local?: boolean\n  handleClick?: (type: string, streamID: number, uid: string) => Promise<any>\n  close?: boolean\n  handleClose?: (uid: string, streamID: number) => void \n\n}\n\nconst VideoPlayer: React.FC<VideoPlayerProps> = ({\n  preview,\n  role,\n  account,\n  stream,\n  className,\n  domId,\n  streamID,\n  audio,\n  id,\n  video,\n  handleClick,\n  local,\n  handleClose,\n  close\n}) => {\n\n  const liveRoomName = liveStore.state.detail.houseName\n  const rtmLock = useRef<boolean>(false);\n  const lock = useRef<boolean>(false);\n\n  const loadVideo = useRef<boolean>(false);\n  const loadAudio = useRef<boolean>(false);\n\n  const lockPlay = useRef<boolean>(false);\n  const {\n    sendMessage\n  } = useChatText();\n  const [isHandsUp, setIsHandsUp] = useState(false);\n  useEffect(() => {\n\n    setIsHandsUp(liveStore.me.handsUp )\n\n    return () => {\n      setIsHandsUp(false)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [liveStore.state.audienceList]);\n\n\n  useEffect(() => {\n    if (!domId || !stream) return;\n\n  }, [domId, stream, streamID, preview]);\n\n  useEffect(() => {\n    console.log(\"[video-player]  prepare\", domId, stream);\n    if (!stream || !domId || lockPlay.current && stream.isPlaying()) return;\n    console.log(\"[video-player]  start\", domId, stream);\n    lockPlay.current = true;\n    stream.play(`${domId}`, { fit: 'cover' }, (err: any) => {\n      lockPlay.current = false;\n      if (err) {\n        if(err.status !== 'aborted' || err.audio.status !== 'aborted' ||  err.video.status !== 'aborted'){\n          console.warn('[video-player] ', err, id);\n          // setResume(true);\n          // resume(stream)\n          liveStore.addResumList(stream)\n        }\n      }\n    })\n    return () => {\n      if (stream.isPlaying()) {\n        stream.stop();\n      }\n      local && stream && stream.close();\n    }\n  }, [domId, id, local, stream]);\n\n\n  useEffect(() => {\n    if (stream) {\n      // prevent already muted audio\n      if (!loadAudio.current) {\n        if (!audio) {\n          stream.muteAudio();\n          console.log('strea mute audio');\n        }\n        loadAudio.current = true;\n        return;\n      }\n\n      if (audio) {\n        console.log('stream unmute audio');\n        stream.unmuteAudio();\n      } else {\n        console.log('stream mute audio');\n        stream.muteAudio();\n      }\n    }\n\n\n  }, [stream, audio]);\n\n  useEffect(() => {\n    if (stream) {\n      // prevent already muted video\n      if (!loadVideo.current) {\n        if (!video) {\n          console.log('stream mute video');\n          stream.muteVideo();\n        }\n        loadVideo.current = true;\n        return;\n      }\n\n      if (video) {\n        console.log('stream unmute video');\n        stream.unmuteVideo();\n      } else {\n        console.log('stream mute video');\n        stream.muteVideo();\n      }\n    }\n\n\n  }, [stream, video]);\n\n  useEffect(() => {\n    rtmLock.current = false;\n    return () => {\n      rtmLock.current = true;\n      lock.current = true;\n    }\n  }, []);\n\n\n  const onAudioClick = (evt: any) => {\n    if (!liveStore.state.openState) {\n      Message.error('开课前30分钟开放直播间')\n      return\n    }\n    if (handleClick && id) {\n      handleClick('audio', streamID, id);\n    }\n  }\n\n  const onVideoClick = (evt: any) => {\n    if (!liveStore.state.openState) {\n      Message.error('开课前30分钟开放直播间')\n      return\n    }\n    if (handleClick && id) {\n      handleClick('video', streamID, id);\n    }\n  }\n\n  const onClose = (evt: any) => {\n    if (handleClose && id) {\n      handleClose('close', streamID);\n    }\n  }\n  // 获取目前的用户举手状态\n\n  // 学生举手/取消举手\n  const onHandsClick = async () => {\n    if (!isHandsUp) {\n      // 学生举手\n      const res = await handsUp(liveRoomName);\n      // @ts-ignore\n      if (res.code === 0) {\n        sendMessage(\"\", { type: 'handup' })\n\n      }\n    } else {\n      // 取消举手\n      const param = { singleToken: liveStore.me.token }\n      // @ts-ignore\n      const { code } = await revokeHandsUp(liveRoomName, param)\n      if (code === 0) {\n        sendMessage('', { type: \"studenthandoff\", uid: liveStore.me.uid })\n      }\n    }\n  }\n\n  const toggleVoice = async (env: any) => {\n    // 如果自己的麦是关闭状态 cancelMute为开麦\n    if (!liveStore.me.broadcast) {\n      // 获取当前用户的禁言状态\n      const {code,data} = await getForbiddenStatus(liveRoomName)\n      if (code === 0) {\n        if (data.forbiddenWord) {\n          alert('您已经被禁言 请举手请求上麦')\n          return\n        } else {\n          let type = 'cancelMute'\n          sendMessage('', { type: type,uid: liveStore.me.uid })\n        }\n      }\n    } else {\n      let type = 'mute'\n      sendMessage('', { type: type,uid: liveStore.me.uid })\n    }\n    \n  }\n  const me = useRoomState().me;\n\n  return (\n\n\n    <div className={`${className ? className : (preview ? 'preview-video rotateY180deg' : `agora-video-view ${Boolean(video) === false && stream ? 'show-placeholder' : ''}`)}`}>\n      {close ? <div className=\"icon-close\" onClick={onClose}></div> : null}\n      {className !== 'screen-sharing' ? <div className={role === 'teacher' ? 'teacher-placeholder' : 'student-placeholder'}></div> : null}\n      {preview ? null :\n        account ?\n          <div className=\"video-profile\">\n            <span className=\"account\"></span>\n            {me.role === 'teacher' ?\n              <span className=\"media-btn\">\n                <Icon onClick={onAudioClick} className={audio ? \"icon-speaker-on\" : \"icon-speaker-off\"} data={\"audio\"} />\n                <Icon onClick={onVideoClick} className={video ? \"icons-camera-unmute-s\" : \"icons-camera-mute-s\"} data={\"video\"} />\n              </span> : null}\n            {me.role === 'student' && liveStore.state.audienceList.length > 0 ?\n              <span className=\"media-btn\">\n                <Icon className={liveStore.me.broadcast ? \"icon-speaker-on\" : \"icon-speaker-off\"} data={\"audio\"} onClick={toggleVoice} />\n                \n                <img className='hands' src={isHandsUp ? handsUpImg : handsDownImg} onClick={onHandsClick} />\n              </span> : null}\n\n          </div>\n          : null\n      }\n      <div id={`${domId}`} className={`agora-rtc-video ${local ? 'rotateY180deg' : ''}`}></div>\n      {/* {resume ? <div className=\"clickable\" onClick={() => {\n      stream.resume().then(() => {\n        setResume(false);\n        console.log(\"clickable\",stream);\n      }).catch(console.warn);\n    }}></div> : null} */}\n    </div>\n  )\n}\nexport default React.memo(VideoPlayer);","import React from 'react';\nimport { FormControl } from '@material-ui/core';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Button from './custom-button';\nimport FormSelect from './form-select';\nimport SpeakerVolume from './volume/speaker';\nimport useSettingControl from '../hooks/use-setting-control';\nimport {t} from '../utils/i18n';\n\n\nconst useStyles = makeStyles ({\n  formControl: {\n    minWidth: '240px',\n    maxWidth: '240px',\n  }\n});\n\ninterface SettingProps {\n  className?: string\n  handleFinish: (evt: any) => void\n}\n\nexport default function (props: SettingProps) {\n  const classes = useStyles();\n\n  const {\n    cameraList,\n    microphoneList,\n    speakerList,\n    camera,\n    microphone,\n    speaker,\n    setCamera,\n    setMicrophone,\n    setSpeaker,\n    volume,\n    speakerVolume,\n    setSpeakerVolume,\n    save,\n    PreviewPlayer,\n    MicrophoneVolume\n  } = useSettingControl();\n\n  const changeCamera = (evt: any) => {\n    console.log('changeCamera ', evt.target.value);\n    setCamera(evt.target.value);\n  }\n\n  const changeMicrophone = (evt: any) => {\n    console.log('changeMicrophone ', evt.target.value);\n    setMicrophone(evt.target.value);\n  }\n\n  const changeSpeaker = (evt: any) => {\n    console.log('changeSpeaker ', evt.target.value);\n    setSpeaker(evt.target.value);\n  }\n\n  const changeSpeakerVolume = (volume: number) => {\n    console.log('changeSpeaker ', volume);\n    setSpeakerVolume(volume);\n  }\n\n  return (\n    <div className={props.className ? props.className : \"flex-container\"}>\n      <div className=\"custom-card\">\n        <div className=\"flex-item cover\">\n          <PreviewPlayer />\n        </div>\n        <div className=\"flex-item card\">\n          <div className=\"position-top card-menu\">\n            <div></div>\n            <div className=\"icon-container\">\n            </div>\n          </div>\n          <div className=\"position-content flex-direction-column\">\n            <FormControl className={classes.formControl}>\n              <FormSelect \n                Label={t(\"device.camera\")}\n                value={camera}\n                onChange={changeCamera}\n                items={cameraList}\n              />\n            </FormControl>\n            <FormControl className={classes.formControl}>\n              <FormSelect \n                Label={t(\"device.microphone\")}\n                value={microphone}\n                onChange={changeMicrophone}\n                items={microphoneList}\n              />\n              <MicrophoneVolume />\n            </FormControl>\n            <FormControl className={classes.formControl}>\n              <FormSelect \n                Label={t(\"device.speaker\")}\n                value={speaker}\n                onChange={changeSpeaker}\n                items={speakerList}\n              />\n              <SpeakerVolume volume={speakerVolume} onChange={changeSpeakerVolume} />\n            </FormControl>\n            <Button name={t(\"device.finish\")} onClick={(evt: any) => {\n              save({\n                speakerVolume,\n                camera,\n                microphone,\n                speaker,\n              })\n              props.handleFinish(evt);\n            }}/>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}","export interface ChatMessage {\n  account?: string\n  text?: string\n  link?: string\n  ts?: number\n  id?: string\n  message?: {\n    type: string\n    text: string\n  }\n  timestamp?: number\n  sender: {\n    name: string\n    id: string,\n    avatar: string,\n  }\n  receiver?: {\n    id: string\n  }\n  action?: {\n    type: string\n  },\n  isSelf?: boolean,\n  isSystem?: boolean\n}\nexport enum ClassState {\n  CLOSED = 0,\n  STARTED = 1\n}\n\nexport interface AgoraMediaStream {\n  streamID: number\n  local: boolean\n  account?: string\n  stream?: any\n  video?: boolean\n  audio?: boolean\n  playing?: boolean\n}\n\nexport class AgoraStream {\n  constructor(\n    public readonly stream: any = stream,\n    public readonly streamID: number = streamID,\n    public readonly local: boolean = local,\n  ) {\n  }\n}\n\n\n\nexport interface Msg {\n  type: string\n  text: string\n}\n\nexport interface Sender {\n  id: string\n  avatar: string\n  name: string\n}\n\nexport interface MessageObj {\n  message: Msg\n  timestamp: number\n  sender: Sender,\n  isSystem?: boolean\n}\n","import React, { useState, useEffect, useMemo, useRef, useCallback } from 'react'\nimport VoiceVolume from '../components/volume/voice'\nimport VideoPlayer from '../components/VideoPlayer'\nimport { useRoomState } from '../containers/root-container'\nimport { roomStore, MediaDeviceState } from '../stores/room'\n\nexport default function useSettingControl() {\n  const [devices, setDevices] = useState<any[]>([])\n\n  const cameraList = useMemo(() => {\n    return devices.filter((it: Device) => it.kind === 'videoinput')\n  }, [devices])\n\n  const microphoneList = useMemo(() => {\n    return devices.filter((it: Device) => it.kind === 'audioinput')\n  }, [devices])\n\n  const speakerList = useMemo(() => {\n    return devices.filter((it: Device) => it.kind === 'audiooutput')\n  }, [devices])\n\n  const roomState = useRoomState()\n\n  const mediaDevice = useMemo(() => {\n    return roomState.mediaDevice\n  }, [roomState.mediaDevice])\n\n  const [camera, setCamera] = useState(mediaDevice.camera)\n  const [microphone, setMicrophone] = useState(mediaDevice.microphone)\n  const [speaker, setSpeaker] = useState(mediaDevice.speaker)\n  const [speakerVolume, setSpeakerVolume] = useState<number>(\n    mediaDevice.speakerVolume\n  )\n  const [volume, setVolume] = useState<number>(0)\n\n  let mounted = false\n\n  useEffect(() => {\n    // api https://developer.mozilla.org/zh-CN/docs/Web/API/MediaDevices/devicechange_event\n    // 每当媒体设备（例如相机，麦克风或扬声器）连接到系统或从系统中移除时，devicechange 事件就会被发送到 MediaDevices  实例。 这是一个没有附加属性的通用 Event\n    const rtcClient = roomStore.rtcClient\n    if (!rtcClient) return\n\n    if (!mounted) {\n      const webClient = rtcClient\n      const onChange = async () => {\n        const devices: Device[] = await webClient.getDevices()\n        setDevices(\n          devices.map((item: Device) => ({\n            value: item.deviceId,\n            text: item.label,\n            kind: item.kind\n          }))\n        )\n      }\n      window.addEventListener('devicechange', onChange)\n      onChange()\n        .then(() => {})\n        .catch(console.warn)\n      mounted = true\n      return () => {\n        window.removeEventListener('devicechange', onChange)\n      }\n    }\n  }, [])\n\n  const cameraId: string = useMemo(() => {\n    return cameraList[camera] ? cameraList[camera].value : ''\n  }, [cameraList, camera])\n\n  const microphoneId: string = useMemo(() => {\n    return microphoneList[microphone] ? microphoneList[microphone].value : ''\n  }, [microphoneList, microphone])\n\n  const speakerId: string = useMemo(() => {\n    return speakerList[speaker] ? speakerList[speaker].value : ''\n  }, [speakerList, speaker])\n\n  const [stream, setStream] = useState<any>(null)\n\n  const ref = useRef<boolean>(false)\n\n  useEffect(() => {\n    return () => {\n      ref.current = true\n    }\n  }, [])\n\n  const lock = useRef<boolean>(false)\n\n  useEffect(() => {\n    return () => {\n      lock.current = true\n    }\n  }, [])\n  useEffect(() => {\n    console.log(\n      '程程程程程程程程程程程程程程程程!!!!!!',\n      speakerId,\n      cameraId,\n      microphoneId\n    )\n    if (lock.current || !speakerId || !cameraId || !microphoneId) return\n    lock.current = true\n    const webClient = roomStore.rtcClient\n    !ref.current &&\n      webClient\n        .createPreviewStream({\n          cameraId,\n          microphoneId\n        })\n        .then((stream: any) => {\n          !ref.current && setStream(stream)\n        })\n        .finally(() => {\n          lock.current = false\n        })\n  }, [speakerId, cameraId, microphoneId])\n\n  const interval = useRef<any>(null)\n\n  useEffect(() => {\n    if (!stream || !stream.getAudioLevel) return\n    interval.current = setInterval(() => {\n      !ref.current && setVolume(stream.getAudioLevel())\n    }, 300)\n    return () => {\n      interval.current && clearInterval(interval.current)\n      interval.current = null\n    }\n  }, [stream])\n\n  const PreviewPlayer = useCallback(() => {\n    if (!stream) return null\n    return (\n      <VideoPlayer\n        domId={'local'}\n        preview={true}\n        stream={stream}\n        streamID={0}\n        video={true}\n        audio={true}\n        local={true}\n      />\n    )\n  }, [stream])\n\n  const MicrophoneVolume = useCallback(() => {\n    return <VoiceVolume volume={volume} />\n  }, [volume])\n\n  const handleSave = (args: {\n    camera: number\n    microphone: number\n    speaker: number\n    speakerVolume: number\n  }) => {\n    const { camera, microphone, speaker, speakerVolume } = args\n    const cameraId = cameraList[camera] ? cameraList[camera].value : ''\n    const microphoneId = microphoneList[microphone]\n      ? microphoneList[microphone].value\n      : ''\n    const speakerId = speakerList[speaker] ? speakerList[speaker].value : ''\n    const mediaInfo: MediaDeviceState = {\n      cameraId,\n      microphoneId,\n      speakerId,\n      camera,\n      microphone,\n      speaker,\n      speakerVolume\n    }\n    ref.current = true\n    roomStore.updateDevice(mediaInfo)\n    if (stream && stream.close) {\n      stream.close()\n    }\n  }\n\n  return {\n    volume,\n    cameraList,\n    microphoneList,\n    speakerList,\n    camera,\n    microphone,\n    speaker,\n    setCamera,\n    setMicrophone,\n    setSpeaker,\n    speakerVolume,\n    setSpeakerVolume,\n    PreviewPlayer,\n    MicrophoneVolume,\n    save: handleSave\n  }\n}\n","import React, { useEffect, useState } from 'react'\nimport { socketStore } from '../../stores/socket'\n\nimport { Modal, Input } from 'antd'\nimport { t } from '../../utils/i18n'\nimport Icon from '../icon'\nimport SettingCard from '../../components/setting-card'\n\nimport Button from '../custom-button'\nimport * as moment from 'moment'\nimport './navFc.scss'\n\nconst networkQualityIcon: { [key: string]: string } = {\n  excellent: 'network-good',\n  good: 'network-good',\n  poor: 'network-normal',\n  bad: 'network-normal',\n  'very bad': 'network-bad',\n  down: 'network-bad',\n  unknown: 'network-bad'\n}\n\ninterface NavProps {\n  delay: string\n  network: string\n  cpu: string\n  role: string\n  roomName: string\n  time: number\n  showSetting: boolean\n  showPopConfirm: boolean\n  classState: boolean\n  recordState: boolean\n  onCardConfirm: (type: string) => void\n  handleClick: (type: string) => void\n  recordStart: () => void\n  recordEnd: () => void\n  classEnd: (type: string) => void\n  classStart: (type: string) => void\n  logoutLive: () => void\n  saveAudio: (fileName?: string | number) => void\n  fileName?: string\n  inputOnChange: (obj: any) => void\n  logoutVisible: boolean\n  closeLogout: () => void\n  logout: (type: string) => void\n  isOpenState: boolean\n  isLive: boolean\n}\nfunction RecordButton(props) {\n  let button = null\n  if (props.isLive) {\n    button = (\n      <Button\n        className={`nav-button start`}\n        name={t('nav.record_start')}\n        onClick={props.recordStart}\n      />\n    )\n  } else {\n    button = (\n      <Button\n        className={`nav-button disabled`}\n        name={t('nav.record_start')}\n      />\n    )\n  }\n  return button\n}\n\nexport function NavFc({\n  delay,\n  network,\n  cpu,\n  role,\n  roomName,\n  time,\n  handleClick,\n  showSetting,\n  classState,\n  onCardConfirm,\n  recordStart,\n  recordEnd,\n  classEnd,\n  classStart,\n  recordState,\n  logoutLive,\n  showPopConfirm,\n  saveAudio,\n  fileName,\n  inputOnChange,\n  closeLogout,\n  logout,\n  logoutVisible,\n  isOpenState,\n  isLive\n}: NavProps) {\n  const handleFinish = (evt: any) => {\n    onCardConfirm('setting')\n  }\n\n  const [show, setShow] = useState(false)\n\n  // @ts-ignore\n  let stateType = socketStore.state.recordVideoState\n\n  useEffect(() => {\n    console.log(stateType)\n    //.recordState // START_RECORD  STOP_RECORD  开始录制，结束录制\n    // START_RECORD  STOP_RECORD  开始录制，结束录制\n    if (stateType === 'START_RECORD') {\n      //开始录制\n      setShow(true)\n    }\n\n    if (stateType === 'STOP_RECORD') {\n      //结束录制\n      setShow(false)\n    }\n  }, [stateType])\n\n  // console.log('********role', role)\n  // console.log('********isLive', isLive)\n  // console.log('********isOpenState', isOpenState)\n  // console.log('********time', time)\n\n\n  return (\n    <>\n      <div className={`nav-container`}>\n        <div className=\"class-title\">\n          <span className=\"room-name\">{roomName}</span>\n          {role === 'teacher' && isOpenState ? (\n            recordState ? (\n              <Button\n                className={`nav-button stop`}\n                name={t('nav.record_end')}\n                onClick={recordEnd}\n              />\n            ) : (\n              <RecordButton recordStart={recordStart} isLive={isLive} />\n            )\n          ) : // <Button className={`nav-button start`} name={t('nav.record_start')} onClick={recordStart}/>\n\n          null}\n\n          {role === 'teacher' && isOpenState ? (\n            classState ? (\n              <Button\n                className={`nav-button stop`}\n                name={t('nav.class_end')}\n                onClick={(evt: any) => {\n                  classEnd('classState')\n                }}\n              />\n            ) : (\n              <Button\n                className={`nav-button start`}\n                name={t('nav.class_start')}\n                onClick={(evt: any) => {\n                  classStart('classState')\n                }}\n              />\n            )\n          ) : null}\n        </div>\n        <div className=\"network-state\">\n          <span className=\"net-field\">\n            {t('nav.delay')}\n            <span className=\"net-field-value\">{delay}</span>\n          </span>\n          {/* <span className=\"net-field\">Packet Loss Rate: <span className=\"net-field-value\">{lossPacket}</span></span> */}\n          <span\n            className=\"net-field\"\n            style={{\n              display: 'inline-flex',\n              justifyContent: 'center',\n              alignItems: 'center'\n            }}\n          >\n            {t('nav.network')}\n            <span\n              className={`net-field-value ${networkQualityIcon[network]}`}\n              style={{ marginLeft: '.2rem' }}\n            >\n              {/* {network} */}\n            </span>\n          </span>\n        </div>\n        <div className=\"menu\">\n          {role === 'student' && show && (\n            <div className=\"status-type\">\n              <div className=\"status-icon\"></div>\n              <div className=\"status-desc\">录制中</div>\n            </div>\n        )}\n          {role === 'teacher' && recordState && (\n            <div className=\"status-type\">\n              <div className=\"status-icon\"></div>\n              <div className=\"status-desc\">录制中</div>\n            </div>\n          )}\n          {role === 'teacher' && (\n            <div className=\"timer\">\n              <Icon className=\"icon-time\" disable />\n              <span className=\"time\">\n                {moment.utc(time).format('HH:mm:ss')}\n              </span>\n            </div>\n          )}\n          <span className=\"menu-split\" />\n          <div className=\"btn-group\">\n            {\n              <>\n                <Icon\n                  className=\"icon-setting\"\n                  onClick={(evt: any) => {\n                    handleClick('setting')\n                  }}\n                />\n                <Icon\n                  className=\"i18n-lang\"\n                  onClick={(evt: any) => {\n                    handleClick('i18n')\n                  }}\n                ></Icon>\n              </>\n            }\n            <Icon\n              className=\"icon-exit\"\n              onClick={(evt: any) => {\n                logoutLive()\n              }}\n            />\n          </div>\n        </div>\n      </div>\n      {showSetting ? (\n        <SettingCard className=\"internal-card\" handleFinish={handleFinish} />\n      ) : null}\n\n      <Modal\n        title=\"晓提示\"\n        visible={showPopConfirm}\n        onOk={() => saveAudio(fileName)}\n        onCancel={() => saveAudio()}\n        okText=\"确认\"\n        cancelText=\"取消\"\n      >\n        <p>是否修改文件名？</p>\n        <Input\n          placeholder=\"不超过20个字\"\n          maxLength={20}\n          value={fileName}\n          onChange={inputOnChange}\n        />\n      </Modal>\n\n      <Modal\n        title=\"晓提示\"\n        visible={logoutVisible}\n        onOk={() => {\n          logout('exit')\n        }}\n        onCancel={() => {\n          closeLogout()\n        }}\n        okText=\"确认\"\n        cancelText=\"取消\"\n      >\n        <p>\n          {isLive && role === 'teacher'\n            ? '一旦关闭直播间，所有用户自动下线，并且自动结束课程和录制（如有），以后只能查看回放（如有），不能继续直播。'\n            : '确定退出直播吗？'}\n        </p>\n      </Modal>\n    </>\n  )\n}\n","import React, { useState, useEffect, useRef } from 'react'\nimport { NavFc } from './navFc'\n\nimport { ClassState } from '../../utils/types'\nimport { NetworkQualityEvaluation } from '../../utils/helper'\nimport { useRoomState } from '../../containers/root-container'\nimport { roomStore } from '../../stores/room'\nimport { globalStore } from '../../stores/global'\nimport { Live } from '../../api'\nimport { notification } from 'antd'\nimport { useHistory } from 'react-router'\nimport { liveStore } from '../../stores/live'\nimport useChatText from '../../hooks/use-chat-text';\n\n\nexport default function NavContainer() {\n\n  const {\n    sendMessage\n  } = useChatText();\n  const history = useHistory()\n  const ref = useRef<boolean>(false)\n\n  const [time, updateTime] = useState<number>(0)\n  const startClassTimer = useRef(0)\n  const [timer, setTimer] = useState<any>(null)\n  const [recordState, setRecordState] = useState<any>(false)\n\n  const [card, setCard] = useState<boolean>(false)\n\n  const [rtt, updateRtt] = useState<number>(0)\n  const [quality, updateQuality] = useState<string>('unknown')\n  const [cpuUsage, updateCpuUsage] = useState<number>(0)\n  const recordDataRef = useRef({ resourceId: '',sid:'' })\n  const recordStateRef = useRef(false)\n  const [showPopConfirm, setPopConfirmState] = useState<any>(false)\n  const [logoutVisible, setLogoutVisible] = useState<any>(false)\n\n  const [isOpenState, setOpenState] = useState<any>(false)\n  const liveDetail = liveStore.state.detail\n  const { title, status, startTime, endTime, houseName } = liveDetail\n  const [isLive, setLiveState] = useState(status === 1)\n  const [fileName, setFileName] = useState<string>(title)\n  const liveRoomName = houseName\n  const roomState = useRoomState()\n  const me = roomState.me\n\n  // 判断当前时间是否是开放状态（是否是开播时间的前30分钟）\n  useEffect(() => {\n    // if(me.role === 'student') return\n    // 手动开播了，就直接是开放状态\n    if (status === 1) {\n      setOpenState(true)\n      liveStore.setOpenState(true)\n      return\n    }\n    let timer = setInterval(() => {\n      const currentTime = new Date().getTime()\n      let minute = (startTime - currentTime) / 1000\n      if (minute > 1800) {\n        setOpenState(false)\n        liveStore.setOpenState(false)\n      } else if (minute >= 0 || minute <= 1800) {\n        setOpenState(true)\n        liveStore.setOpenState(true)\n      } else {\n        setOpenState(true)\n        liveStore.setOpenState(true)\n        clearInterval(timer)\n        timer = null\n      }\n    }, 1000)\n\n    return () => {\n      if (timer) {\n        clearInterval(timer)\n        setTimer(null)\n      }\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  useEffect(() => {\n    liveStore.setOpenState(isOpenState)\n  }, [isOpenState])\n\n  // 判断结束直播时间、拖堂后30分钟的行为\n  useEffect(() => {\n    if (me.role === 'student') return\n    let createTipsTimer = setInterval(async () => {\n\n      let currentTime = new Date().getTime()\n      let minute = (endTime - currentTime) / 1000\n\n      // 拖堂30分钟前3秒。，关闭直播间\n      if (minute >= -1801 && minute < -1800) {\n          //  主播会自动关闭直播间\n        const args = {\n          message: '消息',\n          description:\n            '您已经拖堂30分钟，系统已自动为您关闭直播间，本次录制视频将自动为您保存到\"回放\"中',\n          duration: 1000\n        }\n\n        notification.open(args)\n\n        let timer = setTimeout(async () => {\n          await teacherCloseLive()\n          // 做一个判断 是否为录制状态中\n          if(recordStateRef.current){\n            await saveAudio(null)\n          }\n          clearInterval(createTipsTimer)\n          createTipsTimer = null\n          clearInterval(timer)\n          timer = null\n\n          window.location.href = process.env.REACT_APP_API_DOMAIN + '/#/message'\n        }, 2000)\n      }\n\n      // 设置的直播到达结束时间\n      if (minute >= 3 && minute < 4) {\n        const args = {\n          message: '消息',\n          description: '30分钟后，该直播间自动关闭，老师不要拖堂哦~',\n          duration: 1000\n        }\n        notification.open(args)\n      }\n    }, 1000)\n\n    return async () => {\n      if (createTipsTimer) {\n        clearInterval(createTipsTimer)\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  },[])\n\n  useEffect(() => {\n    return () => {\n      ref.current = true\n      if (timer) {\n        clearInterval(timer)\n        setTimer(null)\n      }\n    }\n  }, [timer])\n\n  useEffect(() => {\n    const webClient = roomStore.rtcClient\n    webClient.rtc.on('watch-rtt', (rtt: number) => {\n      !ref.current && updateRtt(rtt)\n    })\n    webClient.rtc.on('network-quality', (evt: any) => {\n      const quality = NetworkQualityEvaluation(evt)\n      !ref.current && updateQuality(quality)\n    })\n    return () => {\n      webClient.rtc.off('watch-rtt', () => {})\n      webClient.rtc.off('network-quality', () => {})\n    }\n  }, [])\n\n  const courseState = roomState.course.courseState\n  const course = roomState.course\n\n  useEffect(() => {\n    if (courseState === ClassState.STARTED && timer === null) {\n      const now: number = +Date.now()\n      setTimer(calcDuration(now))\n\n    }\n    if (timer && courseState === ClassState.CLOSED) {\n      clearInterval(timer)\n      setTimer(null)\n    }\n  }, [courseState, timer])\n\n\n  const calcDuration = (time: number) => {\n    const timerInterval = setInterval(() => {\n      // if(!ref.current){\n            startClassTimer.current = startClassTimer.current + 1000\n            setTimer(startClassTimer.current)\n      // }\n    }, 1000)\n    return timerInterval\n  }\n\n  const lock = useRef<boolean>(false)\n\n  useEffect(() => {\n    return () => {\n      lock.current = true\n    }\n  }, [])\n\n  const updateClassState = () => {\n    if (!lock.current) {\n      lock.current = true\n      roomStore\n        .updateAttrsBy(me.uid, {\n          class_state: +!Boolean(roomStore.state.course.courseState)\n        })\n        .then(() => {\n          console.log('update success')\n        })\n        .catch(console.warn)\n        .finally(() => {\n          lock.current = false\n        })\n    }\n  }\n\n  const handleClick = (type: string) => {\n    if (type === 'setting') {\n      setCard(true)\n    } else if (type === 'classState') {\n      updateClassState()\n    } else if (type === 'i18n-lang') {\n      // globalStore.setLanguage()\n    }\n  }\n\n  const handleCardConfirm = (type: string) => {\n    switch (type) {\n      case 'setting':\n        setCard(false)\n        return\n      case 'exitRoom':\n        globalStore.removeDialog()\n        return\n    }\n  }\n\n  const recordStart = async () => {\n    console.log('开始')\n    setRecordState(true)  // 给html变量使用\n    recordStateRef.current = true // 给Interval使用\n    // 开始录制接口\n    // @ts-ignore\n    const { code, data } = await Live.startRecord(liveRoomName)\n    console.log('*****开始录制的请求结果', code, data)\n    if (code !== 0) return\n    recordDataRef.current = data // 给setInterval用的\n  }\n  const saveAudio = async changeFileName => {\n    setRecordState(false) // 给html变量使用\n    recordStateRef.current = false // 给setInterval用的\n    setPopConfirmState(false)\n    // 结束录制接口\n    const formData = {\n      liveRoomName,\n      resourceId: recordDataRef.current.resourceId ,\n      sid: recordDataRef.current.sid,\n      quit: false,\n      title: changeFileName || fileName\n    }\n    // @ts-ignore\n    const { code, data } = await Live.stopRecord(formData)\n    console.log('-----结束录制的请求结果', code, data)\n\n    if (code !== 0) {\n      return\n    }\n\n    console.log('已结束录制')\n  }\n  const recordEnd = async () => {\n    setPopConfirmState(true)\n  }\n\n  const classStart = async type => {\n    console.log('开始上课')\n    handleClick(type)\n    // 调用后端接口\n    const formData = {\n      liveRoomName,\n      status: 1\n    }\n    // @ts-ignore\n    const { code, data } = await Live.updateLiveState(formData)\n    console.log('开始上课的请求结果', code, data)\n    // roomStore.unmute(liveStore.me.uid, 'audio')\n    if (code !== 0) {\n      return\n    }\n    setLiveState(true)\n  }\n\n  const classEnd = async type => {\n    console.log('暂停上课')\n    handleClick(type)\n    // 更新直播间状态\n    const formData = {\n      liveRoomName\n    }\n    // @ts-ignore\n    const { code, data } = await Live.stopLiveState(formData)\n    console.log('暂停上课', code, data)\n    if (code !== 0) {\n      return\n    }\n    console.log('暂停上课成功')\n  }\n\n  const logoutLive = () => {\n    setLogoutVisible(true)\n  }\n\n  const closeLogout = () => {\n    setLogoutVisible(false)\n  }\n\n  const teacherCloseLive = async (): Promise<any> => {\n    const formData = {\n      liveRoomName,\n      status: 2\n    }\n    // @ts-ignore\n    const { code, data } = await Live.updateLiveState(formData)\n    console.log('关闭直播间', code, data)\n    if (code !== 0) {\n      return\n    }\n\n    roomStore.exitAll()\n  }\n\n  const logout = async () => {\n    if (me.role === 'teacher' && isLive) {\n      closeLogout()\n      // 关闭直播间状态,请求后端接口\n      await teacherCloseLive()\n      if(recordDataRef.current){\n        await saveAudio(null)\n      }\n      // rtm广播出去\n      await sendMessage('',{type: 'closeRoom'})\n      // 关闭浏览器\n      window.location.href = process.env.REACT_APP_API_DOMAIN + '/#/message'\n    } else {\n      //  student 或 未直播状态status===0 直接关闭 这里不做处理\n      roomStore.exitAll()\n      // 关闭弹框\n      closeLogout()\n      // 关闭浏览器\n      window.location.href = process.env.REACT_APP_API_DOMAIN + '/#/message'\n\n    }\n  }\n  const inputOnChange = e => {\n    const fileName = e.target.value\n    setFileName(fileName)\n  }\n  return (\n    <NavFc\n      role={me.role}\n      roomName={course.roomName}\n      classState={Boolean(course.courseState)}\n      delay={`${rtt}ms`}\n      time={startClassTimer.current}\n      network={`${quality}`}\n      cpu={`${cpuUsage}%`}\n      showSetting={card}\n      onCardConfirm={handleCardConfirm}\n      handleClick={handleClick}\n      recordStart={recordStart}\n      recordEnd={recordEnd}\n      classStart={classStart}\n      classEnd={classEnd}\n      recordState={recordState}\n      logoutLive={logoutLive}\n      showPopConfirm={showPopConfirm}\n      saveAudio={saveAudio}\n      fileName={fileName}\n      inputOnChange={inputOnChange}\n      logoutVisible={logoutVisible}\n      closeLogout={closeLogout}\n      logout={logout}\n      isOpenState={isOpenState}\n      isLive={isLive}\n    />\n  )\n}\n","import React from 'react';\nimport './native-shared-window.scss';\nimport Button from './custom-button';\n\nimport { AgoraStream } from '../utils/types';\nimport { globalStore } from '../stores/global';\nimport { roomStore } from '../stores/room';\nimport { useGlobalState } from '../containers/root-container';\n\n\nexport const WindowItem: React.FC<any> = ({\n  ownerName,\n  name,\n  className,\n  windowId,\n  image,\n}) => {\n\n  return (\n    <div className={className ? className : ''} >\n      <div className=\"screen-image\">\n        <div className=\"content\" style={{ backgroundImage: `url(data:image/png;base64,${image})` }}>\n        </div>\n      </div>\n      <div className=\"screen-meta\">{name}</div>\n    </div>\n  )\n}\n\nexport interface WindowListProps {\n  title: string\n  items: any[]\n  windowId: number\n  selectWindow: (windowId: any) => void\n  confirm: (evt: any) => void\n  cancel: (evt: any) => void\n}\n\nexport const WindowList: React.FC<WindowListProps> = ({\n  title,\n  items,\n  windowId,\n  selectWindow,\n  confirm,\n  cancel\n}) => {\n  return (\n    <div className=\"window-picker-mask\">\n      <div className=\"window-picker\">\n        <div className=\"header\">\n          <div className=\"title\">{title}</div>\n          <div className=\"cancelBtn\" onClick={cancel}></div>\n        </div>\n        <div className='screen-container'>\n          {\n            items.map((it: any, key: number) =>\n              <div className=\"screen-item\" \n                key={key}\n                onClick={() => {\n                  selectWindow(it.windowId);\n                }}\n                onDoubleClick={confirm}\n                >\n                <WindowItem\n                  ownerName={it.ownerName}\n                  name={it.name}\n                  className={`window-item ${it.windowId === windowId ? 'active' : ''}`}\n                  windowId={it.windowId}\n                  image={it.image}\n                />\n              </div>\n            )\n          }\n        </div>\n        <div className='footer'>\n          <Button className={'share-confirm-btn'} name={\"start\"}\n            onClick={confirm} />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default function NativeSharedWindowContainer() {\n\n \n\n  const globalState = useGlobalState();\n  const nativeWindowInfo = globalState.nativeWindowInfo;\n  const [windowId, setWindowId] = React.useState<any>('');\n\n  return (\n    nativeWindowInfo.visible ? \n    <WindowList\n      windowId={windowId}\n      title={'Please select and click window for share'}\n      items={nativeWindowInfo.items}\n      cancel={() => {\n        globalStore.setNativeWindowInfo({visible: false, items: []});\n      }}\n      selectWindow={(windowId: any) => {\n        setWindowId(windowId)\n      }}\n      confirm={async (evt: any) => {\n        if (!windowId) {\n          console.warn(\"windowId is empty\");\n          return;\n        }\n        try {\n          \n        } catch(err) {\n          throw err;\n        } finally {\n          globalStore.setNativeWindowInfo({visible: false, items: []});\n        }\n      }}\n    />\n    : null\n  )\n}","import React, { useEffect, useMemo, useRef } from 'react';\nimport {  useLocation } from 'react-router-dom';\nimport Nav from '../../components/Nav';\nimport { AgoraStream } from '../../utils/types';\nimport './room.scss';\nimport NativeSharedWindow from '../../components/native-shared-window';\nimport { roomStore } from '../../stores/room';\nimport { useRoomState } from '../../containers/root-container';\nimport { globalStore } from '../../stores/global';\nimport { liveStore } from '../../stores/live';\nimport { AgoraStreamSpec, SHARE_ID } from '../../utils/agora-rtc-client';\n\nexport function RoomPage({ children }: any) {\n\n\n  const location = useLocation();\n\n  const roomState = useRoomState();\n  const me = roomStore.state.me;\n  const course = roomStore.state.course;\n\n  useEffect(() => {\n    return () => {\n      globalStore.removeUploadNotice();\n      globalStore.setMessageCount(0);\n      roomStore.exitAll()\n        .then(() => {\n        })\n        .catch(console.warn)\n        .finally(() => {\n        });\n    }\n  }, [location]);\n\n  const rtc = useRef<boolean>(false);\n\n  // const canPublish = useMemo(() => {\n  //   return !isBigClass ||\n  //     (isBigClass &&\n  //       (me.role === 'teacher' ||\n  //         +me.uid === +course.linkId));\n  // }, [me.uid, course.linkId, me.role, isBigClass]);\n\n  useEffect(() => {\n    return () => {\n      rtc.current = true\n    }\n  }, []);\n\n  const publishLock = useRef<boolean>(false);\n\n  const { rtcJoined, uid, role, mediaDevice } = useMemo(() => {\n    return {\n      rtcJoined: roomState.rtc.joined,\n      uid: roomState.me.uid,\n      role: roomState.me.role,\n      mediaDevice: roomState.mediaDevice,\n    }\n  }, [roomState]);\n\n  useEffect(() => {\n    if (me.role === 'teacher') return\n    if (course.linkId) return;\n\n    const webClient = roomStore.rtcClient;\n    if (!webClient.published) return;\n    webClient\n      .unpublishLocalStream()\n      .then(() => {\n        console.log(\"[agora-web] unpublish local stream\");\n      }).catch(console.warn)\n\n\n  }, [me.role, location.pathname, course.linkId]);\n\n  useEffect(() => {\n    if (!rtcJoined || rtc.current) return;\n\n    const webClient = roomStore.rtcClient;\n    const uid = +roomStore.state.me.uid as number;\n    const streamSpec: AgoraStreamSpec = {\n      streamID: uid,\n      video: !!me.video,\n      audio: !!me.audio,\n      mirror: true,\n      screen: false,\n      microphoneId: mediaDevice.microphoneId,\n      cameraId: mediaDevice.cameraId,\n      audioOutput: {\n        volume: mediaDevice.speakerVolume,\n        deviceId: mediaDevice.speakerId\n      }\n    }\n    // console.log(\"canPb>>> \", canPublish, roomStore.state.course.linkId, roomStore.state.me.uid);\n    if (!publishLock.current) {\n      publishLock.current = true;\n      // 发布stream 启动音频、视频\n      webClient\n        .publishLocalStream(streamSpec)\n        .then(() => {\n          console.log(\"[agora-web] publish local stream\");\n        }).catch(console.warn)\n        .finally(() => {\n          publishLock.current = false;\n        })\n    }\n\n  }, [rtcJoined, uid, role, mediaDevice, me.video, me.audio]);\n\n  // 开启rtc通道\n  useEffect(() => {\n    if (!roomState.me.uid || !roomState.course.rid) return;\n    const webClient = roomStore.rtcClient;\n    if (webClient.joined) {\n      return;\n    }\n    console.log(\"[agora-rtc] add event listener\");\n\n    // 以下代码是\n    // https://docs.agora.io/cn/Video/API%20Reference/web/interfaces/agorartc.client.html#renewtoken\n    webClient.rtc.on('onTokenPrivilegeWillExpire', (evt: any) => {\n      // 在 Token 过期前 30 秒，会收到该事件通知,需要获取新的token\n      const newToken = '';// TODO\n      webClient.rtc.renewToken(newToken);\n      console.log('[agora-web] onTokenPrivilegeWillExpire', evt);\n    });\n    webClient.rtc.on('onTokenPrivilegeDidExpire', (evt: any) => {\n      // 在 Token 过期后，会收到该事件通知。\n      const newToken = '';// TODO\n      webClient.rtc.renewToken(newToken);\n      console.log('[agora-web] onTokenPrivilegeDidExpire', evt);\n    });\n    webClient.rtc.on('error', (evt: any) => {\n      // reason 为 \"SOCKET_DISCONNECTED\" 表示此时 SDK 和 Agora 服务器的连接因为网络原因断开了，SDK 会自动尝试重连。\n      // reason 为其他错误，表示在连接断开后 SDK 自动重连阶段触发的错误。\n      // TODO\n      console.log('[agora-web] error evt', evt);\n    });\n    webClient.rtc.on('stream-published', ({ stream }: any) => {\n      // 本地音视频流已发布\n      const _stream = new AgoraStream(stream, stream.getId(), true);\n      console.log('[agora-web] stream-published', stream);\n      roomStore.addLocalStream(_stream);\n    });\n    webClient.rtc.on('stream-subscribed', ({ stream }: any) => {\n      // 该回调通知 App 已接收远端音视频流。\n      const streamID = stream.getId();\n      // when streamID is not share_id use switch high or low stream in dual stream mode\n      if (location.pathname.match(/live/) && streamID !== SHARE_ID) {\n        if (roomStore.state.course.teacherId\n          && roomStore.state.course.teacherId === `${streamID}`) {\n          webClient.setRemoteVideoStreamType(stream, 0);\n          console.log(\"[agora-web] dual stream set high for teacher\");\n        }\n        else {\n          webClient.setRemoteVideoStreamType(stream, 1);\n          console.log(\"[agora-web] dual stream set low for student\");\n        }\n      }\n      const _stream = new AgoraStream(stream, stream.getId(), false);\n      console.log(\"[agora-web] subscribe remote stream, id: \", stream.getId());\n      roomStore.addRemoteStream(_stream);\n    });\n    webClient.rtc.on('stream-added', ({ stream }: any) => {\n      // 该回调通知 App 远端音视频流已添加。\n      console.log(\"[agora-web] added remote stream, id: \", stream.getId());\n      webClient.subscribe(stream);\n    });\n    webClient.rtc.on('stream-removed', ({ stream }: any) => {\n      // 该回调通知 App 已删除远端音视频流，即对方调用了 Client.unpublish。\n      const id = stream.getId();\n    \n      console.log(\"[agora-web] removed remote stream, id: \", stream.getId(), roomStore.applyUid);\n      if (id === roomStore.applyUid) {\n        globalStore.removeNotice();\n        me.role === 'teacher' &&\n          roomStore.updateCourseLinkUid(0).then(() => {\n            console.log(\"update teacher link_uid to 0\");\n          }).catch(console.warn);\n      }\n      roomStore.removeRemoteStream(id);\n    });\n    webClient.rtc.on('peer-online', ({ uid }: any) => {\n      // 该回调提示有远端用户/主播加入频道。\n      console.log(\"[agora-web] peer-online, id: \", uid);\n      // 通信场景下，该回调提示有远端用户加入了频道，并返回新加入用户的 ID；\n      // 如果加入之前，已经有其他用户在频道中了，新加入的用户也会收到这些已有用户加入频道的回调。\n      roomStore.addPeerUser(uid);\n    });\n    webClient.rtc.on('peer-leave', ({ uid }: any) => {\n      // 该回调通知 App 有远端用户离线。\n\n      // 正常离开：用户会收到类似“再见”的消息，接收此消息后，判断对方离开频道。\n      // 超时掉线：在 20 秒内，用户没有收到对方的任何数据包，则判定为对方掉线。\n      // 在网络较差的情况下，有可能会误报。Agora 建议使用信令系统来做可靠的掉线检测。\n      console.log(\"[agora-web] peer-leave, id: \", uid, roomStore.applyUid);\n     \n      if (uid === roomStore.applyUid) {\n        // 如果是主播离开了\n        globalStore.removeNotice();\n        me.role === 'teacher' &&\n          roomStore.updateCourseLinkUid(0).then(() => {\n            console.log(\"update teacher link_uid to 0\");\n          }).catch(console.warn);\n      }\n      roomStore.removePeerUser(uid);\n      roomStore.removeRemoteStream(uid);\n      \n    });\n    webClient.rtc.on(\"stream-fallback\", ({ uid, attr }: any) => {\n      // 该回调表示订阅的音视频流回退为音频流或恢复为音视频流。\n      // attr=> 1: 从音视频流回退为纯音频流 0: 从音频流恢复为音视频流\n      const msg = attr === 0 ? 'resume to a&v mode' : 'fallback to audio mode';\n      console.info(`[agora-web] stream: ${uid} fallback: ${msg}`);\n    })\n    rtc.current = true;\n    // WARN: IF YOU ENABLED APP CERTIFICATE, PLEASE SIGN YOUR TOKEN IN YOUR SERVER SIDE AND OBTAIN IT FROM YOUR OWN TRUSTED SERVER API\n    webClient\n      .joinChannel({\n        uid: +roomState.me.uid,\n        channel: roomState.course.rid,\n        token: roomState.rtcToken,\n        dual: false // 是否开启双流模式 https://docs.agora.io/cn/Voice/API%20Reference/web/interfaces/agorartc.client.html#enabledualstream\n      }).then(() => {\n\n      }).catch(console.warn).finally(() => {\n        rtc.current = false;\n      });\n    return () => {\n      const events = [\n        'onTokenPrivilegeWillExpire',\n        'onTokenPrivilegeDidExpire',\n        'error',\n        'stream-published',\n        'stream-subscribed',\n        'stream-added',\n        'stream-removed',\n        'peer-online',\n        'peer-leave',\n        'stream-fallback'\n      ]\n      for (let eventName of events) {\n        webClient.rtc.off(eventName, () => { });\n      }\n      console.log(\"[agora-web] remove event listener\");\n      !rtc.current && webClient.exit().then(() => {\n        console.log(\"[agora-web] do remove event listener\");\n      }).catch(console.warn)\n        .finally(() => {\n          rtc.current = true;\n          roomStore.removeLocalStream();\n        });\n\n    }\n  }, [roomState.me.uid, roomState.course.rid, roomState.rtcToken, location.pathname, me.role]);\n\n  return (\n    <div className={`classroom small-class`}>\n      <NativeSharedWindow />\n      <Nav />\n      {children}\n    </div>\n  );\n}\n\n","import React from 'react';\nimport './progress.scss';\nimport { CircularProgress } from '@material-ui/core';\n\ntype ProgressProps = {\n  title: string\n}\n\nexport const Progress: React.FC<ProgressProps> = ({\n  title,\n}) => {\n  return (\n    <div className=\"progress-cover\">\n      <div className=\"progress\">\n        <div className=\"content\">\n          <CircularProgress className=\"circular\"/>\n          <span className=\"title\">{title}...</span>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default React.memo(Progress);","import React, { useEffect, useState, useRef } from 'react'\nimport './whiteboard.scss'\nimport { Room } from 'white-web-sdk'\nimport { whiteboard } from '../stores/whiteboard'\nimport { t } from '../utils/i18n'\nimport { Progress } from '../components/progress/progress'\nimport stop from '../assets/stop.png'\nimport { useRoomState } from '../containers/root-container'\nimport { socketStore } from '../stores/socket'\nimport localStore from '../utils/local-store'\ninterface WhiteBoardProps {\n  room: Room\n  className: string\n  loading: boolean\n}\n\nexport default function Whiteboard({\n  room,\n  className,\n  loading\n}: WhiteBoardProps) {\n  let [text, setText] = useState('')\n  const [studentShow, setStudentShow] = useState(false) //身份  //学生  //教师\n  const [show, setShow] = useState(false)\n  let [flag, setFlag] = useState(false)\n\n  const roomState = useRoomState()\n  const role = roomState.me.role\n\n  let classState = socketStore.state.liveClassState\n  const liveDetail = localStore.get('liveDetail').value\n  const interval = useRef<any>(null)\n  const typeValue = window.localStorage.getItem('typeValue') || ''\n\n  useEffect(() => {\n    if (role === 'student') {\n      setStudentShow(true)\n    }\n\n    if (classState === 'STOP' || typeValue === 'STOP') {\n      //直播已暂停\n      setShow(true)\n      setFlag(true)\n      setText('老师暂停了课堂，请稍等~')\n    }\n    if (classState === 'START' || (typeValue == null && typeValue === '')) {\n      setFlag(true)\n      //直播已开始\n      setText('')\n      setShow(false)\n    }\n\n    if (classState === 'CLOSE' || liveDetail.status === 2) {\n      window.location.href = process.env.REACT_APP_API_DOMAIN + '/#/message'\n      return\n      //直播已关闭\n      // setShow(true)\n      // setFlag(true)\n      // setText('直播已结束')\n    }\n    window.localStorage.setItem('typeValue', classState)\n  }, [classState, liveDetail.status, role, typeValue])\n\n  useEffect(() => {\n    if (flag || liveDetail.status !== 0) return\n    let nowTime = new Date().getTime()\n    clearInterval(interval.current)\n    interval.current = setInterval(() => {\n      if (flag) {\n        clearInterval(interval.current)\n        return\n      }\n      nowTime = new Date().getTime()\n      if (liveDetail.startTime < nowTime) {\n        //小于当前时间\n        setShow(false)\n      } else if (\n        (liveDetail.startTime - nowTime) / 1000 / 60 > 0 &&\n        (liveDetail.startTime - nowTime) / 1000 / 60 < 30\n      ) {\n        //大于零小于三十\n        setShow(true)\n        setText('直播尚未开始，等老师点击开始课程后，此区域就能看到板书啦～ ')\n      } else if ((liveDetail.startTime - nowTime) / 1000 / 60 >= 30) {\n        //大于等于三十\n        setShow(true)\n        setText('直播前30分钟开放直播间，请稍后再来。')\n      } else {\n        setShow(false)\n      }\n    }, 1000)\n    return () => {\n      interval.current && clearInterval(interval.current)\n      interval.current = null\n    }\n  }, [flag, liveDetail.startTime, liveDetail.status])\n\n  useEffect(() => {\n    if (!room) return\n    room.bindHtmlElement(\n      document.getElementById('whiteboard') as HTMLDivElement\n    )\n    const $whiteboard = document.getElementById('whiteboard') as HTMLDivElement\n    whiteboard.updateRoomState()\n    if ($whiteboard) {\n      window.addEventListener('resize', (evt: any) => {\n        if (!whiteboard.state.loading) {\n          room.moveCamera({ centerX: 0, centerY: 0 })\n          room.refreshViewSize()\n        }\n      })\n      return () => {\n        window.removeEventListener('resize', (evt: any) => {})\n      }\n    }\n  }, [room, loading, role, classState, liveDetail.startTime])\n\n  return (\n    <div className=\"whiteboard\">\n      {liveDetail.status === 2 ? (\n        <div className={'toast-message'}>\n          <img className=\"img-icon\" src={stop} alt=\"\" />\n          <div className=\"desc\">该直播已结束，老师未录制视频，故不支持回放</div>\n        </div>\n      ) : (\n        <>\n          {studentShow && show && (\n            <div className={'toast-message'}>\n              <img className=\"img-icon\" src={stop} alt=\"\" />\n              <div className=\"desc\">{text}</div>\n            </div>\n          )}\n          {loading ? (\n            <Progress title={t('whiteboard.loading')}></Progress>\n          ) : null}\n          <div\n            id=\"whiteboard\"\n            className={`whiteboard-canvas ${className}`}\n          ></div>\n        </>\n      )}\n    </div>\n  )\n}\n","import React, { useRef } from 'react';\nimport Icon from '../icon';\nimport { roomStore } from '../../stores/room';\nimport { whiteboard } from '../../stores/whiteboard';\nimport moment from 'moment';\nimport { globalStore } from '../../stores/global';\nimport { getOSSUrl } from '../../utils/helper';\nimport { t } from '../../utils/i18n';\ninterface ControlItemProps {\n  name: string\n  onClick: (evt: any, name: string) => void\n  active: boolean\n  text?: string\n}\n\nconst ControlItem = (props: ControlItemProps) => {\n  const onClick = (evt: any) => {\n    props.onClick(evt, props.name);\n  }\n  return (\n    props.text ?\n      <div className={`control-btn control-${props.name}`} onClick={onClick}>\n        <div className={`btn-icon ${props.name} ${props.active ? 'active' : ''}`}\n          data-name={props.name} />\n        <div className=\"control-text\">{props.text}</div>\n      </div>\n      :\n      <Icon\n        data={props.name}\n        onClick={onClick}\n        className={`items ${props.name} ${props.active ? 'active' : ''}`}\n      />\n  )\n}\n\ninterface NoticeProps {\n  reason: string\n  text?: string\n}\n\ninterface ControlProps {\n  sharing: boolean\n  isHost?: boolean\n  current: string\n  currentPage: number\n  totalPage: number\n  role: string\n  notice?: NoticeProps\n  onClick: (evt: any, type: string) => void\n}\n\nexport default function Control({\n  sharing,\n  isHost,\n  current,\n  currentPage,\n  totalPage,\n  onClick,\n  role,\n  notice,\n}: ControlProps) {\n  const lock = useRef<boolean>(false);\n\n  const canStop = () => {\n    const timeMoment = moment(whiteboard.state.startTime).add(15, 'seconds');\n    if (+timeMoment >= +Date.now()) {\n      globalStore.showToast({\n        type: 'netlessClient',\n        message: t('toast.recording_too_short')\n      })\n      return false;\n    }\n    return true;\n  }\n\n  const onRecordButtonClick = (evt: any, type: string) => {\n    handleRecording(evt, type)\n      .then(() => { }).catch(console.warn);\n  }\n\n  const handleRecording = async (evt: any, type: string) => {\n    try {\n      const roomState = roomStore.state;\n      const me = roomState.me;\n      if (lock.current || !me.uid) return;\n\n      if (whiteboard.state.recording) {\n        if (!canStop()) return;\n        let mediaUrl = await whiteboard.stopRecording();\n        globalStore.showToast({\n          type: 'recording',\n          message: t('toast.stop_recording'),\n        });\n        if (whiteboard.state.endTime\n          && whiteboard.state.startTime) {\n          const { endTime, startTime, roomUUID } = whiteboard.clearRecording();\n          await roomStore.rtmClient.sendChannelMessage(JSON.stringify({\n            account: me.account,\n            url: getOSSUrl(mediaUrl),\n            link: `/replay/${roomUUID}/${startTime}/${endTime}/${mediaUrl}`\n          }));\n          const message = {\n            account: me.account,\n            id: me.uid,\n            link: `/replay/${roomUUID}/${startTime}/${endTime}/${mediaUrl}`,\n            text: '',\n            ts: +Date.now(),\n            message: {\n              type: 'text',\n              text: '',\n            },\n            timestamp: (new Date()).getTime(),\n            sender: {\n              id: me.uid,\n              avatar: me.avatar,\n              name: me.account\n            }\n          }\n          roomStore.updateChannelMessage(message);\n          return;\n        }\n      } else {\n        await whiteboard.startRecording();\n        globalStore.showToast({\n          type: 'recording',\n          message: t('toast.start_recording'),\n        });\n      }\n    } catch (err) {\n      if (err.recordingErr) {\n        globalStore.showToast({\n          type: 'recordingErr',\n          message: t('toast.recording_failed', { reason: err.recordingErr.message })\n        });\n      }\n    }\n  }\n\n  return (\n    <div className=\"controls-container\">\n      <div className=\"interactive\" >\n        {notice ?\n          <ControlItem name={notice.reason}\n            onClick={onClick}\n            active={notice.reason === current} />\n          : null}\n      </div>\n      {/* <div className=\"controls\"> */}\n      {!sharing && role === 'teacher' ?\n        <div className=\"controls\">\n          <ControlItem name={`first_page`}\n            active={'first_page' === current}\n            onClick={onClick} />\n          <ControlItem name={`prev_page`}\n            active={'prev_page' === current}\n            onClick={onClick} />\n          <div className=\"current_page\">\n            <span>{currentPage}/{totalPage}</span>\n          </div>\n          <ControlItem name={`next_page`}\n            active={'next_page' === current}\n            onClick={onClick} />\n          <ControlItem name={`last_page`}\n            active={'last_page' === current}\n            onClick={onClick} />\n          <div className=\"menu-split\" style={{ marginLeft: '7px', marginRight: '7px' }}></div>\n        </div> : null\n      }\n      {/*{role === 'teacher' ?*/}\n      {/*<>*/}\n      {/*<ControlItem*/}\n      {/*name={whiteboard.state.recording ? 'stop_recording' : 'recording'}*/}\n      {/*onClick={onRecordButtonClick}*/}\n      {/*active={false}*/}\n      {/*/>*/}\n      {/*<ControlItem*/}\n      {/*name={sharing ? 'quit_screen_sharing' : 'screen_sharing'}*/}\n      {/*onClick={onClick}*/}\n      {/*active={false}*/}\n      {/*text={sharing ? 'stop sharing' : ''}*/}\n      {/*/>*/}\n      {/*</> : null }*/}\n      {/* {role === 'student' ?\n          <>\n            <ControlItem\n              name={isHost ? 'hands_up_end' : 'hands_up'}\n              onClick={onClick}\n              active={false}\n              text={''}\n            />\n          </>\n         :null} */}\n      {/* </div> */}\n\n    </div>\n  )\n}\n","import { useMemo } from 'react';\nimport { SHARE_ID } from '../utils/agora-rtc-client';\nimport _ from 'lodash';\nimport { roomStore } from '../stores/room';\nimport { liveStore } from '../stores/live';\nimport { useRoomState } from '../containers/root-container';\n\ntype StreamValue ={\n  teacher: any\n  students: any[]\n  sharedStream: any\n  currentHost: any\n  onPlayerClick: (type: string, streamID: number, uid: string) => Promise<any>\n}\n\n\nexport default function useStream () {\n  const roomState = useRoomState();\n  const me = roomState.me;\n  const course = roomState.course;\n  const { creater, audienceList } = liveStore.state;\n\n  const teacher = useMemo(() => {\n    if (!creater.uid || !me.uid || !creater.online) return;\n    \n   \n    if (me.uid === creater.uid + '') {\n      // 如果创建者和当前浏览器是自己，则启用本地流\n      return {\n        ...roomState.rtc.localStream,\n        account: creater.name,\n        video: me.video,\n        audio: me.audio,\n        local: true,\n      }\n    } else {\n      \n      // when peer teacher stream is found\n      const remoteTeacherStream = roomState.rtc.remoteStreams.get(Number(creater.uid));\n      // debugger\n      if (remoteTeacherStream) {\n        return {\n          ...remoteTeacherStream,\n          account: creater.name,\n          video: 1,\n          audio: 1,\n        }\n      }\n      return {\n        streamID: creater.uid,\n        account: creater.name,\n        video:1,\n        audio: 1,\n      }\n    }\n  }, [creater.uid, creater.online, creater.name, me.uid, me.video, me.audio, roomState.rtc.localStream, roomState.rtc.remoteStreams]);\n\n  // \n  const students = useMemo(() => {\n    \n    const myAttr = audienceList.find(k => k.uid ===  me.uid);\n    // 如果用户列表没有该用户，则无法开启麦\n    if (!me.uid || audienceList.length === 0 ) return [];\n  \n    const studentStreams: any[] = [];\n   \n    audienceList.forEach(k => {\n      if(k.uid === me.uid && me.role === 'student'){\n        studentStreams.push({\n          ...roomState.rtc.localStream,\n          account: myAttr.name,\n          video: 0,\n          audio: myAttr.broadcast,\n          local: true,\n        })\n      }else{\n        \n        const stream = roomState.rtc.remoteStreams.get(+k.uid);\n        if(stream){\n          studentStreams.push({\n            ...stream,\n            streamID: k.uid,\n            account: k.name,\n            video: 0,\n            audio: k.broadcast,\n          });\n        }\n      }\n    })\n   \n   \n    console.log('[rtc users:]',studentStreams)\n    return studentStreams;\n  }, [audienceList, me.role, me.uid, roomState.rtc.localStream, roomState.rtc.remoteStreams]);\n\n  const sharedStream = useMemo(() => {\n    const sharedUid = SHARE_ID;\n    if (roomState.rtc.localSharedStream) {\n      const _tmpStream = {\n        ...roomState.rtc.localSharedStream,\n        video: 1,\n        audio: 1,\n      }\n      return _tmpStream;\n    }\n\n    const remoteStream = roomState.rtc.remoteStreams.get(sharedUid);\n\n    if (remoteStream) {\n      const _tmpStream = {\n        ...remoteStream,\n        video: 1,\n        audio: 1,\n      }\n      return _tmpStream;\n    }\n\n    return null;\n  }, [roomState.rtc.remoteStreams, roomState.rtc.localSharedStream]);\n\n  const currentHost = useMemo(() => {\n    if (!course.linkId) return null;\n    const linkId = ''+course.linkId;\n    const userAttr = roomState.users.get(linkId);\n    if (!userAttr) return null;\n    // when i am current broadcaster\n    if (me.uid === linkId) {\n      if (roomState.rtc.localStream) {\n        let _tmpStream = {\n          ...roomState.rtc.localStream,\n          account: userAttr.account,\n          video: userAttr.video,\n          audio: userAttr.audio,\n          local: true,\n          streamID: +me.uid,\n        }\n        return _tmpStream;\n      }\n    } else {\n      // when remote user is broadcaster\n      const peerUid = course.linkId;\n      const peerUserAttr = roomState.users.get(''+peerUid);\n      if (peerUid && peerUserAttr) {\n        const remoteStream = roomState.rtc.remoteStreams.get(peerUid);\n        if (remoteStream) {\n          let _tmpStream = {\n            ...remoteStream,\n            account: peerUserAttr.account,\n            video: peerUserAttr.video,\n            audio: peerUserAttr.audio,\n            streamID: +peerUid,\n          }\n          return _tmpStream;\n        }\n      }\n    }\n    return null;\n  }, [course.linkId, roomState.users, roomState.rtc.localStream, roomState.rtc.remoteStreams, me.uid]);\n\n  const value: StreamValue = {\n    teacher: teacher,\n    students: students,\n    sharedStream: sharedStream,\n    currentHost: currentHost,\n    onPlayerClick: async (type: string, streamID: number, uid: string) => {\n\n      console.log(\" click player \", type, streamID, uid);\n      const me = roomStore.state.me;\n      if (!roomStore.state.rtm.joined || !me.uid) return console.warn(\"please confirm joined rtm\");\n      const targetUser = roomStore.state.users.get(uid);\n      console.log(\"targetUser : \", targetUser);\n      if (!targetUser) return;\n\n      const targetUid = targetUser.uid;\n\n      console.log(\" click >>> targetUid: \", targetUid, \" type: \", type, \" streamID: \", streamID, \" uid: \", uid);\n\n      const video = Boolean(targetUser.video);\n      const audio = Boolean(targetUser.audio);\n      const chat = Boolean(targetUser.chat);\n\n      if (type === 'video') {\n        if (video) {\n          await roomStore.mute(targetUid, 'video');\n        } else {\n          await roomStore.unmute(targetUid, 'video');\n        }\n        return;\n      }\n\n      if (type === 'audio') {\n        if (audio) {\n          await roomStore.mute(targetUid, 'audio');\n        } else {\n          await roomStore.unmute(targetUid, 'audio');\n        }\n        return;\n      }\n\n      if (type === 'chat') {\n        if (chat) {\n          await roomStore.mute(targetUid, 'chat');\n        } else {\n          await roomStore.unmute(targetUid, 'chat');\n        }\n        return;\n      }\n    }\n  }\n  return value;\n}","import React from 'react';\nimport Icon from '../icon';\n\nconst ToolItem = (props: any) => {\n  const onClick = (evt: any) => {\n    props.onClick(evt, props.name);\n  }\n  return (\n    <Icon data={props.name}\n      onClick={onClick} className={`items ${props.name} ${props.active ? 'active' : ''}`} />\n  )\n}\n\ninterface ToolsProps {\n  items: any[]\n  currentTool: string\n  handleToolClick: (evt: any, name: string) => void\n};\n\nexport default function Tools (props: ToolsProps) {\n  return (\n    <div className=\"menu\">\n      {props.items.map((item: any, key: number) => (\n        <ToolItem key={key}\n          name={item.name}\n          onClick={props.handleToolClick}\n          active={props.currentTool === item.name}\n        >\n        </ToolItem>\n      ))}\n    </div>\n  )\n}\n","import { MultipartUploadResult } from 'ali-oss';\nimport uuidv4 from 'uuid/v4';\nimport {Room, PptConverter, PptKind, Ppt} from 'white-web-sdk';\nimport MD5 from 'js-md5';\nimport { whiteboard } from '../stores/whiteboard';\nimport { resolveFileInfo } from './helper';\n\nexport type imageSize = {\n  width: number\n  height: number\n};\n\nexport type PPTDataType = {\n    active: boolean\n    pptType: PPTType\n    id: string\n    data: any\n    cover?: any\n};\n\nexport enum PPTType {\n    dynamic = \"dynamic\",\n    static = \"static\",\n    init = \"init\",\n}\nexport type NetlessImageFile = {\n  width: number;\n  height: number;\n  file: File;\n  coordinateX: number;\n  coordinateY: number;\n};\n\nexport type TaskType = {\n  uuid: string,\n  imageFile: NetlessImageFile\n};\n\nexport type PPTProgressListener = (phase: PPTProgressPhase, percent: number) => void;\n\nexport enum PPTProgressPhase {\n  Uploading,\n  Converting,\n}\n\nexport class UploadManager {\n\n  private readonly ossClient: any;\n  private readonly room: Room;\n  private readonly ossUploadCallback?: (res: any) => void;\n  public constructor(ossClient: any, room: Room, ossUploadCallback?: (res: any) => void) {\n    this.ossClient = ossClient;\n    this.room = room;\n    this.ossUploadCallback = ossUploadCallback;\n  }\n\n  public async convertFile(\n    rawFile: File,\n    pptConverter: PptConverter,\n    kind: PptKind,\n    folder: string,\n    uuid: string,\n    onProgress?: PPTProgressListener,\n  ): Promise<void> {\n    const {fileType} = resolveFileInfo(rawFile);\n    const path = `/${folder}/${uuid}${fileType}`;\n    console.log('上传文件路径',path);\n    const pptURL = await this.addFile(path, rawFile, onProgress);\n    let res: Ppt;\n    if (kind === PptKind.Static) {\n        res = await pptConverter.convert({\n          url: pptURL,\n          kind: kind,\n          onProgressUpdated: progress => {\n            if (onProgress) {\n              onProgress(PPTProgressPhase.Converting, progress);\n            }\n          },\n        });\n        const documentFile: PPTDataType = {\n          active: true,\n          id: `${uuidv4()}`,\n          pptType: PPTType.static,\n          data: res.scenes,\n        };\n      console.log('documentFile',documentFile,res.scenes,rawFile);\n      const scenePath = MD5(`/${uuid}/${documentFile.id}`);\n        this.room.putScenes(`/${scenePath}`, res.scenes);\n        this.room.setScenePath(`/${scenePath}/${res.scenes[0].name}`);\n        console.log(\"current room state\", this.room.state);\n        whiteboard.updateRoomState({\n          name: rawFile.name,\n          type: fileType\n        });\n    } else {\n      console.log(\"convert no static ppt\");\n        res = await pptConverter.convert({\n          url: pptURL,\n          kind: kind,\n          onProgressUpdated: progress => {\n            if (onProgress) {\n              onProgress(PPTProgressPhase.Converting, progress);\n            }\n          },\n        });\n        const documentFile: PPTDataType = {\n          active: true,\n          id: `${uuidv4()}`,\n          pptType: PPTType.dynamic,\n          data: res.scenes,\n        };\n        const scenePath = MD5(`/${uuid}/${documentFile.id}`);\n        this.room.putScenes(`/${scenePath}`, res.scenes);\n        this.room.setScenePath(`/${scenePath}/${res.scenes[0].name}`);\n        whiteboard.updateRoomState({\n          name: rawFile.name,\n          type: fileType\n        });\n    }\n    if (onProgress) {\n        onProgress(PPTProgressPhase.Converting, 1);\n    }\n  }\n  private getImageSize(imageInnerSize: imageSize): imageSize {\n    const windowSize: imageSize = {width: window.innerWidth, height: window.innerHeight};\n    const widthHeightProportion: number = imageInnerSize.width / imageInnerSize.height;\n    const maxSize: number = 960;\n    if ((imageInnerSize.width > maxSize && windowSize.width > maxSize) || (imageInnerSize.height > maxSize && windowSize.height > maxSize)) {\n      if (widthHeightProportion > 1) {\n        return {\n          width: maxSize,\n          height: maxSize / widthHeightProportion,\n        };\n      } else {\n        return {\n          width: maxSize * widthHeightProportion,\n          height: maxSize,\n        };\n      }\n    } else {\n      if (imageInnerSize.width > windowSize.width || imageInnerSize.height > windowSize.height) {\n        if (widthHeightProportion > 1) {\n          return {\n            width: windowSize.width,\n            height: windowSize.width / widthHeightProportion,\n          };\n        } else {\n          return {\n            width: windowSize.height * widthHeightProportion,\n            height: windowSize.height,\n          };\n        }\n      } else {\n        return {\n          width: imageInnerSize.width,\n          height: imageInnerSize.height,\n        };\n      }\n    }\n  }\n  public async uploadImageFiles(imageFiles: File[], x: number, y: number, onProgress?: PPTProgressListener): Promise<void> {\n    const newAcceptedFilePromises = imageFiles.map(file => this.fetchWhiteImageFileWith(file, x, y));\n    const newAcceptedFiles = await Promise.all(newAcceptedFilePromises);\n    await this.uploadImageFilesArray(newAcceptedFiles, onProgress);\n  }\n\n  private fetchWhiteImageFileWith(file: File, x: number, y: number): Promise<NetlessImageFile> {\n    return new Promise(resolve => {\n      const image = new Image();\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => {\n        image.src = reader.result as string;\n        image.onload = async () => {\n          const res = this.getImageSize(image);\n          const imageFile: NetlessImageFile = {\n            width: res.width,\n            height: res.height,\n            file: file,\n            coordinateX: x,\n            coordinateY: y,\n          };\n          resolve(imageFile);\n        };\n      };\n    });\n  }\n  private async uploadImageFilesArray(imageFiles: NetlessImageFile[], onProgress?: PPTProgressListener): Promise<void> {\n    if (imageFiles.length > 0) {\n\n      const tasks: { uuid: string, imageFile: NetlessImageFile }[] = imageFiles.map(imageFile => {\n        return {\n          uuid: uuidv4(),\n          imageFile: imageFile,\n        };\n      });\n\n      for (const {uuid, imageFile} of tasks) {\n        const {x, y} = this.room.convertToPointInWorld({x: imageFile.coordinateX, y: imageFile.coordinateY});\n        this.room.insertImage({\n          uuid: uuid,\n          centerX: x,\n          centerY: y,\n          width: imageFile.width,\n          height: imageFile.height,\n        });\n      }\n      await Promise.all(tasks.map(task => this.handleUploadTask(task, onProgress)));\n      this.room.setMemberState({\n        currentApplianceName: \"selector\",\n      });\n    }\n  }\n  private async handleUploadTask(task: TaskType, onProgress?: PPTProgressListener): Promise<void> {\n    const fileUrl: string = await this.addFile(`${task.uuid}${task.imageFile.file.name}`, task.imageFile.file, onProgress);\n    this.room.completeImageUpload(task.uuid, fileUrl);\n  }\n\n  private getFile = (name: string): string => {\n    return this.ossClient.generateObjectUrl(name);\n  }\n  public addFile = async (path: string, rawFile: File, onProgress?: PPTProgressListener): Promise<string> => {\n    const res: MultipartUploadResult = await this.ossClient.multipartUpload(\n      path,\n      rawFile,\n      {\n        progress: (p: any) => {\n          if (onProgress) {\n            onProgress(PPTProgressPhase.Uploading, p);\n          }\n        },\n      });\n      if (this.ossUploadCallback) {\n        this.ossUploadCallback(res);\n      }\n    if (res.res.status === 200) {\n      return this.getFile(path);\n    } else {\n      throw new Error(`upload to ali oss error, status is ${res.res.status}`);\n    }\n  }\n}\n","import React from 'react';\nimport OSS from \"ali-oss\";\nimport uuidv4 from 'uuid/v4';\nimport { PPTProgressListener, UploadManager } from \"../../../utils/upload-manager\";\nimport { PptKind, Room } from \"white-web-sdk\";\nimport { ossConfig, ossClient, resolveFileInfo } from '../../../utils/helper';\nimport { whiteboard } from '../../../stores/whiteboard';\n\nexport type UploadBtnProps = {\n  room: Room,\n  uuid: string,\n  roomToken: string,\n  onProgress?: PPTProgressListener,\n  onFailure?: (err: any) => void,\n  onSuccess?: () => void,\n};\n\nexport const UploadBtn: React.FC<UploadBtnProps> = ({\n  room, uuid, roomToken,\n  onProgress, onFailure,\n  onSuccess\n}) => {\n  const uploadDynamic = async (event: any) => {\n    try {\n      const file = event.currentTarget.files[0];\n      if (file) {\n        const uploadManager = new UploadManager(ossClient, room);\n        const pptConverter = whiteboard.client.pptConverter(roomToken);\n        await uploadManager.convertFile(\n          file,\n          pptConverter,\n          PptKind.Dynamic,\n          ossConfig.folder,\n          uuid,\n          onProgress,\n        );\n        onSuccess && onSuccess();\n      }\n    } catch (err) {\n      onFailure && onFailure(err);\n      console.warn(err)\n    }\n  }\n\n  const uploadStatic = async (event: any) => {\n    try {\n      const file = event.currentTarget.files[0];\n      console.log('上传成功后file的内容',file);\n      if (file) {\n        const uploadManager = new UploadManager(ossClient, room);\n        const pptConverter = whiteboard.client.pptConverter(roomToken);\n        await uploadManager.convertFile(\n          file,\n          pptConverter,\n          PptKind.Static,\n          ossConfig.folder,\n          uuid,\n          onProgress);\n        onSuccess && onSuccess();\n      }\n    } catch (err) {\n      onFailure && onFailure(err)\n      console.warn(err)\n    }\n  }\n\n  const uploadImage = async (event: any) => {\n    try {\n      const file = event.currentTarget.files[0];\n      if (file) {\n        const uploadFileArray: File[] = [];\n        uploadFileArray.push(file);\n        const uploadManager = new UploadManager(ossClient, room);\n        const $whiteboard = document.getElementById('whiteboard') as HTMLDivElement;\n        if ($whiteboard) {\n          const { clientWidth, clientHeight } = $whiteboard;\n          await uploadManager.uploadImageFiles(uploadFileArray, clientWidth / 2, clientHeight / 2, onProgress);\n        } else {\n          const clientWidth = window.innerWidth;\n          const clientHeight = window.innerHeight;\n          await uploadManager.uploadImageFiles(uploadFileArray, clientWidth / 2, clientHeight / 2, onProgress);\n        }\n        onSuccess && onSuccess();\n      }\n    } catch (err) {\n      onFailure && onFailure(err)\n      console.warn(err)\n    }\n  }\n\n  const uploadAudioVideo = async (event: any) => {\n    const uploadManager = new UploadManager(ossClient, room);\n    const file = event.currentTarget.files[0];\n    if (file) {\n      try {\n        const {fileName, fileType} = resolveFileInfo(file);\n        const path = `/${ossConfig.folder}`\n        const uuid = uuidv4();\n        const res = await uploadManager.addFile(`${path}/video-${fileName}${uuid}`, file,\n          onProgress\n        );\n        const isHttps = res.indexOf(\"https\") !== -1;\n        let url;\n        if (isHttps) {\n          url = res;\n        } else {\n          url = res.replace(\"http\", \"https\");\n        }\n        const type = fileType.split(\".\")[1];\n        if (url && whiteboard.state.room) {\n          if (type.toLowerCase() === 'mp4') {\n            const res = whiteboard.state.room.insertPlugin('video', {\n              originX: 0,\n              originY: 0,\n              width: 480,\n              height: 270,\n              attributes: {\n                  pluginVideoUrl: url,\n              },\n            });\n            console.log(\"[upload-btn] video resource after insert plugin, res: \", res);\n          }\n          if (type.toLowerCase() === 'mp3') {\n            const res = whiteboard.state.room.insertPlugin('audio', {\n              originX: 0,\n              originY: 0,\n              width: 480,\n              height: 86,\n              attributes: {\n                  pluginAudioUrl: url,\n              },\n            });\n            console.log(\"[upload-btn] audio resource after insert plugin, res: \", res);\n          }\n          onSuccess && onSuccess();\n        }\n      } catch(err) {\n        onFailure && onFailure(err);\n      }\n    }\n  }\n\n  return (\n    <div className=\"upload-btn\">\n      <div className=\"upload-items\">\n        <label htmlFor=\"upload-image\">\n          <div className=\"upload-image-resource\"></div>\n          <div className=\"text-container\">\n            <div className=\"title\">上传图片</div>\n            <div className=\"description\">支持常见格式，可以改变图片大小和位置</div>\n          </div>\n        </label>\n        <input id=\"upload-image\" accept=\"image/*,.bmp,.jpg,.png,.gif\"\n          onChange={uploadImage} type=\"file\"></input>\n      </div>\n      {/*<div className=\"slice-dash\"></div>*/}\n      {/*<div className=\"upload-items\">*/}\n        {/*<label htmlFor=\"upload-dynamic\">*/}\n          {/*<div className=\"upload-dynamic-resource\"></div>*/}\n          {/*<div className=\"text-container\">*/}\n            {/*<div className=\"title\">Convert to Webpage</div>*/}\n            {/*<div className=\"description\">pptx only support</div>*/}\n          {/*</div>*/}\n        {/*</label>*/}\n        {/*<input id=\"upload-dynamic\" accept=\".pptx\" onChange={uploadDynamic} type=\"file\"></input>*/}\n      {/*</div>*/}\n      <div className=\"slice-dash\"></div>\n      <div className=\"upload-items\">\n        <label htmlFor=\"upload-static\">\n          <div className=\"upload-static-resource\"></div>\n          <div className=\"text-container\">\n            <div className=\"title\">资料转图片</div>\n            <div className=\"description\">支持 pptx, word, pdf</div>\n          </div>\n        </label>\n        <input id=\"upload-static\" accept=\".doc,.docx,.pptx,.pdf\" onChange={uploadStatic} type=\"file\"></input>\n      </div>\n      <div className=\"slice-dash\"></div>\n      <div className=\"upload-items\">\n        <label htmlFor=\"upload-video\">\n          <div className=\"upload-static-resource\"></div>\n          <div className=\"text-container\">\n            <div className=\"title\">上传audio/video</div>\n            <div className=\"description\">支持 mp4,mp3</div>\n          </div>\n        </label>\n        <input id=\"upload-video\" accept=\".mp4,.mp3\" onChange={uploadAudioVideo} type=\"file\"></input>\n      </div>\n    </div>\n  )\n}\n","import React from 'react';\nimport { SceneResource } from '../../../stores/whiteboard';\n\ntype ResourceMenuProps = {\n  active: number\n  items: SceneResource[]\n  onClose: (evt: any) => void\n  onClick: (rootPath: string) => void\n}\n\nexport const ResourcesMenu: React.FC<ResourceMenuProps> = (\n  {\n    onClose,\n    items,\n    active,\n    onClick\n  }\n) => {\n  return (\n    <div className=\"resource-menu-container\">\n      <div className=\"menu-header\">\n        <div className=\"menu-title\">文档中心</div>\n        <div className=\"menu-close\" onClick={onClose}></div>\n      </div>\n      <div className=\"menu-body\">\n        <div className=\"menu-items\">\n          {items.map((it: any, key: number) => (\n            <div key={key} className={`item ${active === key ? 'active' : ''} ${key} ${active}`}\n                onClick={() => {\n                  onClick(it.rootPath);\n                }}>\n              <div className={`cover-item ${it.file.type.match(/ppt/) ? 'ppt-cover' : 'doc-cover'}`}></div>\n              <div className=\"title\">{it.file.name}</div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from 'react';\nimport { Popover } from 'antd';\nexport type ScaleControllerProps = {\n  zoomScale: number\n  zoomChange: (scale: number) => void\n  onClick: () => void\n  onClickBoardLock: () => void\n};\n\nexport default class ScaleController extends React.Component<ScaleControllerProps, {}> {\n\n  private static readonly syncDuration: number = 200;\n\n  private static readonly dividingRule: ReadonlyArray<number> = Object.freeze(\n      [\n          0.10737418240000011,\n          0.13421772800000012,\n          0.16777216000000014,\n          0.20971520000000016,\n          0.26214400000000015,\n          0.3276800000000002,\n          0.4096000000000002,\n          0.5120000000000001,\n          0.6400000000000001,\n          0.8,\n          1,\n          1.26,\n          1.5876000000000001,\n          2.000376,\n          2.5204737600000002,\n          3.1757969376000004,\n          4.001504141376,\n          5.041895218133761,\n          6.352787974848539,\n          8.00451284830916,\n          10,\n      ],\n  );\n\n  private tempRuleIndex?: number;\n  private syncRuleIndexTimer: any = null;\n\n  public constructor(props: ScaleControllerProps) {\n      super(props);\n  }\n\n  private delaySyncRuleIndex(): void {\n      if (this.syncRuleIndexTimer !== null) {\n          clearTimeout(this.syncRuleIndexTimer);\n          this.syncRuleIndexTimer = null;\n      }\n      this.syncRuleIndexTimer = setTimeout(() => {\n          this.syncRuleIndexTimer = null;\n          this.tempRuleIndex = undefined;\n\n      }, ScaleController.syncDuration);\n  }\n\n  private static readRuleIndexByScale(scale: number): number {\n      const {dividingRule} = ScaleController;\n\n      if (scale < dividingRule[0]) {\n          return 0;\n      }\n      for (let i = 0; i < dividingRule.length; ++i) {\n          const prePoint = dividingRule[i - 1];\n          const point = dividingRule[i];\n          const nextPoint = dividingRule[i + 1];\n\n          const begin = prePoint === undefined ? Number.MIN_SAFE_INTEGER : (prePoint + point) / 2;\n          const end = nextPoint === undefined ? Number.MAX_SAFE_INTEGER : (nextPoint + point) / 2;\n\n          if (scale >= begin && scale <= end) {\n              return i;\n          }\n      }\n      return dividingRule.length - 1;\n  }\n\n  private moveTo100(): void {\n      this.tempRuleIndex = ScaleController.readRuleIndexByScale(1);\n      this.delaySyncRuleIndex();\n      this.props.zoomChange(1);\n  }\n\n\n  private moveRuleIndex(deltaIndex: number): void {\n\n      if (this.tempRuleIndex === undefined) {\n          this.tempRuleIndex = ScaleController.readRuleIndexByScale(this.props.zoomScale);\n      }\n      this.tempRuleIndex += deltaIndex;\n\n      if (this.tempRuleIndex > ScaleController.dividingRule.length - 1) {\n          this.tempRuleIndex = ScaleController.dividingRule.length - 1;\n\n      } else if (this.tempRuleIndex < 0) {\n          this.tempRuleIndex = 0;\n      }\n      const targetScale = ScaleController.dividingRule[this.tempRuleIndex];\n\n      this.delaySyncRuleIndex();\n      this.props.zoomChange(targetScale);\n  }\n\n  public render(): React.ReactNode {\n      return (\n        <div className=\"zoom-controls\">\n            <Popover content={'切换上传课件'} trigger=\"hover\" placement=\"top\">\n                <div className=\"zoom-icon\" onClick={() => this.props.onClick()} ></div>\n            </Popover>\n          <div className=\"zoom-hold\"></div>\n          <div className=\"zoom-size\">{Math.ceil(this.props.zoomScale * 100)} %</div>\n          <div className=\"zoom-items\">\n            <div className=\"item zoom-in\" onClick={() => this.moveRuleIndex(-1)}>-</div>\n            <div className=\"item zoom-out\" onClick={() => this.moveRuleIndex(+1)}>+</div>\n          </div>\n            <Popover content={'白板跟随'} trigger=\"hover\" placement=\"top\">\n                <div className=\"lock-board\" onClick={() => this.props.onClickBoardLock() }></div>\n            </Popover>\n        </div>\n      );\n  }\n}\n","import React, { useRef, useEffect, useState } from 'react';\n\nimport './upload-notice.scss';\nimport { useGlobalState } from '../../../containers/root-container';\n\ntype UploadNoticeProps = {\n  title: string\n  type: string\n}\n\nconst UploadNotice: React.FC<UploadNoticeProps> = ({\n  type,\n  title\n}) => {\n  return (\n    <div className={`notice-container ${type}`}>\n      <span className={`icon-${type}`}></span>\n      <span className=\"title\">{title}</span>\n    </div>\n  )\n}\n\nexport interface NoticeMessage {\n  title: string\n  key?: number\n  type: string\n}\n\ntype NoticeContext = {\n  state: NoticeMessage\n  Notice: (state: NoticeMessage) => any\n}\n\nconst UploadNoticeContext = React.createContext({} as NoticeContext);\n\nexport const useUploadNotice = () => React.useContext(UploadNoticeContext);\n\nconst duration = 1500;\n\nexport const UploadNoticeContainer: React.FC<{}> = () => {\n\n  const globalState = useGlobalState();\n\n  const uploadNotice = globalState.uploadNotice;\n\n  const queueRef = React.useRef<NoticeMessage[]>([]);\n  const [messages, setMessages] = useState<NoticeMessage[]>([]);\n  const timerRef = useRef<any>(null);\n\n  useEffect(() => {\n    if (messages.length > 0 && timerRef.current === null) {\n      timerRef.current = setTimeout(() => {\n        queueRef.current.shift()\n        setMessages([...queueRef.current]);\n        timerRef.current = null;\n      }, duration);\n    }\n  }, [messages]);\n\n  useEffect(() => {\n    if (!uploadNotice.title || !uploadNotice.type) return;\n    if (queueRef.current) {\n      queueRef.current.push({\n        ...uploadNotice,\n        key: +Date.now()\n      })\n      setMessages([...queueRef.current]);\n    }\n  }, [uploadNotice]);\n\n  return (\n    <div className=\"upload-notice\">\n      {messages.map((it: any, idx: number) => \n        <UploadNotice key={`${idx}${it.key}`}\n          type={it.type}\n          title={it.title}\n        />\n      )}\n    </div>\n  )\n}\n\nexport const UploadNoticeView = React.memo(UploadNoticeContainer);","import React, { useMemo, useEffect, useState, useRef, useCallback } from 'react'\nimport Whiteboard from './whiteboard'\nimport VideoPlayer from '../components/VideoPlayer'\nimport Control from './whiteboard/control'\nimport { AgoraStream } from '../utils/types'\nimport useStream from '../hooks/use-streams'\nimport { useLocation } from 'react-router'\nimport Tools from './whiteboard/tools'\nimport { SketchPicker, RGBColor } from 'react-color'\nimport { UploadBtn } from './whiteboard/upload/upload-btn'\nimport { ResourcesMenu } from './whiteboard/resources-menu'\nimport ScaleController from './whiteboard/scale-controller'\nimport { PPTProgressPhase } from '../utils/upload-manager'\nimport { UploadNoticeView } from '../components/whiteboard/upload/upload-notice'\nimport Progress from '../components/progress/progress'\nimport {\n  useRoomState,\n  useWhiteboardState,\n  useGlobalState\n} from '../containers/root-container'\nimport { roomStore } from '../stores/room'\nimport { whiteboard } from '../stores/whiteboard'\nimport { liveStore } from '../stores/live'\nimport { globalStore } from '../stores/global'\n\nimport 'white-web-sdk/style/index.css'\nimport { ViewMode } from 'white-web-sdk'\nimport { t } from '../utils/i18n'\n\nconst pathName = (path: string): string => {\n  const reg = /\\/([^/]*)\\//g\n  reg.exec(path)\n  if (RegExp.$1 === 'aria') {\n    return ''\n  } else {\n    return RegExp.$1\n  }\n}\n\ninterface MediaBoardProps {\n  handleClick?: (type: string) => void\n  children?: any\n}\n\nconst MediaBoard: React.FC<MediaBoardProps> = ({ handleClick, children }) => {\n  const roomState = useRoomState()\n\n  const whiteboardState = useWhiteboardState()\n\n  const role = roomState.me.role\n  const room = whiteboardState.room\n  const me = roomState.me\n  const course = roomState.course\n  const rtmState = roomState.rtm\n\n  const ref = useRef<any>(false)\n\n  const [pageTool, setPageTool] = useState<string>('')\n\n  const { sharedStream } = useStream()\n\n  const shared = roomState.rtc.shared\n\n  useEffect(() => {\n    if (!shared) return\n\n    const rtcClient = roomStore.rtcClient\n\n    const webClient = rtcClient\n    // WARN: IF YOU ENABLED APP CERTIFICATE, PLEASE SIGN YOUR TOKEN IN YOUR SERVER SIDE AND OBTAIN IT FROM YOUR OWN TRUSTED SERVER API\n    const screenShareToken = ''\n    webClient\n      .startScreenShare(screenShareToken)\n      .then(() => {\n        webClient.shareClient.on('onTokenPrivilegeWillExpire', (evt: any) => {\n          // WARN: IF YOU ENABLED APP CERTIFICATE, PLEASE SIGN YOUR TOKEN IN YOUR SERVER SIDE AND OBTAIN IT FROM YOUR OWN TRUSTED SERVER API\n          const newToken = ''\n          webClient.shareClient.renewToken(newToken)\n        })\n        webClient.shareClient.on('onTokenPrivilegeDidExpire', (evt: any) => {\n          // WARN: IF YOU ENABLED APP CERTIFICATE, PLEASE SIGN YOUR TOKEN IN YOUR SERVER SIDE AND OBTAIN IT FROM YOUR OWN TRUSTED SERVER API\n          const newToken = ''\n          webClient.shareClient.renewToken(newToken)\n        })\n        webClient.shareClient.on('stopScreenSharing', (evt: any) => {\n          console.log('stop screen share', evt)\n          webClient\n            .stopScreenShare()\n            .then(() => {\n              globalStore.showToast({\n                message: t('toast.canceled_screen_share'),\n                type: 'notice'\n              })\n              roomStore.setScreenShare(false)\n            })\n            .catch(console.warn)\n            .finally(() => {\n              console.log('[agora-web] stop share')\n            })\n        })\n        const localShareStream = webClient.shareClient._localStream\n        const _stream = new AgoraStream(\n          localShareStream,\n          localShareStream.getId(),\n          true\n        )\n        roomStore.addLocalSharedStream(_stream)\n      })\n      .catch((err: any) => {\n        roomStore.setScreenShare(false)\n        if (err.type === 'error' && err.msg === 'NotAllowedError') {\n          globalStore.showToast({\n            message: t('toast.canceled_screen_share'),\n            type: 'notice'\n          })\n        }\n        if (err.type === 'error' && err.msg === 'PERMISSION_DENIED') {\n          globalStore.showToast({\n            message: t('toast.screen_sharing_failed', { reason: err.msg }),\n            type: 'notice'\n          })\n        }\n        console.warn(err)\n      })\n      .finally(() => {\n        console.log('[agora-web] start share')\n      })\n    return () => {\n      console.log('before shared change', shared)\n      shared &&\n        webClient\n          .stopScreenShare()\n          .then(() => {\n            roomStore.setScreenShare(false)\n          })\n          .catch(console.warn)\n          .finally(() => {\n            console.log('[agora-web] stop share')\n          })\n    }\n  }, [shared])\n\n  const handlePageTool: any = (evt: any, type: string) => {\n    setPageTool(type)\n    console.log('[page-tool] click ', type)\n    if (type === 'first_page') {\n      changePage(1, true)\n    }\n\n    if (type === 'last_page') {\n      changePage(totalPage, true)\n    }\n\n    if (type === 'prev_page') {\n      changePage(currentPage - 1)\n    }\n\n    if (type === 'next_page') {\n      changePage(currentPage + 1)\n    }\n\n    if (type === 'screen_sharing') {\n      roomStore.setScreenShare(true)\n    }\n\n    if (type === 'quit_screen_sharing') {\n      roomStore.setScreenShare(false)\n    }\n\n    if (type === 'peer_hands_up') {\n      globalStore.showDialog({\n        type: 'apply',\n        message: `${globalStore.state.notice.text}`\n      })\n      setPageTool('')\n    }\n\n    if (handleClick) {\n      handleClick(type)\n    }\n  }\n\n  const isHost = useMemo(() => {\n    return +roomStore.state.me.uid === +roomStore.state.course.linkId\n  }, [])\n\n  const location = useLocation()\n\n  const current = useMemo(() => {\n    return whiteboardState.scenes.get(whiteboardState.currentScenePath)\n  }, [whiteboardState.scenes, whiteboardState.currentScenePath])\n\n  const totalPage = useMemo(() => {\n    if (!current) return 0\n    return current.totalPage\n  }, [current])\n\n  const currentPage = useMemo(() => {\n    if (!current) return 0\n    return current.currentPage + 1\n  }, [current])\n\n  const addNewPage: any = (evt: any) => {\n    if (!current) return\n    // const newIndex = netlessClient.state.sceneState.scenes.length;\n    const newIndex = room.state.sceneState.index + 1\n    const scenePath = room.state.sceneState.scenePath\n    const currentPath = `/${pathName(scenePath)}`\n    room.putScenes(currentPath, [{}], newIndex)\n    room.setSceneIndex(newIndex)\n    whiteboard.updateRoomState()\n  }\n\n  const changePage = (idx: number, force?: boolean) => {\n    if (ref.current || !current) return\n    const _idx = idx - 1\n    if (_idx < 0 || _idx >= current.totalPage) return\n    if (force) {\n      room.setSceneIndex(_idx)\n      whiteboard.updateRoomState()\n      return\n    }\n    if (current.type === 'dynamic') {\n      if (_idx > current.currentPage) {\n        room.pptNextStep()\n        console.log('room.pptNextStep')\n      } else {\n        room.pptPreviousStep()\n        console.log('room.pptPreviousStep')\n      }\n    } else {\n      room.setSceneIndex(_idx)\n      console.log('room.setSceneIndex', _idx)\n    }\n    whiteboard.updateRoomState()\n  }\n\n  const showControl: boolean = useMemo(() => {\n    if (me.role === 'teacher') return true\n    if (location.pathname.match(/live/)) {\n      if (me.role === 'student') {\n        return true\n      }\n    }\n    return false\n  }, [location.pathname, me.role])\n\n  const items = [\n    {\n      name: 'selector'\n    },\n    {\n      name: 'pencil'\n    },\n    {\n      name: 'rectangle'\n    },\n    {\n      name: 'ellipse'\n    },\n    {\n      name: 'text'\n    },\n    {\n      name: 'eraser'\n    },\n    {\n      name: 'color_picker'\n    },\n    {\n      name: 'add'\n    },\n    {\n      name: 'upload'\n    },\n    {\n      name: 'hand_tool'\n    }\n  ]\n\n  const toolItems = useMemo(() => {\n    return items.filter((item: any) => {\n      if (role === 'teacher') return item\n      if (['add', 'folder', 'upload'].indexOf(item.name) === -1) {\n        if (item.name === 'hand_tool') {\n          if (course.lockBoard) {\n            return false\n          } else {\n            return true\n          }\n        }\n        return item\n      }\n    })\n  }, [course.lockBoard, items, role])\n\n  const drawable: string = useMemo(() => {\n    if (me.role === 'teacher') {\n      return 'drawable'\n    }\n    if (me.role === 'student') {\n      console.log(\n        'agora pathname: >>>>>>> ',\n        location.pathname,\n        me.grantBoard,\n        me.role,\n        Boolean(me.grantBoard)\n      )\n      if (Boolean(me.grantBoard)) {\n        return 'drawable'\n      } else {\n        return 'panel'\n      }\n    }\n    return 'drawable'\n  }, [me.role, me.grantBoard, location])\n\n  const [tool, setTool] = useState<string | any>(\n    drawable === 'drawable' ? 'pencil' : ''\n  )\n\n  const [selector, updateSelector] = useState<string>('')\n\n  const handleToolClick = (evt: any, name: string) => {\n    if (!room) return\n    if (\n      ['upload', 'color_picker', 'hand_tool'].indexOf(name) !== -1 &&\n      name === tool\n    ) {\n      setTool('')\n      if (name === 'hand_tool') {\n        room.handToolActive = false\n        updateSelector('')\n      }\n      return\n    }\n    if (name !== 'hand_tool') {\n      room.handToolActive = false\n      updateSelector('')\n    }\n    setTool(name)\n    if (\n      name === 'upload' ||\n      name === 'folder' ||\n      name === 'color_picker' ||\n      name === 'add' ||\n      name === 'hand_tool'\n    ) {\n      if (name === 'hand_tool') {\n        room.handToolActive = true\n        updateSelector('hand')\n        room.setMemberState({ currentApplianceName: 'selector' })\n      } else {\n        if (name === 'add' && addNewPage) {\n          addNewPage()\n        }\n      }\n      return\n    }\n    room.setMemberState({ currentApplianceName: name })\n  }\n\n  const onColorChanged = (color: any) => {\n    if (!room) return\n    const { rgb } = color\n    const { r, g, b } = rgb\n    room.setMemberState({\n      strokeColor: [r, g, b]\n    })\n  }\n\n  const lock = useRef<boolean>(false)\n\n  useEffect(() => {\n    return () => {\n      lock.current = true\n      whiteboard\n        .destroy()\n        .then(() => {\n          console.log('destroy whiteboard')\n        })\n        .catch(console.warn)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (!rtmState.joined) return\n    const { tokenInfo } = liveStore.state\n    if (!lock.current && !whiteboard.state.room) {\n      lock.current = true\n      whiteboard\n        .join({\n          uuid: tokenInfo.whiteBoardUuid,\n          roomToken: tokenInfo.whiteBoardToken,\n          userPayload: {\n            userId: roomStore.state.me.uid,\n            identity: roomStore.state.me.role === 'teacher' ? 'host' : 'guest'\n          }\n        })\n        .then(() => {\n          console.log('join whiteboard success')\n        })\n        .catch(console.warn)\n        .finally(() => {\n          lock.current = false\n        })\n    }\n\n    if (\n      !lock.current &&\n      course.boardId &&\n      me.boardId !== course.boardId &&\n      whiteboard.state.room\n    ) {\n      lock.current = true\n      whiteboard\n        .join({\n          uuid: tokenInfo.whiteBoardUuid,\n          roomToken: tokenInfo.whiteBoardToken,\n          userPayload: {\n            userId: roomStore.state.me.uid,\n            identity: roomStore.state.me.role === 'teacher' ? 'host' : 'guest'\n          }\n        })\n        .then(() => {\n          console.log('rejoin whiteboard success')\n        })\n        .catch(console.warn)\n        .finally(() => {\n          lock.current = false\n        })\n    }\n  }, [rtmState.joined, me.boardId, course.boardId])\n\n  const [uploadPhase, updateUploadPhase] = useState<string>('')\n  const [convertPhase, updateConvertPhase] = useState<string>('')\n\n  useEffect(() => {\n    console.log(\n      '[mediaboard] uploadPhase: ',\n      uploadPhase,\n      ' convertPhase: ',\n      convertPhase\n    )\n  }, [uploadPhase, convertPhase])\n\n  const UploadPanel = useCallback(() => {\n    if (tool !== 'upload' || !room) return null\n    return (\n      <UploadBtn\n        room={room}\n        uuid={room.uuid}\n        roomToken={room.roomToken}\n        onProgress={(phase: PPTProgressPhase, percent: number) => {\n          console.log('[onProgress] phase: ', phase, ' percent: ', percent)\n          if (phase === PPTProgressPhase.Uploading) {\n            if (percent < 1) {\n              !uploadPhase && updateUploadPhase('uploading')\n            } else {\n              updateUploadPhase('upload_success')\n            }\n            return\n          }\n\n          if (phase === PPTProgressPhase.Converting) {\n            if (percent < 1) {\n              !convertPhase && updateConvertPhase('converting')\n            } else {\n              updateConvertPhase('convert_success')\n            }\n            return\n          }\n        }}\n        onSuccess={() => {\n          console.log('on success')\n        }}\n        onFailure={(err: any) => {\n          // WARN: capture exception\n          if (uploadPhase === 'uploading') {\n            updateUploadPhase('upload_failure')\n            return\n          }\n          if (convertPhase === 'converting') {\n            updateConvertPhase('convert_failure')\n            return\n          }\n        }}\n      />\n    )\n  }, [tool, room, uploadPhase, convertPhase])\n\n  useEffect(() => {\n    if (uploadPhase === 'upload_success') {\n      globalStore.showUploadNotice({\n        title: t('room.upload_success'),\n        type: 'ok'\n      })\n    }\n    if (uploadPhase === 'convert_failure') {\n      globalStore.showUploadNotice({\n        title: t('room.upload_failure'),\n        type: 'error'\n      })\n    }\n  }, [uploadPhase])\n\n  useEffect(() => {\n    if (convertPhase === 'convert_success') {\n      globalStore.showUploadNotice({\n        title: t('room.convert_success'),\n        type: 'ok'\n      })\n    }\n    if (convertPhase === 'convert_failure') {\n      globalStore.showUploadNotice({\n        title: t('room.convert_failure'),\n        type: 'error'\n      })\n    }\n  }, [convertPhase])\n\n  useEffect(() => {\n    if (!me.role || !room) return\n    if (me.role === 'teacher') {\n      if (roomStore.state.course.lockBoard) {\n        room.setViewMode(ViewMode.Broadcaster)\n      } else {\n        room.setViewMode(ViewMode.Freedom)\n      }\n    }\n\n    if (me.role === 'student') {\n      if (roomStore.state.course.lockBoard) {\n        room.handToolActive = false\n        room.disableCameraTransform = true\n      } else {\n        room.disableCameraTransform = false\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [me.role, roomStore.state.course.lockBoard, room])\n\n  const globalState = useGlobalState()\n\n  const scale = whiteboardState.scale ? whiteboardState.scale : 1\n\n  const UploadProgressView = useCallback(() => {\n    if (uploadPhase === 'uploading') {\n      return <Progress title={t('room.uploading')} />\n    } else if (convertPhase === 'converting') {\n      return <Progress title={t('room.converting')} />\n    }\n    return null\n  }, [uploadPhase, convertPhase])\n\n  let strokeColor: RGBColor | undefined = undefined\n\n  if (\n    whiteboardState.room &&\n    whiteboardState.room.state.memberState.strokeColor\n  ) {\n    const color = whiteboardState.room.state.memberState.strokeColor\n    strokeColor = {\n      r: color[0],\n      g: color[1],\n      b: color[2]\n    }\n  }\n\n  return (\n    <div className={`media-board ${drawable}`}>\n      {sharedStream ? (\n        <VideoPlayer\n          id={`${sharedStream.streamID}`}\n          domId={`shared-${sharedStream.streamID}`}\n          className={'screen-sharing'}\n          streamID={sharedStream.streamID}\n          stream={sharedStream.stream}\n          video={true}\n          audio={true}\n          local={sharedStream.local}\n        />\n      ) : (\n        <Whiteboard\n          loading={whiteboardState.loading}\n          className={selector}\n          room={room}\n        />\n      )}\n      {role === 'teacher' ? (\n        <div className=\"layer\">\n          {!sharedStream ? (\n            <>\n              <Tools\n                items={toolItems}\n                currentTool={tool}\n                handleToolClick={handleToolClick}\n              />\n              {tool === 'color_picker' && strokeColor ? (\n                <SketchPicker\n                  color={strokeColor}\n                  onChangeComplete={onColorChanged}\n                />\n              ) : null}\n            </>\n          ) : null}\n          <UploadPanel />\n          {children ? children : null}\n        </div>\n      ) : null}\n      {me.role === 'teacher' && room ? (\n        <ScaleController\n          zoomScale={scale}\n          onClick={() => {\n            setTool('folder')\n          }}\n          onClickBoardLock={() => {\n            console.log(111111)\n            whiteboard\n              .lock()\n              .then(console.log)\n              .catch(console.warn)\n          }}\n          zoomChange={(scale: number) => {\n            room.moveCamera({ scale })\n            whiteboard.updateScale(scale)\n          }}\n        />\n      ) : null}\n      {showControl ? (\n        <Control\n          notice={globalState.notice}\n          role={role}\n          sharing={Boolean(sharedStream)}\n          current={pageTool}\n          currentPage={currentPage}\n          totalPage={totalPage}\n          isHost={isHost}\n          onClick={handlePageTool}\n        />\n      ) : null}\n      {tool === 'folder' && whiteboardState.room ? (\n        <ResourcesMenu\n          active={whiteboardState.activeDir}\n          items={whiteboardState.dirs}\n          onClick={(rootPath: string) => {\n            if (room) {\n              room.setScenePath(rootPath)\n              room.setSceneIndex(0)\n              whiteboard.updateRoomState()\n            }\n          }}\n          onClose={(evt: any) => {\n            setTool('')\n          }}\n        />\n      ) : null}\n      <UploadNoticeView />\n      <UploadProgressView />\n    </div>\n  )\n}\n\nexport default React.memo(MediaBoard)\n","import React, { useState, useEffect } from 'react';\nimport './index.scss';\nimport { Link } from 'react-router-dom';\nimport { useRoomState } from '../../containers/root-container';\ninterface MessageProps {\n  time: string\n  nickname: string\n  content: string\n  link?: string\n  sender?: boolean\n  avatar?: string\n}\n\nexport const Message: React.FC<MessageProps> = ({\n  time,\n  nickname,\n  content,\n  link,\n  sender,\n  avatar,\n}) => {\n\n  const roomState = useRoomState();\n  const [data, setData] = useState('');\n\n  useEffect(() => {\n    let time1 = new Date(parseInt(time));\n    const h = time1.getHours() + '';\n    const mm = time1.getMinutes() + '';\n    setData(`${h.padStart(2, \"0\")}:${mm.padStart(2, \"0\")}`)\n\n    return () => {\n      setData('')\n\n    }\n  }, [time]);\n\n\n  const text = React.useMemo(() => {\n    if (link && roomState.course.rid) {\n      return (\n        <Link to={`${link}?rid=${roomState.course.rid}`} target=\"_blank\">course recording</Link>\n      )\n    }\n    return link ? link : content;\n  }, [content, link, roomState.course.rid])\n\n  return (\n\n    <div className={`message ${sender ? 'sent' : 'receive'}`}>\n      {sender ?\n        <div className=\"user-info\">\n          <div className=\"nickname\">\n            {nickname}\n          </div>\n          <img className=\"user-img\" src={avatar ? avatar : require('../../assets/user_avatar_default.png')} />\n        </div> :\n        <div className=\"user-info\">\n          <img className=\"user-img\" src={avatar ? avatar : require('../../assets/user_avatar_default.png')} />\n          <div className=\"nickname\">\n            {nickname}\n          </div>\n        </div>\n      }\n\n      <div className=\"content\">\n        <p>{text}</p>\n        <div>{data}</div>\n      </div>\n    </div>\n  )\n}","import React, { useRef, useEffect, useState } from 'react'\nimport { Message } from './message'\nimport { Input } from '@material-ui/core'\nimport Button from '../custom-button'\nimport './panel.scss'\nimport { MessageObj } from '../../utils/types'\nimport { useRoomState } from '../../containers/root-container'\nimport { t } from '../../utils/i18n'\nimport { liveStore } from '../../stores/live'\nimport { setDiscussionStatus } from '../../api/live'\n\ninterface ChatPanelProps {\n  value: string\n  sendMessage: (evt: any, others?: any) => void\n  handleChange: (evt: any) => void\n}\n\nconst regexPattern = /^\\s+/\n\nconst truncateBlank: (m: string) => string = (message: string) =>\n  message.replace(regexPattern, '')\n\nexport default function ChatPanel({\n  value,\n  sendMessage,\n  handleChange\n}: ChatPanelProps) {\n  const ref = useRef(null)\n  const [refs, setRefs] = useState(ref)\n\n  const scrollDown = (current: any) => {\n    setRefs((current.scrollTop = current.scrollHeight))\n  }\n\n  useEffect(() => {\n    scrollDown(ref.current)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [liveStore.state.messageList])\n\n  const roomState = useRoomState()\n\n  const setStatus = async () => {\n    let formData = {\n      closeDiscussion: !liveStore.state.discussionStatus\n    }\n    // @ts-ignore\n    const { code } = await setDiscussionStatus(\n      liveStore.state.detail.houseName,\n      formData\n    )\n    console.log('开关麦科锋')\n    if (code === 0) {\n      const type = liveStore.state.discussionStatus ? 'openTopic' : 'closeTopic'\n      await sendMessage('', {\n        type: type,\n        state: liveStore.state.discussionStatus\n      })\n    }\n  }\n\n  const getNickname = (param: any) => {\n    if (Number(param.sender.id) === Number(liveStore.state.creater.uid)) {\n      return `授课人${param.sender.name}`\n    } else {\n      return param.sender.name\n    }\n  }\n\n  return (\n    <>\n      <div className=\"chat-messages-container\">\n        <div className=\"chat-messages\" ref={ref}>\n          {liveStore.state.messageList.map((item: MessageObj, key: number) => (\n            <div key={key}>\n              {!item.isSystem && (\n                <Message\n                  time={item.timestamp + ''}\n                  avatar={item.sender.avatar}\n                  nickname={getNickname(item)}\n                  content={item.message.text}\n                  sender={item.sender.id === roomState.me.uid}\n                />\n              )}\n              {item.isSystem && (\n                <div className=\"system-message\">\n                  <span className=\"ms-item\">{item.message.text}</span>\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n      <div className=\"message-panel\">\n        {liveStore.state.detail.identify === 'teacher' ? (\n          <div\n            className={`icon ${\n              liveStore.state.discussionStatus\n                ? 'icon-chat-off'\n                : 'icon-chat-on'\n            }`}\n            onClick={async (evt: any) => {\n              await setStatus()\n            }}\n          ></div>\n        ) : null}\n        <Input\n          disabled={\n            liveStore.state.discussionStatus &&\n            liveStore.state.detail.identify === 'student'\n          }\n          value={value}\n          placeholder={\n            liveStore.state.discussionStatus &&\n            liveStore.state.detail.identify === 'student'\n              ? '老师已关闭讨论~'\n              : '说点什么～'\n          }\n          disableUnderline\n          className={'message-input'}\n          onKeyPress={async (evt: any) => {\n            if (evt.key === 'Enter') {\n              const val = truncateBlank(value)\n              val.length > 0 && (await sendMessage(val))\n            }\n          }}\n          onChange={handleChange}\n        />\n        {liveStore.state.discussionStatus &&\n        liveStore.state.detail.identify === 'student' ? null : (\n          <Button\n            className={'chat-panel-btn'}\n            name={t('chat.send')}\n            onClick={async (evt: any) => {\n              const val = truncateBlank(value)\n              val.length > 0 && (await sendMessage(val))\n            }}\n          />\n        )}\n      </div>\n    </>\n  )\n}\n","import React, { useRef, useState, useEffect } from 'react';\nimport './student-list.scss';\nimport Icon from './icon';\nimport { useRoomState } from '../containers/root-container';\nimport { roomStore } from '../stores/room';\nimport { get } from 'lodash';\nimport useChatText from '../hooks/use-chat-text'\nimport { putDownHands, setForbiddenStatus } from '../api/live'\nimport { liveStore, Audience } from '../stores/live';\n\n\ninterface CustomIconProps {\n  value: boolean\n  type: string\n  icon: string\n  id: string\n  onClick: (evt: any, id: string, type: string) => any\n}\n\nfunction CustomIcon({\n  value,\n  icon,\n  id,\n  type,\n  onClick\n}: CustomIconProps) {\n  const handleClick = (evt: any) => {\n    onClick(evt, id, type);\n  }\n  return (\n    <div className=\"items\">\n      {/* {value ? */}\n      <Icon className={`icon-${icon}-${value ? \"on\" : \"off\"}`}\n        onClick={handleClick}\n      />\n      {/* : null } */}\n    </div>\n  )\n}\n\ninterface UserProps {\n  uid: string\n  account: string\n  video: number\n  audio: number\n  chat: number\n}\n\ninterface StudentListProps {\n  role: string\n}\n\nexport default function StudentList({\n  role\n}: StudentListProps) {\n  const {\n    sendMessage\n  } = useChatText();\n  const state = useRoomState();\n  const liveRoomName = liveStore.state.detail.houseName\n\n  const me = state.me;\n  const lock = useRef<any>(false);\n  const [isHand, setIsHandsUp] = useState(false);\n\n  const handleClick = (evt: any, id: string, type: string) => {\n    if (!roomStore.state || !me) return;\n    const targetUser = roomStore.state.users.get(id);\n    if (!targetUser) return;\n    if (!lock.current) {\n      const val = Boolean(get(targetUser, type));\n      lock.current = true;\n      if (val) {\n        roomStore.mute(targetUser.uid, type)\n          .then(() => {\n          }).catch(console.warn)\n          .finally(() => {\n            lock.current = false;\n          });\n      } else {\n        roomStore.unmute(targetUser.uid, type)\n          .then(() => {\n          }).catch(console.warn)\n          .finally(() => {\n            lock.current = false;\n          });\n      }\n    }\n  }\n\n  const setForbidden = async (flag: number, broadcast?: boolean, token?: string, uid?: string) => {\n    if (flag === 1) {\n      if (liveStore.state.allForbidden) return\n\n      const formData = {\n        all: liveStore.state.allForbidden ? 'cancel' : 'forbidden'\n      }\n\n      // @ts-ignore\n      const { code } = await setForbiddenStatus(formData, liveRoomName)\n\n      if (code !== 0) return\n\n      const type = liveStore.state.allForbidden ? 'cancelMute' : 'mute'\n      await sendMessage('', { type: type })\n      console.log('全部禁言')\n    } else {\n      // broadcast 为true 表示学生正在讲话 forbiddenWord为true 表示设置为禁言\n      const formData = {\n        users: [\n          {\n            userId: token,\n            forbiddenWord: broadcast\n          }\n        ]\n      }\n\n      // @ts-ignore\n      const { code } = await setForbiddenStatus(formData, liveRoomName)\n\n      if (code !== 0) return\n\n      const type = broadcast ? 'mute' : 'cancelMute'\n      await sendMessage('', { type: type, uid: uid })\n      console.log('单个禁言', code)\n    }\n\n  }\n\n\n  useEffect(() => {\n    let handsUp = liveStore.state.audienceList.length > 0 && liveStore.state.audienceList.some(item => item.handsUp)\n    setIsHandsUp(handsUp)\n\n    return () => {\n      setIsHandsUp(false)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [liveStore.state.audienceList]);\n\n  // 主播清除所有的举手\n  const cancelHands = async () => {\n    if (!isHand) return\n    // @ts-ignore\n    const { code } = await putDownHands(liveRoomName)\n    if (code === 0) {\n\n      // 广播给所有学生发一条消息\n      sendMessage('', { type: 'handoff' })\n    }\n  }\n\n  // 主播清除个人的举手 putDownSingleHand\n  // const cancelSingHands = async (item: any) => {\n  //   if (!item.handsUp) return\n\n  //   const param = { singleToken: item.token }\n  //   // @ts-ignore\n  //   const { code } = await putDownSingleHand(liveRoomName, param)\n\n  //   if (code === 0) {\n  //     // 广播给所有学生发一条消息\n  //     sendMessage('', { type: \"handsingoff\", uid: item.uid })\n  //   }\n  // }\n\n\n  const { audienceList } = liveStore.state\n  const onlineNum = audienceList.filter(k=> k.online).length\n  return (\n    <div className=\"student-list\">\n      <div className=\"student-tit\">授课</div>\n      <div className=\"item\">\n        <img className=\"avatar\" alt=\"头像\" src={`${liveStore.state.creater.avatar}`} />\n        <div className=\"nickname\">{liveStore.state.creater.name}</div>\n        <div className=\"attrs-group\">\n          {/* {creater.online && <CustomIcon type=\"chat\" id={creater.uid} value={Boolean(creater.chat)} icon=\"chat\" onClick={handleClick} />} */}\n\n          {/* {liveStore.state.creater.online && <CustomIcon type=\"audio\" id={liveStore.state.creater.uid} value={Boolean(liveStore.state.creater.audio)} icon=\"audio\" onClick={handleClick} />} */}\n        </div>\n        {liveStore.state.openState && <div>{liveStore.state.creater.online ? '在线' : '不在线'}</div>}\n      </div>\n      <div className=\"student-tit\">观众<span>({onlineNum}人在线 {audienceList.length - onlineNum}人不在线)</span></div>\n      {role === 'teacher' ?\n        < div className=\"btn-box\">\n          <button onClick={cancelHands} className={isHand ? '' : 'color-gray'}>取消举手</button>\n          {onlineNum > 0 ? <button className={liveStore.state.allForbidden ? 'color-gray' : ''} onClick={async (evt: any) => {\n            await setForbidden(1)\n          }} >{liveStore.state.allForbidden ? '取消禁言' : '全部禁言'}</button> : null}\n        </div>\n        : null}\n\n      {\n        liveStore.state.audienceList.map((item: Audience, key: number) => (\n          <div key={key} className=\"item\">\n            <img className=\"avatar\" alt=\"头像\" src={`${item.avatar}`} />\n            <div className=\"nickname\">{item.name}</div>\n            <div className=\"attrs-group\">\n              {item.online && role === 'teacher' && <CustomIcon  type=\"audio\" id={item.uid} value={Boolean(item.broadcast)} icon=\"audio\" onClick={async (evt: any) => {\n                await setForbidden(2, item.broadcast, item.token, item.uid)\n              }} />}\n\n              {/* 未完成 */}\n              {item.online && role === 'student' && me.uid === item.uid && <span className=\"item-box\">{item.broadcast ? '已开麦' : '已关麦'}</span>}\n            </div>\n\n            {/* 如果是本人显示本人的状态 */}\n            {Number(me.uid) === Number(item.uid) ? <span className=\"item-box\">{item.handsUp ? '已举手' : ''}</span> : null}\n\n            {/* 如果是老师的话显示所有人的状态 */}\n            {role === 'teacher' ?\n              <span  className=\"item-box\">{item.handsUp ? '已举手' : '未举手'}</span> : null}\n\n            {/* // <img className='hands' onClick={() => { cancelSingHands(item) }} src={item.handsUp && isHand ? handsUpImg : handsDownImg} />\n              : null} */}\n\n            {liveStore.state.openState && <div className=\"item-box tr\">{item.online ? '在线' : '不在线'}</div>}\n          </div>\n        ))\n      }\n    </div >\n  )\n\n}\n\n","import React from 'react'\nimport './live-data.scss'\nimport localStore from '../utils/local-store'\nimport { formatTime, transformWeekDay, getFileType } from '../utils/tool'\n\nexport default function LiveData() {\n  const liveDetail = localStore.get('liveDetail').value\n\n  return (\n    <>\n      <div className=\"live-data\">\n        <div className=\"item-date-box\">\n          <span>标题：</span>\n          <div className=\"item-date-info\">{liveDetail.title}</div>\n        </div>\n        <div className=\"item-date-box\">\n          <span>科目：</span>\n          <div className=\"item-date-info\">{liveDetail.subject}</div>\n        </div>\n        <div className=\"item-date-box\">\n          <span>授课：</span>\n          <div className=\"item-date-info\">{liveDetail.teacherName}</div>\n        </div>\n        <div className=\"item-date-box\">\n          <span>时间：</span>\n          <div className=\"item-date-info\">\n            {transformWeekDay(\n              formatTime(liveDetail.startTime, false, 'MM月DD日(d)')\n            )}\n            {formatTime(liveDetail.startTime, false, 'HH:mm')}-\n            {formatTime(liveDetail.endTime, false, 'HH:mm')}\n          </div>\n        </div>\n        <div className=\"item-date-box\">\n          <span>班级：</span>\n          <div className=\"item-date-info\">\n            {liveDetail.classroomList.join('、')}\n          </div>\n        </div>\n        <div className=\"item-date-box\">\n          <span>备注：</span>\n          <div className=\"item-date-info\">{liveDetail.content}</div>\n        </div>\n        <div className=\"live-img-box\">\n          {liveDetail.images && liveDetail.images.map(item => {\n            return (\n              <img\n                key={item.thumbnail}\n                src={item.thumbnail}\n                data-source={item.original}\n                alt=\"图片\"\n              />\n            )\n          })}\n        </div>\n        {liveDetail.attachements && liveDetail.attachements.map(item => {\n          return (\n            <a\n              className=\"link-box live-file-container text-substring\"\n              href={item.id}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              key={item.id}\n              download={item.name}\n            >\n              <img\n                className=\"file-icon\"\n                src={getFileType(item.name).icon}\n                alt=\"icon\"\n              />\n              <span className=\"file-name\">{item.name}</span>\n              <i>.{item.name.split('.')[1]}</i>\n            </a>\n          )\n        })}\n      </div>\n    </>\n  )\n}\n","import React, { useRef, useEffect,useState } from 'react';\nimport VideoPlayer from '../VideoPlayer';\nimport { liveStore } from '../../stores/live'\nimport './index.scss';\nimport useStream from '../../hooks/use-streams';\n\nimport { AgoraMediaStream } from '../../utils/types';\n\n\nfunction VideoMarquee() {\n\n  const {teacher, students, onPlayerClick} = useStream();\n\n  const marqueeEl = useRef(null);\n\n  const { resumList } = liveStore.state\n\n\n  const ref = useRef<boolean>(false);\n\n  useEffect(() => {\n    return () => {\n      ref.current = true;\n    }\n  }, []);\n\n\n  return (\n    <div className=\"video-marquee-container\">\n      {teacher ?\n        <VideoPlayer\n          role=\"teacher\"\n          domId={`dom-${teacher.streamID}`}\n          id={`${teacher.streamID}`}\n          streamID={teacher.streamID}\n          stream={teacher.stream}\n          account={teacher.account}\n          audio={Boolean(teacher.audio)}\n          video={Boolean(teacher.video)}\n          local={Boolean(teacher.local)}\n          handleClick={onPlayerClick}\n        />\n        :\n        <VideoPlayer role=\"teacher\" account={'teacher'} video audio streamID={0} />\n        }\n      <div className=\"video-marquee-mask\" >\n        <div className=\"video-marquee\" ref={marqueeEl}>\n          {students.map((student: AgoraMediaStream, key: number) => (\n            <VideoPlayer\n              role=\"student\"\n              domId={`dom-${student.streamID}`}\n              key={`${key}${student.streamID}`}\n              id={`${student.streamID}`}\n              account={student.account}\n              streamID={student.streamID}\n              stream={student.stream}\n              video={student.video}\n              audio={student.audio}\n              local={student.local}\n              handleClick={onPlayerClick}\n            />\n          ))}\n        </div>\n      </div>\n      {resumList.length > 0 && <div className=\"clickable\" onClick={() => {\n         resumList.forEach(stream => {\n          stream.resume().then(() => {\n            console.log(\"clickable\",stream);\n            liveStore.deleteResumList(stream)\n          }).catch(console.warn);\n         })\n     \n    }}></div> }\n    </div>\n  )\n}\nexport default React.memo(VideoMarquee);","import React from 'react';\nimport ChatPanel from './chat/panel';\nimport StudentList from './student-list';\nimport LiveData from './live-data';\nimport useChatText from '../hooks/use-chat-text';\nimport { useGlobalState } from '../containers/root-container';\nimport { globalStore } from '../stores/global';\nimport VideoMarquee from '../components/VideoMarquee';\nimport '../pages/classroom/big-class.scss';\nimport { liveStore } from 'stores/live';\n\nexport default function Roomboard (props: any) {\n  const {\n    role, value, sendMessage, handleChange\n  } = useChatText();\n\n  const { active } = useGlobalState();\n\n  const { audienceList } = liveStore.state\n  const onlineNum = audienceList.filter(k=> k.online).length\n  return (\n    <>\n    \n    <div className={`small-class chat-board`}>\n      <VideoMarquee />\n      <div className=\"chat-box\">\n        <div className=\"menu\">\n          {liveStore.state.openState && role === 'student' && <div onClick={() => { globalStore.setActive('chatroom') }} className={`item ${active === 'chatroom' ? 'active' : ''}`}>讨论\n          </div>}\n          {role === 'teacher' && <div onClick={() => { globalStore.setActive('chatroom') }} className={`item ${active === 'chatroom' ? 'active' : ''}`}>讨论\n          </div>}\n          <div onClick={() => { globalStore.setActive('liveData') }} className={`item ${active === 'liveData' ? 'active' : ''}`}>资料</div>\n          <div onClick={() => { globalStore.setActive('studentList') }} className={`item ${active === 'studentList' ? 'active' : ''}`}>观众({ onlineNum }/{ audienceList.length })</div>\n        </div>\n        <div className={`chat-container ${(active === 'chatroom' && liveStore.state.openState && role === 'student') ? '' : 'hide'}`}>\n          <ChatPanel\n            value={value}\n            sendMessage={sendMessage}\n            handleChange={handleChange} />\n        </div>\n        <div className={`chat-container ${(active === 'chatroom' && role === 'teacher') ? '' : 'hide'}`}>\n          <ChatPanel\n            value={value}\n            sendMessage={sendMessage}\n            handleChange={handleChange} />\n        </div>\n        <div className={`student-container ${active === 'studentList' ? '' : 'hide'}`}>\n          <StudentList\n            role={role}\n          />\n        </div>\n        <div className={`live-container ${active === 'liveData' ? '' : 'hide'}`}>\n          <LiveData />\n        </div>\n      </div>\n    </div>\n    </>\n  )\n}","import React, { useRef, useEffect } from 'react';\nimport MediaBoard from '../../components/mediaboard';\nimport Roomboard from '../../components/roomboard';\n\n\n\n\n\nimport './small-class.scss';\n\nexport default function SmallClass(props) {\n\n    return (\n        <div className=\"room-container\" >\n            <div className=\"container\">\n                <MediaBoard />\n                <Roomboard currentActive={'media'} />\n            </div>\n        </div>\n\n    )\n}\n","import React, { useState,useRef,useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport useTokenLogin from \"../hooks/use-token-join\"\n\nimport { RoomPage } from './classroom';\nimport SmallClass from './classroom/small-class';\n\nfunction HomePage(props) {\n\n    const [showRoom, setShowRoom] = useState<Boolean>(false);\n    // 获取路由参数\n    const {liveId} = useParams();\n\n    const lock = useRef<boolean>(false);\n\n    const { joinRtm } = useTokenLogin(liveId)\n\n    useEffect(() => {\n        lock.current = true;\n        // 加入rtm\n        joinRtm(()=>{\n            setShowRoom(true);\n        })\n        return () => {\n        lock.current = false;\n        }\n    }, [joinRtm]);\n    \n    return (\n        <React.Fragment >\n            {showRoom && <RoomPage>\n                <SmallClass />\n            </RoomPage>}\n        </React.Fragment>\n    )\n}\nexport default React.memo(HomePage);\n","\nimport { roomStore } from './../stores/room';\nimport { useEffect, useRef, useState } from 'react';\nimport { getLiveDetail, getAgoraToken, getDiscussionStatus, getLiveAudiences,getLiveUid } from \"../api/live\";\nimport { liveStore } from '../stores/live';\nimport { globalStore } from '../stores/global';\nimport localStore, { LocalKey } from '../utils/local-store'\nimport { t } from '../utils/i18n';\n\ninterface TokenData {\n  rtcToken: string\n  rtmToken: string\n}\nexport default function useTokenLogin(liveId: string) {\n\n  const lock = useRef<boolean>(false);\n  const [tokenData, setTokenData] = useState<TokenData>({\n    rtcToken: \"\",\n    rtmToken: \"\"\n  });\n\n  const userInfo = localStore.get(LocalKey.userInfo)\n  const { userId, userName } = userInfo\n  const formData = {\n    token: userId,\n    liveId\n  }\n\n  useEffect(() => {\n    if (lock.current) {\n      return\n    }\n    lock.current = true;\n    async function fetchData() {\n      const detaiData = await getLiveDetail(formData)\n      console.log('detaiData\\'detaiData\\'，\\'detaiData\\'，',detaiData);\n      localStore.set('liveDetail', detaiData.data)\n      const { id, uid, classroomId, liveHouseName, senderId, title, status, startTime, endTime,whiteBoard } = detaiData.data\n      const identify = senderId === userId ? 'teacher' : 'student'\n      liveStore.setDetail({\n        identify,\n        id, // 直播消息id 多个id 对应一个houseName\n        classroomId, //\n        senderId, // 创建者id\n        houseName: liveHouseName, // 房间名字\n        title, // 直播的主题\n        status,\n        uid,\n        startTime,\n        endTime\n      })\n      const params = {\n        liveHouseName,\n        uid\n      }\n      const promises = [getAgoraToken({ ...params, type: 'RTM' }), getAgoraToken({ ...params, type: 'RTC' }),getLiveUid()];\n      const tokens = await Promise.all(promises);\n      liveStore.setTokenInfo({\n        rtmToken: tokens[0].data.token,\n        rtcToken: tokens[1].data.token, \n        rtcUid: tokens[2].data.uid,\n        whiteBoardToken: whiteBoard.token, \n        whiteBoardUuid: whiteBoard.uuid\n      })\n      setTokenData({\n        rtmToken: tokens[0].data.token,\n        rtcToken: tokens[1].data.token, \n      })\n      lock.current = false\n      // 设置直播间讨论状态\n      const resStatus = await getDiscussionStatus(liveId)\n      const { closeDiscussion } = resStatus.data\n      liveStore.setDiscussionStatus(closeDiscussion)\n\n      // 获取当前用户的禁言状态\n      // const forData = await getForbiddenStatus(liveHouseName)\n      // let forbiddenWords = true\n      // if (forData.code === 0) {\n      //   forbiddenWords = forData.data.forbiddenWord\n      // }\n\n      // 获取观众列表\n      const resAudience = await getLiveAudiences(liveId)\n      const { list,anchor } = resAudience.data\n      const audienceList = (list || []).filter(k => k.token !== anchor.token)\n      audienceList.forEach(item => {\n        item.uid = item.uid + ''\n        item.avatar = item.avatar || require('../assets/user_avatar_default.png')\n      })\n      anchor.avatar = anchor.avatar || require('../assets/user_avatar_default.png')\n      liveStore.setAudienceList(audienceList)\n      liveStore.setCreater(anchor)\n    }\n    fetchData()\n    return () => {\n      lock.current = false;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n\n  return {\n    joinRtm: async (success: () => void, error?: () => void) => {\n      if (lock.current) {\n        return\n      }\n      const { uid, houseName, identify, title } = liveStore.state.detail\n      const { audienceList } = liveStore.state\n      const user = audienceList.find(k => k.token === userId) || {} as any\n      const { rtmToken, rtcToken } = tokenData\n      const payload = {\n        uid: uid + \"\", // 需要修改 从接口拿\n        rid: houseName,\n        role: identify, // 从跳转参数和登录信息 判断 teacher student\n        roomName: title, // 房间名字\n        video: 0,\n        // audio: identify=== 'teacher' ? 1 : user.broadcast ? 1 : 0,\n        audio: 0,\n        chat: 1,\n        account: userName, // userInfo.name 登录信息拿到用户的名字\n        rtmToken,\n        rtcToken,\n        boardId: '',\n        linkId: 0,\n        sharedId: 0,\n        lockBoard: 0,\n      }\n\n      globalStore.showLoading()\n      try {\n        lock.current = true;\n        await roomStore.loginAndJoin(payload)\n        await roomStore.updateSessionInfo(payload);\n        const onlineIds = await roomStore.rtmClient._currentChannel.getMembers()\n        liveStore.setOnlineIds(onlineIds)\n        success()\n      } catch (err) {\n        error && error()\n        if (err.reason) {\n          globalStore.showToast({\n            type: 'rtmClient',\n            message: t('toast.rtm_login_failed_reason', { reason: err.reason }),\n          })\n        } else {\n          globalStore.showToast({\n            type: 'rtmClient',\n            message: t('toast.rtm_login_failed'),\n          })\n        }\n      } finally {\n        lock.current = false;\n        globalStore.stopLoading();\n      }\n\n    }\n  }\n}\n","import React, { useEffect } from 'react';\nimport {useHistory} from 'react-router-dom';\nimport SettingCard from '../components/setting-card';\nimport { roomStore } from '../stores/room';\n\nfunction DeviceTest() {\n  const history = useHistory();\n\n  const handleClick = (evt: any) => {\n    history.goBack();\n  }\n\n  useEffect(() => {\n    const webClient = roomStore.rtcClient;\n      return () => {\n        if (webClient.tmpStream) {\n          webClient.tmpStream.isPlaying() && webClient.tmpStream.stop();\n          webClient.tmpStream.close();\n        }\n      }\n  }, []);\n\n  return (\n    <div className={`flex-container  home-cover-web`}>\n      <SettingCard handleFinish={handleClick} />\n    </div>\n  )\n}\n\nexport default React.memo(DeviceTest);","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { useGlobalState } from '../containers/root-container';\n\nconst useStyles = makeStyles(theme => ({\n  progress: {\n    margin: theme.spacing(2),\n    color: '#44A2FC'\n  },\n  container: {\n    position: 'absolute',\n    top: '0px',\n    left: '0px',\n    height: '100%',\n    width: '100%',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    background: '#ffffff',\n    opacity: 0.8,\n    zIndex: 10\n  }\n}));\n\nexport const Loading: React.FC<{}> = () => {\n  const classes = useStyles();\n  return (\n    <div className={classes.container}>\n      <CircularProgress className={classes.progress} />\n    </div>\n  );\n}\n\nexport default function LoadContainer () {\n\n  const state = useGlobalState();\n\n  const loading = state.loading;\n\n  return (\n    loading ? <Loading /> : null\n  )\n}","import React, { useEffect, useRef, useState } from 'react';\nimport './index.scss';\nimport {useGlobalState} from '../../containers/root-container';\n\n\nexport interface SnackbarMessage {\n  message: string;\n  key: number;\n}\n\ninterface SnackbarsProps {\n  duration?: number\n}\n\nexport default function ConsecutiveSnackbars({\n  duration = 1500\n}: SnackbarsProps) {\n\n  const globalState = useGlobalState();\n\n  const queueRef = React.useRef<SnackbarMessage[]>([]);\n  const [messages, setMessages] = useState<SnackbarMessage[]>([]);\n  const timerRef = useRef<any>(null);\n\n  useEffect(() => {\n    if (messages.length > 0 && timerRef.current === null) {\n      timerRef.current = setTimeout(() => {\n        queueRef.current.shift()\n        setMessages([...queueRef.current]);\n        timerRef.current = null;\n      }, duration);\n    }\n  }, [duration, messages]);\n\n  useEffect(() => {\n    if (queueRef.current && globalState.toast.message) {\n      queueRef.current.push({\n        message: globalState.toast.message,\n        key: +Date.now()\n      })\n      setMessages([...queueRef.current]);\n    }\n  }, [globalState.toast]);\n\n  return (\n    <div className=\"notice-message-container\">\n      {messages.map((message: any, idx: number) => \n        <div key={`${idx}${message.key}`} className={\"custom-toast\"}>\n          <div className=\"toast-container\">\n            <span className=\"text\">{message.message}</span>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n","import React, {useMemo} from 'react';\nimport Button from '../custom-button';\nimport {Dialog, DialogContent, DialogContentText} from '@material-ui/core';\n\nimport './dialog.scss';\nimport { useGlobalState } from '../../containers/root-container';\nimport { roomStore } from '../../stores/room';\nimport { globalStore } from '../../stores/global';\nimport { useHistory } from 'react-router-dom';\nimport { RoomMessage } from '../../utils/agora-rtm-client';\nimport { t } from '../../utils/i18n';\n\ninterface RoomProps {\n  onConfirm: (type: string) => void\n  onClose: (type: string) => void\n  desc: string\n  type: string\n}\n\nfunction RoomDialog(\n{\n  onConfirm,\n  onClose,\n  desc,\n  type\n}: RoomProps) {\n\n  const handleClose = () => {\n    onClose(type)\n  };\n\n  const handleConfirm = () => {\n    onConfirm(type)\n  }\n\n  return (\n    <div>\n      <Dialog\n        disableBackdropClick\n        open={true}\n        onClose={handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogContent\n          className=\"modal-container\"\n        >\n          <DialogContentText className=\"dialog-title\">\n            {desc}\n          </DialogContentText>\n          <div className=\"button-group\">\n            <Button name={t(\"toast.confirm\")} className=\"confirm\" onClick={handleConfirm} color=\"primary\" />\n            <Button name={t(\"toast.cancel\")} className=\"cancel\" onClick={handleClose} color=\"primary\" />\n          </div>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n\nconst DialogContainer = () => {\n\n  const history = useHistory();\n  const {dialog} = useGlobalState();\n\n  const visible = useMemo(() => {\n    if (!dialog.type) return false;\n    return true;\n  }, [dialog]);\n\n  const onClose = (type: string) => {\n    if (type === 'exitRoom') {\n      globalStore.removeDialog();\n      // window.location.replace(`/#/`)\n    }\n    else if (type === 'apply') {\n      roomStore.rtmClient.sendPeerMessage(\n        `${roomStore.applyUid}`, {cmd: RoomMessage.rejectCoVideo}\n      ).then(() => {\n        globalStore.removeDialog();\n      }).catch(console.warn);\n    }\n  }\n\n  const onConfirm = (type: string) => {\n    if (type === 'exitRoom') {\n      globalStore.removeDialog();\n      window.location.replace(`/#/`)\n    }\n    else if (type === 'apply') {\n      Promise.all([\n        roomStore.rtmClient.sendPeerMessage(\n          `${roomStore.applyUid}`, {cmd: RoomMessage.acceptCoVideo}\n        ),\n        roomStore.updateCourseLinkUid(roomStore.applyUid)\n      ]).then(() => {\n        console.log(\"applyUid\");\n        globalStore.removeNotice();\n        globalStore.removeDialog();\n      }).catch(console.warn);\n    }\n\n    return;\n  }\n\n  return (\n    visible ?\n      <RoomDialog\n        type={dialog.type}\n        desc={dialog.message}\n        onClose={onClose}\n        onConfirm={onConfirm}\n      /> :\n      null\n  )\n}\n\n\nexport default React.memo(DialogContainer);\n","import React, { useEffect, useMemo, useRef, useCallback, useState } from 'react';\nimport './replay.scss';\nimport Slider from '@material-ui/core/Slider';\nimport { Subject } from 'rxjs';\nimport { Player, PlayerPhase } from 'white-web-sdk';\nimport { useParams, useLocation } from 'react-router';\nimport moment from 'moment';\nimport { Progress } from '../components/progress/progress';\nimport { globalStore } from '../stores/global';\nimport { WhiteboardAPI, RTMRestful } from '../api';\nimport { whiteboard } from '../stores/whiteboard';\nimport \"video.js/dist/video-js.css\";\nimport { getOSSUrl } from '../utils/helper';\nimport { t } from '../utils/i18n';\nimport GlobalStorage from '../utils/custom-storage';\n\nexport interface IPlayerState {\n  beginTimestamp: number\n  duration: number\n  roomToken: string\n  mediaURL: string\n  isPlaying: boolean\n  progress: number\n  player: any\n\n  currentTime: number\n  phase: PlayerPhase\n  isFirstScreenReady: boolean\n  isPlayerSeeking: boolean\n  seenMessagesLength: number\n  isChatOpen: boolean\n  isVisible: boolean\n  replayFail: boolean\n}\n\nexport const defaultState: IPlayerState = {\n  beginTimestamp: 0,\n  duration: 0,\n  roomToken: '',\n  mediaURL: '',\n  isPlaying: false,\n  progress: 0,\n  player: null,\n\n  currentTime: 0,\n  phase: PlayerPhase.Pause,\n  isFirstScreenReady: false,\n  isPlayerSeeking: false,\n  seenMessagesLength: 0,\n  isChatOpen: false,\n  isVisible: false,\n  replayFail: false,\n}\n\nclass ReplayStore {\n  public subject: Subject<IPlayerState> | null;\n  public state: IPlayerState | null;\n\n  constructor() {\n    this.subject = null;\n    this.state = null;\n  }\n\n  initialize() {\n    this.subject = new Subject<IPlayerState>();\n    this.state = defaultState;\n    this.subject.next(this.state);\n  }\n\n  subscribe(setState: any) {\n    this.initialize();\n    this.subject && this.subject.subscribe(setState);\n  }\n\n  unsubscribe() {\n    this.subject && this.subject.unsubscribe();\n    this.state = null;\n    this.subject = null;\n  }\n\n  commit(state: IPlayerState) {\n    this.subject && this.subject.next(state);\n  }\n\n  setPlayer(player: Player) {\n    if (!this.state) return;\n    this.state = {\n      ...this.state,\n      player\n    }\n    this.commit(this.state);\n  }\n\n  setCurrentTime(scheduleTime: number) {\n    if (!this.state) return;\n    this.state = {\n      ...this.state,\n      currentTime: scheduleTime\n    }\n    this.commit(this.state);\n  }\n\n  updatePlayerStatus(isPlaying: boolean) {\n    if (!this.state) return;\n\n    this.state = {\n      ...this.state,\n      isPlaying,\n    }\n    if (!this.state.isPlaying && this.state.player) {\n      this.state.player.seekToScheduleTime(0);\n    }\n    console.log(\"updatePlayer this.state \", this.state);\n    this.commit(this.state);\n  }\n\n  updateProgress(progress: number) {\n    if (!this.state) return\n    this.state = {\n      ...this.state,\n      progress\n    }\n    this.commit(this.state);\n  }\n\n  setReplayFail(val: boolean) {\n    if (!this.state) return\n    this.state = {\n      ...this.state,\n      replayFail: val\n    }\n    this.commit(this.state);\n  }\n\n  updatePhase(phase: PlayerPhase) {\n    if (!this.state) return\n    let isPlaying = this.state.isPlaying;\n\n    if (phase === PlayerPhase.Playing) {\n      isPlaying = true;\n    }\n\n    if (phase === PlayerPhase.Ended || phase === PlayerPhase.Pause) {\n      isPlaying = false;\n    }\n\n    this.state = {\n      ...this.state,\n      phase,\n      isPlaying,\n    }\n    \n    this.commit(this.state);\n  }\n\n  loadFirstFrame() {\n    if (!this.state) return\n    this.state = {\n      ...this.state,\n      isFirstScreenReady: true,\n    }\n    this.commit(this.state);\n  }\n\n  \n  async joinRoom(_uuid: string) {\n    return await WhiteboardAPI.joinRoom(_uuid);\n  }\n}\n\nconst store = new ReplayStore();\n\nconst ReplayContext = React.createContext({} as IPlayerState);\n\nconst useReplayContext = () => React.useContext(ReplayContext);\n\nconst ReplayContainer: React.FC<{}> = () => {\n  const [state, setState] = React.useState<IPlayerState>(defaultState);\n\n  React.useEffect(() => {\n    store.subscribe((state: any) => {\n      setState(state);\n    });\n    return () => {\n      store.unsubscribe();\n    }\n  }, []);\n\n  const value = state;\n\n  return (\n    <ReplayContext.Provider value={value}>\n      <Replay />\n    </ReplayContext.Provider>\n  )\n}\n\nexport default ReplayContainer;\n\nexport const Replay: React.FC<{}> = () => {\n  const state = useReplayContext();\n\n  const player = useMemo(() => {\n    if (!store.state || !store.state.player) return null;\n    return store.state.player as Player;\n  }, []);\n\n\n  const handlePlayerClick = useCallback(() => {\n    if (!store.state || !player) return;\n\n    if (player.phase === PlayerPhase.Playing) {\n      player.pause();\n      return;\n    }\n    if (player.phase === PlayerPhase.WaitingFirstFrame || player.phase === PlayerPhase.Pause) {\n      player.play();\n      return;\n    }\n\n    if (player.phase === PlayerPhase.Ended) {\n      player.seekToScheduleTime(0);\n      player.play();\n      return;\n    }\n  },[player])\n\n  const handleChange = (event: any, newValue: any) => {\n    store.setCurrentTime(newValue);\n    store.updateProgress(newValue);\n  }\n\n\n  const onWindowResize = () => {\n    if (state.player) {\n      state.player.refreshViewSize();\n    }\n  }\n\n  const handleSpaceKey = (evt: any) => {\n    if (evt.code === 'Space') {\n      if (state.player) {\n        handleOperationClick(state.player);\n      }\n    }\n  }\n\n  const handleOperationClick = (player: Player) => {\n    switch (player.phase) {\n      case PlayerPhase.WaitingFirstFrame:\n      case PlayerPhase.Pause: {\n        player.play();\n        break;\n      }\n      case PlayerPhase.Playing: {\n        player.pause();\n        break;\n      }\n      case PlayerPhase.Ended: {\n        player.seekToScheduleTime(0);\n        break;\n      }\n    }\n  }\n\n  const {uuid, startTime, endTime, mediaUrl} = useParams();\n  const location = useLocation();\n\n  const searchParams = new URLSearchParams(location.search);\n\n  const rid: string = searchParams.get('rid') as string;\n\n  const duration = useMemo(() => {\n    if (!startTime || !endTime) return 0;\n    const _duration = Math.abs(+startTime - +endTime);\n    return _duration;\n  }, [startTime, endTime]);\n\n  const lock = useRef<boolean>(false);\n\n  useEffect(() => {\n    return () => {\n      lock.current = true;\n    }\n  }, []);\n\n  useEffect(() => {\n    window.addEventListener('resize', onWindowResize);\n    window.addEventListener('keydown', handleSpaceKey);\n    if (uuid && startTime && endTime) {\n        store.joinRoom(uuid).then(({roomToken}) => {\n          WhiteboardAPI.replayRoom(whiteboard.client,\n          {\n            beginTimestamp: +startTime,\n            duration: duration,\n            room: uuid,\n            mediaURL: getOSSUrl(mediaUrl as string),\n            roomToken: roomToken,\n          }, {\n            onCatchErrorWhenRender: error => {\n              error && console.warn(error);\n              globalStore.showToast({\n                message: t('toast.replay_failed'),\n                type: 'notice'\n              });\n            },\n            onCatchErrorWhenAppendFrame: error => {\n              error && console.warn(error);\n              globalStore.showToast({\n                message: t('toast.replay_failed'),\n                type: 'notice'\n              });\n            },\n            onPhaseChanged: phase => {\n              store.updatePhase(phase);\n            },\n            onLoadFirstFrame: () => {\n              store.loadFirstFrame();\n            },\n            onSliceChanged: () => {\n            },\n            onPlayerStateChanged: (error) => {\n            },\n            onStoppedWithError: (error) => {\n              error && console.warn(error);\n              globalStore.showToast({\n                message: t('toast.replay_failed'),\n                type: 'notice'\n              });\n              store.setReplayFail(true);\n            },\n            onScheduleTimeChanged: (scheduleTime) => {\n              console.log(\"onScheduleTimeChanged scheduleTime \", scheduleTime);\n              if (lock.current) return;\n              store.setCurrentTime(scheduleTime);\n            }\n          }).then((player: Player | undefined) => {\n            if (player) {\n              store.setPlayer(player);\n              player.bindHtmlElement(document.getElementById(\"whiteboard\") as HTMLDivElement);\n            }\n          })\n        });\n    }\n    return () => {\n      window.removeEventListener('resize', onWindowResize);\n      window.removeEventListener('keydown', onWindowResize);\n    }\n  }, [duration, endTime, handleSpaceKey, mediaUrl, onWindowResize, startTime, uuid]);\n\n  const totalTime = useMemo(() => {\n    return moment(duration).format(\"mm:ss\");\n  }, [duration]);\n\n  const time = useMemo(() => {\n    return moment(state.currentTime).format(\"mm:ss\");\n  }, [state.currentTime]);\n\n  const loadRTM = useRef<boolean>(false);\n  const [rtmMessage, setRtmMessage] = useState<{count: any, messages: any[]}>(GlobalStorage.getRtmMessage());\n  const rtmRecord = new RTMRestful(process.env.REACT_APP_AGORA_CUSTOMER_ID as string, process.env.REACT_APP_AGORA_CUSTOMER_CERTIFICATE as string);\n\n  useEffect(() => {\n    if (startTime && endTime) {\n      loadRTM.current = true;\n      const begin = moment(+startTime).utc().format(\"YYYY-MM-DDTHH:mm:ss\");\n      const ended = moment(+endTime).utc().format(\"YYYY-MM-DDTHH:mm:ss\");\n      // rtmRecord.getAllChannelMessages(\n      //   {\n      //    rid: rid,\n      //    startTime: begin,\n      //    endTime: ended,\n      //   }\n      // )\n      // .then((e: any) => {\n      //   loadRTM.current = false;\n      //   const messages = e.filter((it: any) => it.message_type === \"group_message\");\n      //   const chatMessages = messages.reduce((collect: any[], value: any) => {\n      //     const payload = value.payload;\n      //     const json = JSON.parse(payload);\n      //     if (json.content) {\n      //       return collect.concat({\n      //         account: json.account,\n      //         content: json.content,\n      //         ms: value.ms,\n      //         src: value.src\n      //       });\n      //     }\n      //     return collect;\n      //   }, []);\n      //   setRtmMessage(chatMessages);\n      // })\n      // .catch((err: any) => {\n      //   console.warn(err);\n      // })\n    }\n  }, [startTime, endTime, rid]);\n\n  const PlayerCover = useCallback(() => {\n    if (!player) {\n      return (<Progress title={t(\"replay.loading\")} />)\n    }\n\n    if (player.phase === PlayerPhase.Playing) return null;\n\n    return (\n      <div className=\"player-cover\">\n        {player.phase === PlayerPhase.Buffering ? <Progress title={t(\"replay.loading\")} />: null}\n        {player.phase === PlayerPhase.Pause || player.phase === PlayerPhase.Ended || player.phase === PlayerPhase.WaitingFirstFrame ? \n          <div className=\"play-btn\" onClick={handlePlayerClick}></div> : null}\n      </div>\n    )\n  }, [handlePlayerClick, player]);\n\n  const ref = useRef(null);\n\n  // const scrollDown = (current: any) => {\n  //   current.scrollTop = current.scrollHeight;\n  // }\n\n  // useEffect(() => {\n  //   scrollDown(ref.current);\n  // }, [messages]);\n\n  return (\n    <div className=\"replay\">\n      <div className={`player-container`} >\n        <PlayerCover />\n        <div className=\"player\">\n          <div className=\"agora-logo\"></div>\n          <div id=\"whiteboard\" className=\"whiteboard\"></div>\n          <div className=\"video-menu\">\n            <div className=\"control-btn\">\n              <div className={`btn ${player && player.phase === PlayerPhase.Playing ? 'paused' : 'play'}`} onClick={handlePlayerClick}></div>\n            </div>\n            <div className=\"progress\">\n              <Slider\n                className='custom-video-progress'\n                value={state.currentTime}\n                onMouseDown={() => {\n                  if (store.state && store.state.player) {\n                    const player = store.state.player as Player;\n                    player.pause();\n                    lock.current = true;\n                  }\n                }}\n                onMouseUp={() => {\n                  if (store.state && store.state.player) {\n                    const player = store.state.player as Player;\n                    player.seekToScheduleTime(state.currentTime);\n                    player.play();\n                    lock.current = false;\n                  }\n                }}\n                onChange={handleChange}\n                min={0}\n                max={duration}\n                aria-labelledby=\"continuous-slider\"\n              />\n              <div className=\"time\">\n                <div className=\"current_duration\">{time}</div>\n                  /\n                <div className=\"video_duration\">{totalTime}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"video-container\">\n        <div className=\"video-player\">\n          <video id=\"white-sdk-video-js\" className=\"video-js video-layout\" style={{width: \"100%\", height: \"100%\", objectFit: \"cover\"}}></video>\n        </div>\n        <div className=\"chat-holder chat-board chat-messages-container\">\n          {/* <div className=\"chat-messages\" ref={ref}>\n            {rtmMessage && rtmMessage.messages && rtmMessage.messages.map((item: any, key: number) => (\n              <Message key={key} nickname={item.account} content={item.content} link={item.link} sender={false} />\n            ))}\n          </div>  */}\n        </div>\n      </div>\n    </div>\n  )\n}","import SocketIO from 'socket.io-client'\n\n// 心跳检测\nconst heartCheck = (socket, userId) => {\n    let timeout = 0\n\n    window.setInterval(() => {\n        if (timeout <= 0) {\n            socket.emit('refresh', { userId })\n            timeout = 30\n        } else {\n            timeout--\n        }\n    }, 1000)\n}\n\nfunction SocketIOClient(url, userId, token) {\n    const socket = SocketIO(url, {\n        transports: ['websocket', 'polling', 'flashsocket']\n    })\n\n    this.url = url\n    this.userId = userId\n    this.token = token\n    this.socket = socket\n}\n\n// 打开连接&发送握手事件\nSocketIOClient.prototype.openConnect = function () {\n\n    console.log('socket open', 1);\n    const socket = this.socket\n    const userId = this.userId\n    const token = this.token\n\n    socket.on('connect', () => {\n        heartCheck(socket, userId)\n        // 发送握手事件\n        socket.emit('handshake', { token: userId, auth: token }, res => {\n            res = res || {}\n            console.log('socket res open', res);\n        })\n    })\n}\n\n// 接收消息\nSocketIOClient.prototype.receive = function (socketStore) {\n    const socket = this.socket\n    socket.on('notification', ({ payload }) => {\n        console.log('socket通知payload', payload);\n        // alert(payload)\n        if (!payload) return\n        // 拿到数据通知 前端\n        socketStore.setSocketDetail(payload)\n\n    })\n}\n\nexport default SocketIOClient\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport Layout from './components/Layout';\nimport App from './pages/index';\nimport * as serviceWorker from './serviceWorker';\n\nconst target = document.getElementById('root')\n\nReactDOM.render(\n  <Layout>\n    <App />\n  </Layout>\n\n  ,\n  target);\n\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from 'react';\nimport { Route } from 'react-router-dom';\nimport CustomBrowserRouter from '../containers/custom-browser-router';\nimport ThemeContainer from '../containers/theme-container';\nimport Home from './home';\nimport DeviceTest from './device-test';\nimport Loading from '../components/loading';\nimport Toast from '../components/Toast';\n\nimport Dialog from '../components/dialog';\nimport localStore, {LocalKey} from '../utils/local-store'\nimport '../icons.scss';\nimport ReplayContainer from './replay';\nimport { RootProvider } from '../containers/root-container';\nimport SocketIO from \"../utils/socket-io\";\nimport {socketStore} from '../stores/socket'\n\nexport default function () {\n\n  const userInfo = localStore.get(LocalKey.userInfo)\n  const accessToken = localStore.get(LocalKey.accessToken)\n  console.log('-----socket参数',process.env.REACT_APP_SOCKET_DOMAIN, userInfo, accessToken);\n  const socket = new SocketIO(process.env.REACT_APP_SOCKET_DOMAIN, userInfo.userId, accessToken)\n  socket.openConnect()\n  socket.receive(socketStore)\n\n  return (\n    <ThemeContainer>\n      <CustomBrowserRouter>\n\n        <RootProvider>\n          <Loading />\n          <Toast />\n          <Dialog />\n          <Route exact path=\"/live/detail/:createId/:liveId\" component={Home} />\n          {/*<Route exact path=\"/live/detail/:createId/:liveId\" component={SmallClass} />*/}\n\n          {/*<Route exact path=\"/\" component={Home} />*/}\n\n          <Route exact path=\"/device_test\">\n            <DeviceTest />\n          </Route>\n\n          <Route exact path=\"/replay/:uuid/:startTime/:endTime/:mediaUrl\">\n            <ReplayContainer />\n          </Route>\n\n        </RootProvider>\n\n      </CustomBrowserRouter>\n    </ThemeContainer>\n  )\n}\n"],"sourceRoot":""}